<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KALNET College ERP</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: linear-gradient(135deg, #f8f9fc 0%, #eef2f7 100%);
            color: #1a202c;
            overflow-x: hidden;
            transition: background 0.3s cubic-bezier(0.4, 0, 0.2, 1), color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            letter-spacing: -0.01em;
        }
        
        body.dark-mode {
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            color: #e4e6eb;
        }
        
        /* Pre-Login Screens */
        .pre-login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #4a90e2;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .pre-login-container::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: moveGrid 20s linear infinite;
        }
        
        @keyframes moveGrid {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        body.dark-mode .pre-login-container {
            background: #2874b5;
        }
        
        .role-selection-screen {
            width: 100%;
            max-width: 1200px;
            position: relative;
            z-index: 1;
        }
        
        .role-header {
            text-align: center;
            margin-bottom: 60px;
        }
        
        .role-header h1 {
            font-size: 48px;
            font-weight: 800;
            color: #ffffff;
            margin-bottom: 16px;
            letter-spacing: -1px;
            text-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        body.dark-mode .role-header h1 {
            color: #ffffff;
        }
        
        .role-header p {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 400;
        }
        
        body.dark-mode .role-header p {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .role-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 24px;
            margin-top: 40px;
        }
        
        .role-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            padding: 36px 28px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .role-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: #4a90e2;
            transform: scaleX(0);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body.dark-mode .role-card {
            background: rgba(26, 31, 46, 0.95);
            border-color: rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }
        
        .role-card:hover {
            border-color: rgba(102, 126, 234, 0.5);
            background: rgba(255, 255, 255, 1);
            transform: translateY(-8px);
            box-shadow: 0 16px 48px rgba(102, 126, 234, 0.3);
        }
        
        .role-card:hover::before {
            transform: scaleX(1);
        }
        
        body.dark-mode .role-card:hover {
            background: rgba(26, 31, 46, 1);
            border-color: rgba(102, 126, 234, 0.5);
        }
        
        .role-card-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
        
        .role-card h3 {
            font-size: 20px;
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 8px;
        }
        
        body.dark-mode .role-card h3 {
            color: #ffffff;
        }
        
        .role-card p {
            font-size: 14px;
            color: #718096;
            line-height: 1.5;
        }
        
        body.dark-mode .role-card p {
            color: #8b92a8;
        }
        
        /* Login Screen */
        .login-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 48px 40px;
            width: 100%;
            max-width: 440px;
            box-shadow: 0 24px 64px rgba(0, 0, 0, 0.15);
            position: relative;
            z-index: 1;
        }
        
        body.dark-mode .login-card {
            background: rgba(26, 31, 46, 0.95);
            border-color: rgba(255, 255, 255, 0.1);
            box-shadow: 0 24px 64px rgba(0, 0, 0, 0.5);
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 36px;
        }
        
        .login-header h2 {
            font-size: 32px;
            font-weight: 800;
            color: #1a202c;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }
        
        body.dark-mode .login-header h2 {
            color: #ffffff;
        }
        
        .login-header p {
            font-size: 14px;
            color: #718096;
        }
        
        body.dark-mode .login-header p {
            color: #8b92a8;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            color: #4a5568;
            margin-bottom: 8px;
        }
        
        body.dark-mode .form-group label {
            color: #b4b9c7;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 14px 16px;
            background: #ffffff;
            border: 2px solid #e8ecf3;
            border-radius: 10px;
            color: #1a202c;
            font-size: 15px;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 400;
        }
        
        body.dark-mode .form-group input,
        body.dark-mode .form-group select {
            background: rgba(15, 20, 35, 0.5);
            border-color: #2a3041;
            color: #e4e6eb;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #4a90e2;
            background: #ffffff;
            box-shadow: 0 0 0 4px rgba(74, 144, 226, 0.1);
        }
        
        body.dark-mode .form-group input:focus,
        body.dark-mode .form-group select:focus {
            background: rgba(15, 20, 35, 0.8);
            border-color: #4a90e2;
        }
        
        .btn-primary {
            width: 100%;
            padding: 16px;
            background: #4a90e2;
            border: none;
            border-radius: 10px;
            color: #ffffff;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin-top: 8px;
            box-shadow: 0 4px 16px rgba(74, 144, 226, 0.3);
            letter-spacing: 0.3px;
        }
        
        .btn-primary:hover {
            background: #357abd;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(74, 144, 226, 0.4);
        }
        
        .btn-primary:active {
            transform: translateY(0);
        }
        
        .login-footer {
            margin-top: 24px;
            text-align: center;
        }
        
        .login-footer a {
            color: #4a90e2;
            text-decoration: none;
            font-size: 13px;
            margin: 0 12px;
        }
        
        .login-footer a:hover {
            text-decoration: underline;
        }
        
        /* Main Layout */
        .main-layout {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        
        /* Sidebar */
        .sidebar {
            width: 280px;
            background: #ffffff;
            border-right: 1px solid #e8ecf3;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            flex-shrink: 0;
            box-shadow: 2px 0 12px rgba(0, 0, 0, 0.03);
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .sidebar.collapsed {
            width: 80px;
        }
        
        body.dark-mode .sidebar {
            background: #1a1f2e;
            border-right-color: #2a3041;
            box-shadow: 2px 0 12px rgba(0, 0, 0, 0.3);
        }
        
        .sidebar-header {
            padding: 28px 24px;
            border-bottom: 1px solid #e8ecf3;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        body.dark-mode .sidebar-header {
            border-bottom-color: #2a3041;
        }
        
        .sidebar-header h2 {
            font-size: 22px;
            font-weight: 800;
            color: #4a90e2;
            letter-spacing: -0.5px;
            white-space: nowrap;
            overflow: hidden;
            transition: opacity 0.2s;
        }
        
        .sidebar.collapsed .sidebar-header h2 {
            opacity: 0;
            width: 0;
        }
        
        .sidebar-toggle {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: #f8f9fc;
            border: 1px solid #e8ecf3;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            flex-shrink: 0;
        }
        
        body.dark-mode .sidebar-toggle {
            background: #2a3041;
            border-color: #3a4051;
        }
        
        .sidebar-toggle:hover {
            background: #4a90e2;
            border-color: #4a90e2;
            color: #ffffff;
            transform: scale(1.05);
        }
        
        body.dark-mode .sidebar-toggle:hover {
            background: #4a90e2;
            border-color: #4a90e2;
        }
        
        .sidebar-toggle svg {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .sidebar.collapsed .sidebar-toggle svg {
            transform: rotate(180deg);
        }
        
        body.dark-mode .sidebar-header h2 {
            color: #ffffff;
        }
        
        .sidebar-nav {
            flex: 1;
            padding: 12px 0;
        }
        
        .nav-section {
            margin-bottom: 24px;
        }
        
        .nav-section-title {
            padding: 8px 20px;
            font-size: 11px;
            font-weight: 700;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: opacity 0.2s;
        }
        
        .sidebar.collapsed .nav-section-title {
            opacity: 0;
            height: 0;
            padding: 0;
            overflow: hidden;
        }
        
        body.dark-mode .nav-section-title {
            color: #6b7280;
        }
        
        .nav-item {
            padding: 10px 20px;
            display: flex;
            align-items: center;
            color: #4a5568;
            cursor: pointer;
            transition: all 0.15s ease;
            border-left: 3px solid transparent;
            font-size: 14px;
            position: relative;
        }
        
        .sidebar.collapsed .nav-item {
            padding: 10px;
            justify-content: center;
        }
        
        .sidebar.collapsed .nav-item span:not(.nav-item-icon) {
            position: absolute;
            left: 100%;
            background: #1a202c;
            color: #ffffff;
            padding: 8px 16px;
            border-radius: 8px;
            white-space: nowrap;
            margin-left: 12px;
            font-size: 13px;
            font-weight: 500;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        body.dark-mode .sidebar.collapsed .nav-item span:not(.nav-item-icon) {
            background: #2a3041;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }
        
        .sidebar.collapsed .nav-item:hover span:not(.nav-item-icon) {
            opacity: 1;
        }
        
        body.dark-mode .nav-item {
            color: #b4b9c7;
        }
        
        .nav-item:hover {
            background: #f7fafc;
            color: #1a202c;
        }
        
        body.dark-mode .nav-item:hover {
            background: #1f2533;
            color: #ffffff;
        }
        
        .nav-item.active {
            background: rgba(74, 144, 226, 0.1);
            color: #4a90e2;
            border-left-color: #4a90e2;
            font-weight: 600;
            box-shadow: inset 0 1px 2px rgba(74, 144, 226, 0.1);
        }
        
        body.dark-mode .nav-item.active {
            background: rgba(74, 144, 226, 0.15);
        }
        
        .nav-item-icon {
            margin-right: 12px;
            font-size: 16px;
            width: 20px;
            text-align: center;
            flex-shrink: 0;
            transition: margin 0.3s;
        }
        
        .sidebar.collapsed .nav-item-icon {
            margin-right: 0;
        }
        
        /* Topbar */
        .topbar {
            height: 72px;
            background: #ffffff;
            border-bottom: 1px solid #e8ecf3;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 32px;
            flex-shrink: 0;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
        }
        
        body.dark-mode .topbar {
            background: #1a1f2e;
            border-bottom-color: #2a3041;
        }

        .topbar-left {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .topbar-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .page-title {
            font-size: 20px;
            font-weight: 700;
            color: #1a202c;
            letter-spacing: -0.3px;
        }

        body.dark-mode .page-title {
            color: #ffffff;
        }

        .page-breadcrumb {
            font-size: 12px;
            color: #718096;
        }

        body.dark-mode .page-breadcrumb {
            color: #a0aec0;
        }

        .topbar-action {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: #f8f9fc;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            border: 1px solid #e8ecf3;
            color: #4a5568;
        }

        body.dark-mode .topbar-action {
            background: #2a3041;
            border-color: #3a4051;
            color: #a0aec0;
        }

        .topbar-action:hover {
            background: #4a90e2;
            border-color: #4a90e2;
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
        }

        body.dark-mode .topbar-action:hover {
            background: #4a90e2;
            border-color: #4a90e2;
            color: #ffffff;
        }

        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            width: 18px;
            height: 18px;
            background: #e74c3c;
            border-radius: 50%;
            font-size: 10px;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #ffffff;
        }

        body.dark-mode .notification-badge {
            border-color: #1a1f2e;
        }
        
        .topbar-title {
            font-size: 22px;
            font-weight: 700;
            color: #1a202c;
            letter-spacing: -0.5px;
        }
        
        body.dark-mode .topbar-title {
            color: #ffffff;
        }
        
        .topbar-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .topbar-btn {
            padding: 10px 20px;
            background: #ffffff;
            border: 1px solid #e8ecf3;
            border-radius: 10px;
            color: #1a202c;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
        }
        
        body.dark-mode .topbar-btn {
            background: #2a3041;
            border-color: #3a4051;
            color: #e4e6eb;
        }
        
        .topbar-btn:hover {
            background: #f8f9fc;
            border-color: #4a90e2;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.15);
        }
        
        body.dark-mode .topbar-btn:hover {
            background: #3a4051;
            border-color: #4a90e2;
        }
        
        .topbar-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: #f8f9fc;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            border: 1px solid #e8ecf3;
        }
        
        body.dark-mode .topbar-icon {
            background: #2a3041;
            border-color: #3a4051;
        }
        
        .topbar-icon:hover {
            background: #4a90e2;
            border-color: #4a90e2;
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
        }
        
        body.dark-mode .topbar-icon:hover {
            background: #4a90e2;
            border-color: #4a90e2;
        }
        
        .topbar-icon.has-badge::after {
            content: '';
            position: absolute;
            top: 6px;
            right: 6px;
            width: 8px;
            height: 8px;
            background: #e74c3c;
            border-radius: 50%;
            border: 2px solid #ffffff;
        }
        
        body.dark-mode .topbar-icon.has-badge::after {
            border-color: #1a1f2e;
        }
        
        /* Theme Toggle */
        .theme-toggle {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: #f8f9fc;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 18px;
            border: 1px solid #e8ecf3;
        }
        
        body.dark-mode .theme-toggle {
            background: #2a3041;
            border-color: #3a4051;
        }
        
        .theme-toggle:hover {
            background: #4a90e2;
            border-color: #4a90e2;
            color: #ffffff;
            transform: rotate(20deg) scale(1.05);
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
        }
        
        body.dark-mode .theme-toggle:hover {
            background: #4a90e2;
            border-color: #4a90e2;
        }
        
        .user-menu {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 12px;
            background: #f8f9fc;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid #e8ecf3;
        }
        
        body.dark-mode .user-menu {
            background: #2a3041;
            border-color: #3a4051;
        }
        
        .user-menu:hover {
            background: #ffffff;
            border-color: #4a90e2;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.15);
        }
        
        body.dark-mode .user-menu:hover {
            background: #3a4051;
            border-color: #4a90e2;
        }
        
        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: #4a90e2;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            font-weight: 700;
            font-size: 14px;
            box-shadow: 0 2px 8px rgba(74, 144, 226, 0.3);
        }
        
        .user-info {
            display: flex;
            flex-direction: column;
        }
        
        .user-name {
            font-size: 13px;
            font-weight: 600;
            color: #1a202c;
        }
        
        body.dark-mode .user-name {
            color: #ffffff;
        }
        
        .user-role {
            font-size: 11px;
            color: #718096;
        }
        
        body.dark-mode .user-role {
            color: #8b92a8;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 32px;
            background: #f8f9fc;
        }
        
        body.dark-mode .content-area {
            background: #0a0e27;
        }
        
        /* Cards */
        .card {
            background: #ffffff;
            border: 1px solid #e8ecf3;
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card:hover {
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            transform: translateY(-2px);
        }
        
        body.dark-mode .card {
            background: #1a1f2e;
            border-color: #2a3041;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        body.dark-mode .card:hover {
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        }
        
        .card-header {
            display: flex;
            align-items: center;
           justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        body.dark-mode .card-header {
            border-bottom-color: #2a3041;
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 700;
            color: #1a202c;
        }
        
        body.dark-mode .card-title {
            color: #ffffff;
        }
        
        .card-actions {
            display: flex;
            gap: 8px;
        }
        
        /* KPI Grid */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        
        /* Page Grid */
        .page-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 24px;
        }
        
        @media (max-width: 768px) {
            .page-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .kpi-card {
            background: #ffffff;
            border: 1px solid #e8ecf3;
            border-radius: 16px;
            padding: 24px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            position: relative;
            overflow: hidden;
        }
        
        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: #4a90e2;
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body.dark-mode .kpi-card {
            background: #1a1f2e;
            border-color: #2a3041;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .kpi-card:hover {
            border-color: rgba(102, 126, 234, 0.3);
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(102, 126, 234, 0.15);
        }
        
        .kpi-card:hover::before {
            transform: scaleX(1);
        }
        
        body.dark-mode .kpi-card:hover {
            box-shadow: 0 12px 32px rgba(102, 126, 234, 0.2);
        }
        
        .kpi-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        
        .kpi-label {
            font-size: 13px;
            color: #718096;
            font-weight: 500;
        }
        
        body.dark-mode .kpi-label {
            color: #8b92a8;
        }
        
        .kpi-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .kpi-icon svg,
        .nav-item-icon svg,
        .role-card-icon svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }
        
        .role-card-icon svg {
            width: 48px;
            height: 48px;
        }
        
        .kpi-icon.blue { background: rgba(74, 144, 226, 0.15); color: #4a90e2; }
        .kpi-icon.green { background: rgba(46, 204, 113, 0.15); color: #2ecc71; }
        .kpi-icon.red { background: rgba(231, 76, 60, 0.15); color: #e74c3c; }
        .kpi-icon.orange { background: rgba(230, 126, 34, 0.15); color: #e67e22; }
        .kpi-icon.purple { background: rgba(155, 89, 182, 0.15); color: #9b59b6; }
        
        .kpi-value {
            font-size: 32px;
            font-weight: 800;
            color: #1a202c;
            margin-bottom: 6px;
            letter-spacing: -0.5px;
        }
        
        body.dark-mode .kpi-value {
            color: #ffffff;
        }
        
        .kpi-change {
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .kpi-change.positive { color: #2ecc71; }
        .kpi-change.negative { color: #e74c3c; }
        .kpi-change.neutral { color: #718096; }
        
        body.dark-mode .kpi-change.neutral { color: #8b92a8; }
        
        /* Tables */
        .table-container {
            background: #ffffff;
            border: 1px solid #e8ecf3;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }
        
        body.dark-mode .table-container {
            background: #1a1f2e;
            border-color: #2a3041;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .table-header {
            padding: 20px 24px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        body.dark-mode .table-header {
            border-bottom-color: #2a3041;
        }
        
        .table-title {
            font-size: 16px;
            font-weight: 700;
            color: #1a202c;
        }
        
        body.dark-mode .table-title {
            color: #ffffff;
        }
        
        .table-filters {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .filter-group {
            display: flex;
            gap: 8px;
        }
        
        .filter-select {
            padding: 10px 16px;
            background: #ffffff;
            border: 1px solid #e8ecf3;
            border-radius: 10px;
            color: #1a202c;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body.dark-mode .filter-select {
            background: #1a1f2e;
            border-color: #2a3041;
            color: #e4e6eb;
        }
        
        .filter-select:focus {
            outline: none;
            border-color: #4a90e2;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }
        
        /* Generic form elements */
        input[type="text"],
        input[type="number"],
        input[type="date"],
        input[type="email"],
        input[type="password"],
        select,
        textarea {
            padding: 10px 12px;
            background: #ffffff;
            border: 1px solid #e8ecf3;
            border-radius: 8px;
            color: #1a202c;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body.dark-mode input[type="text"],
        body.dark-mode input[type="number"],
        body.dark-mode input[type="date"],
        body.dark-mode input[type="email"],
        body.dark-mode input[type="password"],
        body.dark-mode select,
        body.dark-mode textarea {
            background: #1a1f2e;
            border-color: #2a3041;
            color: #e4e6eb;
        }
        
        input[type="text"]:focus,
        input[type="number"]:focus,
        input[type="date"]:focus,
        input[type="email"]:focus,
        input[type="password"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #4a90e2;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }
        
        textarea {
            resize: vertical;
            font-family: inherit;
        }
        
        .search-input {
            padding: 10px 16px;
            background: #ffffff;
            border: 1px solid #e8ecf3;
            border-radius: 10px;
            color: #1a202c;
            font-size: 14px;
            font-weight: 400;
            min-width: 240px;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body.dark-mode .search-input {
            background: #1a1f2e;
            border-color: #2a3041;
            color: #e4e6eb;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #4a90e2;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }
        
        .table-wrapper {
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        thead {
            background: #f8f9fc;
            border-bottom: 2px solid #e8ecf3;
        }
        
        body.dark-mode thead {
            background: #141920;
            border-bottom-color: #2a3041;
        }
        
        th {
            padding: 16px 20px;
            text-align: left;
            font-size: 12px;
            font-weight: 700;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            white-space: nowrap;
        }
        
        body.dark-mode th {
            color: #8b92a8;
        }
        
        tbody tr {
            border-bottom: 1px solid #e8ecf3;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        
        body.dark-mode tbody tr {
            border-bottom-color: #2a3041;
        }
        
        tbody tr:hover {
            background: rgba(74, 144, 226, 0.05);
            transform: scale(1.001);
        }
        
        body.dark-mode tbody tr:hover {
            background: rgba(74, 144, 226, 0.1);
        }
        
        td {
            padding: 16px 20px;
            font-size: 14px;
            color: #1a202c;
            white-space: nowrap;
        }
        
        body.dark-mode td {
            color: #e4e6eb;
        }
        
        /* Badges */
        .badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .badge.success { background: rgba(81, 207, 102, 0.15); color: #37b24d; border: 1px solid rgba(81, 207, 102, 0.3); }
        .badge.warning { background: rgba(255, 184, 0, 0.15); color: #f59f00; border: 1px solid rgba(255, 184, 0, 0.3); }
        .badge.danger { background: rgba(255, 107, 107, 0.15); color: #ee5a6f; border: 1px solid rgba(255, 107, 107, 0.3); }
        .badge.info { background: rgba(74, 144, 226, 0.15); color: #4a90e2; border: 1px solid rgba(74, 144, 226, 0.3); }
        .badge.neutral { background: rgba(113, 128, 150, 0.15); color: #718096; border: 1px solid rgba(113, 128, 150, 0.3); }
        
        body.dark-mode .badge.neutral { background: rgba(139, 146, 168, 0.15); color: #8b92a8; }
        
        /* Alerts */
        .alert {
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 13px;
            line-height: 1.5;
            margin-bottom: 20px;
        }
        
        .alert-info {
            background: rgba(74, 144, 226, 0.1);
            border-left: 3px solid #4a90e2;
            color: #2c5282;
        }
        
        body.dark-mode .alert-info {
            background: rgba(74, 144, 226, 0.15);
            color: #90cdf4;
        }
        
        .alert-warning {
            background: rgba(255, 183, 77, 0.1);
            border-left: 3px solid #ffb74d;
            color: #7c2d12;
        }
        
        body.dark-mode .alert-warning {
            background: rgba(255, 183, 77, 0.15);
            color: #ffc078;
        }
        
        .alert-success {
            background: rgba(76, 175, 80, 0.1);
            border-left: 3px solid #4caf50;
            color: #1e4620;
        }
        
        body.dark-mode .alert-success {
            background: rgba(76, 175, 80, 0.15);
            color: #9ae6b4;
        }
        
        .alert-danger {
            background: rgba(244, 67, 54, 0.1);
            border-left: 3px solid #f44336;
            color: #7f1d1d;
        }
        
        body.dark-mode .alert-danger {
            background: rgba(244, 67, 54, 0.15);
            color: #fca5a5;
        }
        
        /* Buttons */
        .btn {
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-sm {
            padding: 8px 16px;
            font-size: 13px;
        }
        
        .btn-primary {
            background: #4a90e2;
            color: #ffffff;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
        }
        
        .btn-primary:hover {
            background: #357abd;
            box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4);
        }
        
        .btn-secondary {
            background: #ffffff;
            color: #1a202c;
            border: 1px solid #e8ecf3;
        }
        
        body.dark-mode .btn-secondary {
            background: #2a3041;
            color: #e4e6eb;
            border-color: #3a4051;
        }
        
        .btn-secondary:hover {
            background: #f8f9fc;
            border-color: #667eea;
        }
        
        body.dark-mode .btn-secondary:hover {
            background: #3a4051;
        }
        
        .btn-danger {
            background: #e74c3c;
            color: #ffffff;
            box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);
        }
        
        .btn-danger:hover {
            background: #c0392b;
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
        }
        
        .btn-success {
            background: #27ae60;
            color: #ffffff;
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);
        }
        
        .btn-success:hover {
            background: #229954;
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
        }
        
        /* Action Row */
        .action-cell {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            padding: 6px 12px;
            background: #ffffff;
            border: 1px solid #e8ecf3;
            border-radius: 8px;
            color: #1a202c;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body.dark-mode .action-btn {
            background: #2a3041;
            border-color: #3a4051;
            color: #e4e6eb;
        }
        
        .action-btn:hover {
            background: #f8f9fc;
            border-color: #4a90e2;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(74, 144, 226, 0.15);
        }
        
        body.dark-mode .action-btn:hover {
            background: #3a4051;
            border-color: #4a90e2;
        }
        
        /* Hidden */
        .hidden {
            display: none !important;
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal {
            background: #ffffff;
            border-radius: 16px;
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.2);
            max-width: 600px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            transform: scale(0.9) translateY(20px);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .modal-overlay.active .modal {
            transform: scale(1) translateY(0);
        }
        
        body.dark-mode .modal {
            background: #1a1f2e;
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.6);
        }
        
        .modal-content {
            background: #ffffff;
            border-radius: 16px;
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.2);
            max-width: 600px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
        }
        
        body.dark-mode .modal-content {
            background: #1a1f2e;
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.6);
        }
        
        .modal-header {
            padding: 24px 28px;
            border-bottom: 1px solid #e8ecf3;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        body.dark-mode .modal-header {
            border-bottom-color: #2a3041;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 700;
            color: #1a202c;
        }
        
        body.dark-mode .modal-title {
            color: #ffffff;
        }
        
        .modal-close {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: transparent;
            border: none;
            color: #718096;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .modal-close:hover {
            background: #f8f9fc;
            color: #1a202c;
        }
        
        body.dark-mode .modal-close:hover {
            background: #2a3041;
            color: #ffffff;
        }
        
        .modal-body {
            padding: 24px 28px;
        }
        
        .modal-footer {
            padding: 20px 28px;
            border-top: 1px solid #e8ecf3;
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }
        
        body.dark-mode .modal-footer {
            border-top-color: #2a3041;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        .form-grid.single {
            grid-template-columns: 1fr;
        }
        
        .form-field {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .form-field.full-width {
            grid-column: 1 / -1;
        }
        
        .form-label {
            font-size: 13px;
            font-weight: 600;
            color: #4a5568;
        }
        
        body.dark-mode .form-label {
            color: #b4b9c7;
        }
        
        .form-input {
            padding: 12px 16px;
            background: #ffffff;
            border: 2px solid #e8ecf3;
            border-radius: 8px;
            color: #1a202c;
            font-size: 14px;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body.dark-mode .form-input {
            background: rgba(15, 20, 35, 0.5);
            border-color: #2a3041;
            color: #e4e6eb;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #4a90e2;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }
        
        textarea.form-input {
            resize: vertical;
            min-height: 100px;
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f7fafc;
        }
        
        body.dark-mode ::-webkit-scrollbar-track {
            background: #0f1419;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #cbd5e0;
            border-radius: 4px;
        }
        
        body.dark-mode ::-webkit-scrollbar-thumb {
            background: #2a3041;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a0aec0;
        }
        
        body.dark-mode ::-webkit-scrollbar-thumb:hover {
            background: #3a4051;
        }
        
        /* Back Button */
        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: #ffffff;
            border: 1px solid #e8ecf3;
            border-radius: 10px;
            color: #1a202c;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            margin-bottom: 24px;
        }
        
        body.dark-mode .back-btn {
            background: #2a3041;
            border-color: #3a4051;
            color: #e4e6eb;
        }
        
        .back-btn:hover {
            background: #f8f9fc;
            border-color: #4a90e2;
            transform: translateX(-4px);
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.15);
        }
        
        body.dark-mode .back-btn:hover {
            background: #3a4051;
            border-color: #4a90e2;
        }
        
        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 32px;
            right: 32px;
            width: 64px;
            height: 64px;
            background: #4a90e2;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 8px 24px rgba(74, 144, 226, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
        }
        
        .fab:hover {
            background: #357abd;
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 12px 32px rgba(74, 144, 226, 0.5);
        }
        
        .fab:active {
            transform: translateY(-2px) scale(1.02);
        }
        
        /* Quick Actions Menu */
        .quick-actions {
            position: fixed;
            bottom: 110px;
            right: 32px;
            background: #ffffff;
            border: 1px solid #e8ecf3;
            border-radius: 16px;
            padding: 12px;
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15);
            z-index: 999;
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .quick-actions.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }
        
        body.dark-mode .quick-actions {
            background: #1a1f2e;
            border-color: #2a3041;
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.5);
        }
        
        .quick-action-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: transparent;
            border: none;
            border-radius: 10px;
            color: #1a202c;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            width: 100%;
            text-align: left;
        }
        
        body.dark-mode .quick-action-btn {
            color: #e4e6eb;
        }
        
        .quick-action-btn:hover {
            background: rgba(74, 144, 226, 0.1);
            color: #4a90e2;
        }
        
        .quick-action-btn span:first-child {
            font-size: 18px;
        }
        
        /* Status Indicators */
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .status-indicator.online { background: #37b24d; box-shadow: 0 0 8px rgba(55, 178, 77, 0.5); }
        .status-indicator.offline { background: #868e96; }
        .status-indicator.busy { background: #ee5a6f; box-shadow: 0 0 8px rgba(238, 90, 111, 0.5); }
        .status-indicator.away { background: #f59f00; box-shadow: 0 0 8px rgba(245, 159, 0, 0.5); }
        
        /* Animations */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideOutRight {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }
        
        .animate-slide-in {
            animation: slideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .animate-fade-in {
            animation: fadeIn 0.3s ease;
        }
        
        /* Timetable Styles */
        .timetable {
            display: grid;
            grid-template-columns: 120px repeat(6, 1fr);
            gap: 1px;
            background: #e8ecf3;
            border: 1px solid #e8ecf3;
            border-radius: 8px;
            overflow: hidden;
        }
        
        body.dark-mode .timetable {
            background: #2a3041;
            border-color: #2a3041;
        }
        
        .timetable-header {
            display: contents;
        }
        
        .timetable-header > div {
            background: #4a90e2;
            color: white;
            padding: 15px 10px;
            font-weight: 600;
            text-align: center;
            font-size: 14px;
        }
        
        .timetable-row {
            display: contents;
        }
        
        .timetable-time {
            background: #f7fafc;
            padding: 15px 10px;
            font-weight: 600;
            color: #2d3748;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 13px;
        }
        
        body.dark-mode .timetable-time {
            background: #1e2433;
            color: #e4e6eb;
        }
        
        .timetable-subject {
            background: white;
            padding: 15px 10px;
            text-align: center;
            font-size: 13px;
            color: #4a5568;
            line-height: 1.5;
        }
        
        body.dark-mode .timetable-subject {
            background: #0f1423;
            color: #b4b9c7;
        }
        
        .timetable-subject strong {
            display: block;
            color: #1a202c;
            font-size: 14px;
            margin-bottom: 4px;
        }
        
        body.dark-mode .timetable-subject strong {
            color: #e4e6eb;
        }
        
        .timetable-subject.lab {
            background: #e6f2ff;
        }
        
        body.dark-mode .timetable-subject.lab {
            background: rgba(74, 144, 226, 0.1);
        }
        
        .timetable-subject.tutorial {
            background: #fff5e6;
        }
        
        body.dark-mode .timetable-subject.tutorial {
            background: rgba(237, 137, 54, 0.1);
        }
        
        .timetable-break {
            grid-column: span 6;
            background: #f7fafc;
            padding: 10px;
            text-align: center;
            font-weight: 600;
            color: #718096;
        }
        
        body.dark-mode .timetable-break {
            background: #1e2433;
            color: #b4b9c7;
        }
        
        /* Results Styles */
        .result-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        body.dark-mode .result-card {
            background: #0f1423;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        .result-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e8ecf3;
        }
        
        body.dark-mode .result-card-header {
            border-bottom-color: #2a3041;
        }
        
        .result-subjects {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .result-subject {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: #f7fafc;
            border-radius: 8px;
            transition: background 0.2s;
        }
        
        body.dark-mode .result-subject {
            background: #1e2433;
        }
        
        .result-subject:hover {
            background: #edf2f7;
        }
        
        body.dark-mode .result-subject:hover {
            background: #252d42;
        }
        
        .result-subject-name {
            font-weight: 500;
            color: #2d3748;
            font-size: 14px;
        }
        
        body.dark-mode .result-subject-name {
            color: #e4e6eb;
        }
        
        .result-marks {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .grade-badge {
            padding: 6px 12px;
            border-radius: 6px;
            font-weight: 700;
            font-size: 13px;
            min-width: 40px;
            text-align: center;
        }
        
        .grade-badge.grade-a {
            background: #d4edda;
            color: #155724;
        }
        
        body.dark-mode .grade-badge.grade-a {
            background: rgba(72, 187, 120, 0.2);
            color: #68d391;
        }
        
        .grade-badge.grade-b {
            background: #cce5ff;
            color: #004085;
        }
        
        body.dark-mode .grade-badge.grade-b {
            background: rgba(66, 153, 225, 0.2);
            color: #63b3ed;
        }
        
        .grade-badge.grade-c {
            background: #fff3cd;
            color: #856404;
        }
        
        body.dark-mode .grade-badge.grade-c {
            background: rgba(237, 137, 54, 0.2);
            color: #ed8936;
        }
        
        /* Book Grid Styles */
        .book-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .book-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            gap: 15px;
        }
        
        body.dark-mode .book-card {
            background: #0f1423;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        .book-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        body.dark-mode .book-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }
        
        .book-cover-icon {
            flex-shrink: 0;
            width: 60px;
            height: 80px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .book-details {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .book-title {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
            color: #1a202c;
            line-height: 1.4;
        }
        
        body.dark-mode .book-title {
            color: #e4e6eb;
        }
        
        .book-author {
            margin: 0;
            font-size: 13px;
            color: #718096;
            line-height: 1.4;
        }
        
        body.dark-mode .book-author {
            color: #b4b9c7;
        }
        
        .book-isbn {
            margin: 0;
            font-size: 12px;
            color: #a0aec0;
            font-family: 'Courier New', monospace;
        }
        
        body.dark-mode .book-isbn {
            color: #718096;
        }
        
        .book-meta {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-top: 5px;
        }
        
        .book-status {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .book-status.available {
            background: #d4edda;
            color: #155724;
        }
        
        body.dark-mode .book-status.available {
            background: rgba(72, 187, 120, 0.2);
            color: #68d391;
        }
        
        .book-status.issued {
            background: #cce5ff;
            color: #004085;
        }
        
        body.dark-mode .book-status.issued {
            background: rgba(66, 153, 225, 0.2);
            color: #63b3ed;
        }
        
        .book-status.reserved {
            background: #fff3cd;
            color: #856404;
        }
        
        body.dark-mode .book-status.reserved {
            background: rgba(237, 137, 54, 0.2);
            color: #ed8936;
        }
        
        .book-category {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            background: #e8ecf3;
            color: #4a5568;
        }
        
        body.dark-mode .book-category {
            background: #2a3041;
            color: #b4b9c7;
        }
        
        .book-actions {
            display: flex;
            gap: 8px;
            margin-top: auto;
        }
        
        /* Profile & Settings Styles */
        .profile-avatar-lg {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            font-weight: 700;
            color: white;
            margin: 0 auto 20px;
        }
        
        .profile-name {
            text-align: center;
            margin: 0 0 8px;
            font-size: 24px;
            font-weight: 700;
            color: #1a202c;
        }
        
        body.dark-mode .profile-name {
            color: #e4e6eb;
        }
        
        .profile-role {
            text-align: center;
            color: #718096;
            margin: 0 0 20px;
            font-size: 14px;
        }
        
        body.dark-mode .profile-role {
            color: #b4b9c7;
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            padding-top: 20px;
            border-top: 2px solid #e8ecf3;
        }
        
        body.dark-mode .profile-stats {
            border-top-color: #2a3041;
        }
        
        .profile-stat {
            text-align: center;
        }
        
        .profile-stat h4 {
            margin: 0 0 4px;
            font-size: 24px;
            font-weight: 700;
            color: #1a202c;
        }
        
        body.dark-mode .profile-stat h4 {
            color: #e4e6eb;
        }
        
        .profile-stat span {
            font-size: 12px;
            color: #718096;
        }
        
        body.dark-mode .profile-stat span {
            color: #b4b9c7;
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid #e8ecf3;
        }
        
        body.dark-mode .setting-item {
            border-bottom-color: #2a3041;
        }
        
        .setting-item:last-child {
            border-bottom: none;
        }
        
        .setting-info h4 {
            margin: 0 0 4px;
            font-size: 15px;
            font-weight: 600;
            color: #1a202c;
        }
        
        body.dark-mode .setting-info h4 {
            color: #e4e6eb;
        }
        
        .setting-info p {
            margin: 0;
            font-size: 13px;
            color: #718096;
        }
        
        body.dark-mode .setting-info p {
            color: #b4b9c7;
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 26px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .switch .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #cbd5e0;
            transition: .4s;
            border-radius: 26px;
        }
        
        body.dark-mode .switch .slider {
            background: #4a5568;
        }
        
        .switch .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        .switch input:checked + .slider {
            background: #4a90e2;
        }
        
        .switch input:checked + .slider:before {
            transform: translateX(22px);
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
        }
        
        /* ========== FACULTY PORTAL SPECIFIC STYLES ========== */
        
        /* Faculty Portal Container */
        #facultyPortal {
            display: flex;
            height: 100vh;
            width: 100vw;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
            background: #f8f9fc;
        }
        
        body.dark-mode #facultyPortal {
            background: #0a0e27;
        }
        
        /* Faculty Sidebar */
        #facultyPortal .sidebar {
            width: 280px;
            background-color: #ffffff;
            border-right: 1px solid #e8ecf3;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            flex-shrink: 0;
            box-shadow: 2px 0 12px rgba(0, 0, 0, 0.05);
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body.dark-mode #facultyPortal .sidebar {
            background-color: #1a1f2e;
            border-right-color: #2a3041;
            box-shadow: 2px 0 12px rgba(0, 0, 0, 0.3);
        }
        
        #facultyPortal .sidebar.collapsed {
            width: 80px;
        }
        
        #facultyPortal .sidebar-header {
            padding: 28px 24px;
            border-bottom: 1px solid #e8ecf3;
        }
        
        body.dark-mode #facultyPortal .sidebar-header {
            border-bottom-color: #2a3041;
        }
        
        #facultyPortal .sidebar-header-content {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
        }
        
        #facultyPortal .sidebar-header-info {
            flex: 1;
            min-width: 0;
        }
        
        #facultyPortal .sidebar.collapsed .sidebar-header-info {
            opacity: 0;
            width: 0;
            overflow: hidden;
        }
        
        #facultyPortal .sidebar-logo {
            font-size: 11px;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 4px;
            font-weight: 600;
        }
        
        #facultyPortal .sidebar-title {
            font-size: 18px;
            color: #4a90e2;
            font-weight: 700;
        }
        
        #facultyPortal .sidebar-user {
            font-size: 12px;
            color: #4a90e2;
            margin-top: 8px;
            font-weight: 500;
        }
        
        #facultyPortal .sidebar-toggle {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            background: #f8f9fc;
            border: 1px solid #e8ecf3;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            color: #4a5568;
        }
        
        body.dark-mode #facultyPortal .sidebar-toggle {
            background: #2a3041;
            border-color: #3a4051;
            color: #a0aec0;
        }
        
        #facultyPortal .sidebar-toggle:hover {
            background: #4a90e2;
            border-color: #4a90e2;
            color: #ffffff;
        }
        
        #facultyPortal .sidebar.collapsed .sidebar-toggle svg {
            transform: rotate(180deg);
        }
        
        #facultyPortal .sidebar-menu {
            flex: 1;
            overflow-y: auto;
            padding: 15px 0;
        }
        
        #facultyPortal .menu-section {
            margin-bottom: 5px;
        }
        
        #facultyPortal .menu-section-title {
            padding: 10px 20px;
            font-size: 10px;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }
        
        body.dark-mode #facultyPortal .menu-section-title {
            color: #666;
        }
        
        #facultyPortal .sidebar.collapsed .menu-section-title {
            opacity: 0;
            height: 5px;
            padding: 0;
        }
        
        #facultyPortal .menu-item {
            padding: 10px 20px;
            font-size: 14px;
            color: #4a5568;
            cursor: pointer;
            transition: all 0.15s;
            border-left: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        body.dark-mode #facultyPortal .menu-item {
            color: #a0aec0;
        }
        
        #facultyPortal .sidebar.collapsed .menu-item {
            padding: 10px;
            justify-content: center;
        }
        
        #facultyPortal .sidebar.collapsed .menu-item span:not(.menu-icon) {
            display: none;
        }
        
        #facultyPortal .menu-item.active {
            background-color: rgba(74, 144, 226, 0.1);
            color: #4a90e2;
            border-left-color: #4a90e2;
        }
        
        #facultyPortal .menu-item:hover {
            background-color: rgba(74, 144, 226, 0.05);
            color: #1a202c;
        }
        
        body.dark-mode #facultyPortal .menu-item:hover {
            color: #e4e6eb;
        }
        
        #facultyPortal .menu-icon {
            width: 16px;
            height: 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        #facultyPortal .sidebar-footer {
            padding: 15px 20px;
            border-top: 1px solid #e8ecf3;
        }
        
        body.dark-mode #facultyPortal .sidebar-footer {
            border-top-color: #2a3041;
        }
        
        #facultyPortal .logout-btn {
            width: 100%;
            padding: 10px;
            background-color: transparent;
            border: 1px solid #e8ecf3;
            color: #4a5568;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        body.dark-mode #facultyPortal .logout-btn {
            border-color: #2a3041;
            color: #a0aec0;
        }
        
        #facultyPortal .logout-btn:hover {
            background-color: rgba(74, 144, 226, 0.1);
            border-color: #4a90e2;
            color: #4a90e2;
        }
        
        /* Faculty Main Content */
        #facultyPortal .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: #f8f9fc;
        }
        
        body.dark-mode #facultyPortal .main-content {
            background: #0a0e27;
        }
        
        #facultyPortal .topbar {
            height: 60px;
            background-color: #ffffff;
            border-bottom: 1px solid #e8ecf3;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
        }
        
        body.dark-mode #facultyPortal .topbar {
            background-color: #1a1f2e;
            border-bottom-color: #2a3041;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        #facultyPortal .topbar-left {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        
        #facultyPortal .page-title {
            font-size: 18px;
            color: #1a202c;
            font-weight: 700;
        }
        
        body.dark-mode #facultyPortal .page-title {
            color: #ffffff;
        }
        
        #facultyPortal .page-breadcrumb {
            font-size: 12px;
            color: #718096;
        }
        
        #facultyPortal .topbar-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        #facultyPortal .topbar-action {
            width: 36px;
            height: 36px;
            background-color: #f8f9fc;
            border: 1px solid #e8ecf3;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4a5568;
            transition: all 0.2s;
        }
        
        body.dark-mode #facultyPortal .topbar-action {
            background-color: rgba(74, 144, 226, 0.1);
            border-color: #2a3041;
            color: #a0aec0;
        }
        
        #facultyPortal .topbar-action:hover {
            background-color: rgba(74, 144, 226, 0.1);
            border-color: #4a90e2;
            color: #4a90e2;
        }
        
        #facultyPortal .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }
        
        /* Faculty Cards */
        #facultyPortal .card {
            background-color: #ffffff;
            border: 1px solid #e8ecf3;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            transition: all 0.3s;
        }
        
        body.dark-mode #facultyPortal .card {
            background-color: #1a1f2e;
            border-color: #2a3041;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        #facultyPortal .card:hover {
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            transform: translateY(-2px);
        }
        
        body.dark-mode #facultyPortal .card:hover {
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        }
        
        #facultyPortal .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e8ecf3;
        }
        
        body.dark-mode #facultyPortal .card-header {
            border-bottom-color: #2a3041;
        }
        
        #facultyPortal .card-title {
            font-size: 16px;
            color: #1a202c;
            font-weight: 700;
        }
        
        body.dark-mode #facultyPortal .card-title {
            color: #ffffff;
        }
        
        #facultyPortal .card-meta {
            font-size: 12px;
            color: #718096;
        }
        
        /* Faculty Tables */
        #facultyPortal .table-container {
            background-color: #ffffff;
            border: 1px solid #e8ecf3;
            border-radius: 12px;
            overflow-x: auto;
            overflow-y: visible;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }
        
        body.dark-mode #facultyPortal .table-container {
            background-color: #1a1f2e;
            border-color: #2a3041;
        }
        
        #facultyPortal table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        
        #facultyPortal th {
            background-color: #f8f9fc;
            border-bottom: 2px solid #e8ecf3;
            padding: 14px 16px;
            text-align: left;
            color: #4a5568;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 11px;
        }
        
        body.dark-mode #facultyPortal th {
            background-color: rgba(74, 144, 226, 0.1);
            border-bottom-color: #2a3041;
            color: #a0aec0;
        }
        
        #facultyPortal td {
            padding: 14px 16px;
            border-bottom: 1px solid #e8ecf3;
            color: #1a202c;
            overflow: visible;
        }
        
        #facultyPortal td:last-child {
            min-width: 180px;
            white-space: nowrap;
        }
        
        body.dark-mode #facultyPortal td {
            border-bottom-color: #2a3041;
            color: #e4e6eb;
        }
        
        #facultyPortal tr:hover {
            background-color: rgba(74, 144, 226, 0.04);
        }
        
        body.dark-mode #facultyPortal tr:hover {
            background-color: rgba(74, 144, 226, 0.05);
        }
        
        /* Faculty Status Badges */
        #facultyPortal .status-badge,
        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .status-pending {
            background-color: rgba(255, 152, 0, 0.15);
            color: #ffb74d;
            border: 1px solid rgba(255, 152, 0, 0.3);
        }
        
        .status-approved, .status-excellent {
            background-color: rgba(76, 175, 80, 0.15);
            color: #81c784;
            border: 1px solid rgba(76, 175, 80, 0.3);
        }
        
        .status-submitted {
            background-color: rgba(74, 144, 226, 0.15);
            color: #4a90e2;
            border: 1px solid rgba(74, 144, 226, 0.3);
        }
        
        .status-rejected, .status-at-risk {
            background-color: rgba(244, 67, 54, 0.15);
            color: #ef5350;
            border: 1px solid rgba(244, 67, 54, 0.3);
        }
        
        /* Faculty Buttons */
        #facultyPortal .btn {
            padding: 10px 16px;
            background-color: rgba(74, 144, 226, 0.1);
            border: 1px solid #4a90e2;
            color: #4a90e2;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s;
        }
        
        #facultyPortal .btn:hover {
            background-color: rgba(74, 144, 226, 0.2);
            transform: translateY(-1px);
        }
        
        #facultyPortal .btn-primary {
            background-color: #4a90e2;
            border-color: #4a90e2;
            color: #ffffff;
        }
        
        #facultyPortal .btn-primary:hover {
            background-color: #357abd;
            border-color: #357abd;
        }
        
        #facultyPortal .btn-secondary {
            background-color: transparent;
            border-color: #e8ecf3;
            color: #4a5568;
        }
        
        body.dark-mode #facultyPortal .btn-secondary {
            border-color: #2a3041;
            color: #a0aec0;
        }
        
        #facultyPortal .btn-secondary:hover {
            background-color: rgba(74, 144, 226, 0.05);
            border-color: #4a90e2;
            color: #4a90e2;
        }
        
        /* Faculty Filter Bar */
        #facultyPortal .filter-bar {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        #facultyPortal .filter-select {
            padding: 10px 14px;
            background-color: #ffffff;
            border: 1px solid #e8ecf3;
            color: #1a202c;
            border-radius: 8px;
            font-size: 13px;
            min-width: 180px;
        }
        
        body.dark-mode #facultyPortal .filter-select {
            background-color: #1a1f2e;
            border-color: #2a3041;
            color: #e4e6eb;
        }
        
        #facultyPortal .filter-select:focus {
            outline: none;
            border-color: #4a90e2;
        }
        
        #facultyPortal .filter-input {
            padding: 10px 14px;
            background-color: #ffffff;
            border: 1px solid #e8ecf3;
            color: #1a202c;
            border-radius: 8px;
            font-size: 13px;
        }
        
        body.dark-mode #facultyPortal .filter-input {
            background-color: #1a1f2e;
            border-color: #2a3041;
            color: #e4e6eb;
        }
        
        /* Faculty KPI Cards */
        #facultyPortal .kpi-value {
            font-size: 32px;
            color: #1a202c;
            font-weight: 800;
        }
        
        body.dark-mode #facultyPortal .kpi-value {
            color: #ffffff;
        }
        
        #facultyPortal .kpi-label {
            font-size: 13px;
            color: #718096;
            font-weight: 500;
        }
        
        /* Faculty Data Cards */
        #facultyPortal .data-card {
            background-color: #ffffff;
            border: 1px solid #e8ecf3;
            border-radius: 16px;
            padding: 24px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            position: relative;
            overflow: hidden;
        }
        
        body.dark-mode #facultyPortal .data-card {
            background: #1a1f2e;
            border-color: #2a3041;
        }
        
        #facultyPortal .data-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: #4a90e2;
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s;
        }
        
        #facultyPortal .data-card:hover {
            border-color: rgba(74, 144, 226, 0.3);
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(74, 144, 226, 0.15);
        }
        
        #facultyPortal .data-card:hover::before {
            transform: scaleX(1);
        }
        
        #facultyPortal .data-card-label {
            font-size: 13px;
            color: #718096;
            font-weight: 500;
            text-transform: uppercase;
            margin-bottom: 12px;
        }
        
        #facultyPortal .data-card-value {
            font-size: 32px;
            color: #1a202c;
            font-weight: 800;
            margin-bottom: 6px;
            letter-spacing: -0.5px;
        }
        
        body.dark-mode #facultyPortal .data-card-value {
            color: #ffffff;
        }
        
        body.dark-mode #facultyPortal .data-card-label {
            color: #a0aec0;
        }
        
        /* Additional Dark Mode Styles for Faculty Portal */
        body.dark-mode #facultyPortal .modal-content {
            background-color: #1a1f2e;
            border-color: #2a3041;
        }
        
        body.dark-mode #facultyPortal .modal-header {
            border-bottom-color: #2a3041;
        }
        
        body.dark-mode #facultyPortal .modal-header h3,
        body.dark-mode #facultyPortal .modal-title {
            color: #ffffff;
        }
        
        body.dark-mode #facultyPortal .modal-body {
            color: #e4e6eb;
        }
        
        body.dark-mode #facultyPortal .modal-footer {
            border-top-color: #2a3041;
        }
        
        body.dark-mode #facultyPortal input[type="text"],
        body.dark-mode #facultyPortal input[type="number"],
        body.dark-mode #facultyPortal input[type="date"],
        body.dark-mode #facultyPortal input[type="email"],
        body.dark-mode #facultyPortal input[type="password"],
        body.dark-mode #facultyPortal input[type="file"],
        body.dark-mode #facultyPortal textarea,
        body.dark-mode #facultyPortal select {
            background-color: #1a1f2e !important;
            border-color: #2a3041 !important;
            color: #e4e6eb !important;
        }
        
        body.dark-mode #facultyPortal input:focus,
        body.dark-mode #facultyPortal textarea:focus,
        body.dark-mode #facultyPortal select:focus {
            border-color: #4a90e2 !important;
            background-color: #1a1f2e !important;
        }
        
        body.dark-mode #facultyPortal input:disabled,
        body.dark-mode #facultyPortal textarea:disabled,
        body.dark-mode #facultyPortal select:disabled {
            background-color: #2a3041 !important;
            color: #718096 !important;
        }
        
        body.dark-mode #facultyPortal .form-row label,
        body.dark-mode #facultyPortal .form-group label,
        body.dark-mode #facultyPortal .form-label {
            color: #a0aec0;
        }
        
        body.dark-mode #facultyPortal .form-control {
            background-color: #1a1f2e;
            border-color: #2a3041;
            color: #e4e6eb;
        }
        
        body.dark-mode #facultyPortal .card-meta {
            color: #718096;
        }
        
        body.dark-mode #facultyPortal .kpi-label {
            color: #a0aec0;
        }
        
        body.dark-mode #facultyPortal .kpi-trend {
            color: #718096;
        }
        
        body.dark-mode #facultyPortal .alert {
            background-color: #1a1f2e;
            border-color: #2a3041;
        }
        
        body.dark-mode #facultyPortal .course-card-mini {
            background-color: #1a1f2e;
            border-color: #2a3041;
        }
        
        body.dark-mode #facultyPortal .course-card-mini:hover {
            background-color: #252b3f;
            border-color: #4a90e2;
        }
        
        body.dark-mode #facultyPortal .notification {
            background-color: #1a1f2e;
            border-color: #2a3041;
            color: #e4e6eb;
        }
        
        body.dark-mode #facultyPortal .page-breadcrumb {
            color: #718096;
        }
        
        body.dark-mode #facultyPortal .sidebar-logo {
            color: #718096;
        }
        
        body.dark-mode #facultyPortal .sidebar-title {
            color: #4a90e2;
        }
        
        body.dark-mode #facultyPortal .sidebar-user {
            color: #4a90e2;
        }
        
        /* Dark mode overrides for inline styles */
        body.dark-mode #facultyPortal div[style*="background-color: #ffffff"],
        body.dark-mode #facultyPortal div[style*="background-color:#ffffff"],
        body.dark-mode #facultyPortal div[style*="background: #ffffff"],
        body.dark-mode #facultyPortal div[style*="background:#ffffff"] {
            background-color: #1a1f2e !important;
        }
        
        body.dark-mode #facultyPortal div[style*="background-color: #f8f9fc"],
        body.dark-mode #facultyPortal div[style*="background-color:#f8f9fc"],
        body.dark-mode #facultyPortal div[style*="background: #f8f9fc"],
        body.dark-mode #facultyPortal div[style*="background:#f8f9fc"] {
            background-color: #0a0e27 !important;
        }
        
        body.dark-mode #facultyPortal [style*="color: #1a202c"],
        body.dark-mode #facultyPortal [style*="color:#1a202c"] {
            color: #e4e6eb !important;
        }
        
        body.dark-mode #facultyPortal [style*="color: #4a5568"],
        body.dark-mode #facultyPortal [style*="color:#4a5568"] {
            color: #a0aec0 !important;
        }
        
        body.dark-mode #facultyPortal [style*="color: #718096"],
        body.dark-mode #facultyPortal [style*="color:#718096"] {
            color: #718096 !important;
        }
        
        body.dark-mode #facultyPortal [style*="color: #333"],
        body.dark-mode #facultyPortal [style*="color:#333"] {
            color: #e4e6eb !important;
        }
        
        body.dark-mode #facultyPortal [style*="color: #666"],
        body.dark-mode #facultyPortal [style*="color:#666"] {
            color: #a0aec0 !important;
        }
        
        body.dark-mode #facultyPortal [style*="color: #999"],
        body.dark-mode #facultyPortal [style*="color:#999"] {
            color: #718096 !important;
        }
        
        body.dark-mode #facultyPortal [style*="border-color: #e8ecf3"],
        body.dark-mode #facultyPortal [style*="border-color:#e8ecf3"],
        body.dark-mode #facultyPortal [style*="border: 1px solid #e8ecf3"],
        body.dark-mode #facultyPortal [style*="border:1px solid #e8ecf3"] {
            border-color: #2a3041 !important;
        }
        
        body.dark-mode #facultyPortal .course-card-mini {
            background-color: #1a1f2e !important;
            border-color: #2a3041 !important;
        }
        
        body.dark-mode #facultyPortal .course-card-mini:hover {
            background-color: #252b3f !important;
            border-color: #4a90e2 !important;
        }
        
        body.dark-mode #facultyPortal .course-item {
            background: rgba(74, 144, 226, 0.08) !important;
            border-color: rgba(74, 144, 226, 0.3) !important;
        }
        
        #facultyPortal .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        /* Faculty Modal Styles */
        #facultyPortal .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(4px);
        }
        
        .modal-content {
            background-color: #ffffff;
            border-radius: 16px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        }
        
        body.dark-mode .modal-content {
            background-color: #1a1f2e;
            border: 1px solid #2a3041;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid #e8ecf3;
        }
        
        body.dark-mode .modal-header {
            border-bottom-color: #2a3041;
        }
        
        .modal-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 700;
            color: #1a202c;
        }
        
        body.dark-mode .modal-header h3 {
            color: #ffffff;
        }
        
        .modal-close {
            width: 32px;
            height: 32px;
            background: transparent;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #718096;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            transition: all 0.2s;
        }
        
        .modal-close:hover {
            background-color: rgba(74, 144, 226, 0.1);
            color: #4a90e2;
        }
        
        .modal-body {
            padding: 24px;
        }
        
        .modal-footer {
            padding: 16px 24px;
            border-top: 1px solid #e8ecf3;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        
        body.dark-mode .modal-footer {
            border-top-color: #2a3041;
        }
        
        /* Faculty Badge Styles */
        .badge {
            display: inline-block;
            padding: 4px 10px;
            background-color: rgba(74, 144, 226, 0.15);
            border: 1px solid rgba(74, 144, 226, 0.3);
            color: #4a90e2;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .badge.success {
            background-color: rgba(76, 175, 80, 0.15);
            border-color: rgba(76, 175, 80, 0.3);
            color: #81c784;
        }
        
        .badge.warning {
            background-color: rgba(255, 152, 0, 0.15);
            border-color: rgba(255, 152, 0, 0.3);
            color: #ffb74d;
        }
        
        .badge.danger {
            background-color: rgba(244, 67, 54, 0.15);
            border-color: rgba(244, 67, 54, 0.3);
            color: #ef5350;
        }
        
        /* Faculty Alert Variants */
        .alert-danger {
            background-color: rgba(244, 67, 54, 0.1);
            border-left-color: #ef5350;
            color: #ef5350;
        }
        
        .alert-success {
            background-color: rgba(76, 175, 80, 0.1);
            border-left-color: #81c784;
            color: #81c784;
        }
        
        .alert-info {
            background-color: rgba(74, 144, 226, 0.1);
            border-left-color: #4a90e2;
            color: #4a90e2;
        }
        
        /* Task List Styles */
        .task-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .task-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px;
            background-color: rgba(74, 144, 226, 0.05);
            border-radius: 8px;
            border-left: 3px solid #4a90e2;
            transition: all 0.2s;
        }
        
        body.dark-mode .task-item {
            background-color: rgba(74, 144, 226, 0.08);
        }
        
        .task-item:hover {
            background-color: rgba(74, 144, 226, 0.1);
        }
        
        .task-checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid #4a90e2;
            border-radius: 4px;
            cursor: pointer;
            flex-shrink: 0;
        }
        
        .task-content {
            flex: 1;
        }
        
        .task-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
            color: #1a202c;
        }
        
        body.dark-mode .task-title {
            color: #e4e6eb;
        }
        
        .task-time {
            font-size: 12px;
            color: #718096;
        }
        
        /* Chart Placeholder */
        .chart-placeholder {
            background-color: rgba(74, 144, 226, 0.05);
            border: 1px solid rgba(74, 144, 226, 0.2);
            border-radius: 12px;
            padding: 40px 20px;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #718096;
            font-size: 14px;
            font-weight: 500;
        }
        
        body.dark-mode .chart-placeholder {
            background-color: rgba(74, 144, 226, 0.08);
            border-color: rgba(74, 144, 226, 0.3);
        }
        
        /* Section Separator */
        .section-separator {
            margin: 30px 0;
            padding-top: 30px;
            border-top: 2px solid #e8ecf3;
        }
        
        body.dark-mode .section-separator {
            border-top-color: #2a3041;
        }
        
        /* Form Controls */
        .form-row {
            margin-bottom: 16px;
        }
        
        .form-row label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 6px;
        }
        
        body.dark-mode .form-row label {
            color: #a0aec0;
        }
        
        .form-control {
            width: 100%;
            padding: 10px 14px;
            background-color: #ffffff;
            border: 1px solid #e8ecf3;
            color: #1a202c;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.2s;
        }
        
        body.dark-mode .form-control {
            background-color: #1a1f2e;
            border-color: #2a3041;
            color: #e4e6eb;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #4a90e2;
        }
        
        /* Row Grid */
        .row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .row.full {
            grid-template-columns: 1fr;
        }
        
        /* Scrollable Container */
        .scrollable {
            max-height: 500px;
            overflow-y: auto;
        }
        
        /* Course Item Card */
        .course-card-mini {
            padding: 12px;
            background-color: rgba(74, 144, 226, 0.05);
            border: 1px solid rgba(74, 144, 226, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .course-card-mini:hover {
            background-color: rgba(74, 144, 226, 0.1);
            border-color: #4a90e2;
        }
        
        /* KPI Trend */
        .kpi-trend {
            font-size: 11px;
            color: #718096;
            margin-top: 4px;
        }
        
        /* Button Danger */
        .btn-danger {
            background-color: rgba(244, 67, 54, 0.1);
            border: 1px solid #ef5350;
            color: #ef5350;
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s;
        }
        
        .btn-danger:hover {
            background-color: #ef5350;
            color: #ffffff;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 16px 24px;
            background-color: #1a1f2e;
            border: 1px solid #2a3041;
            border-radius: 12px;
            color: #e4e6eb;
            font-size: 14px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            z-index: 3000;
            animation: slideIn 0.3s ease-out;
        }
        
        .notification.success {
            border-left: 4px solid #81c784;
        }
        
        .notification.error {
            border-left: 4px solid #ef5350;
        }
        
        .notification.info {
            border-left: 4px solid #4a90e2;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Label Required */
        .label-required {
            color: #ef5350;
        }
        
        /* ========== LIGHT MODE STYLES FOR FACULTY PORTAL ========== */
        body.light-mode #facultyPortal {
            background-color: #f5f7fa;
        }
        
        body.light-mode #facultyPortal .sidebar {
            background-color: #ffffff;
            border-right-color: #e8ecf3;
            box-shadow: 2px 0 12px rgba(0, 0, 0, 0.05);
        }
        
        body.light-mode #facultyPortal .sidebar-header {
            border-bottom-color: #e8ecf3;
        }
        
        body.light-mode #facultyPortal .sidebar-title {
            color: #4a90e2;
        }
        
        body.light-mode #facultyPortal .sidebar-logo {
            color: #718096;
        }
        
        body.light-mode #facultyPortal .sidebar-user {
            color: #4a90e2;
        }
        
        body.light-mode #facultyPortal .sidebar-toggle {
            background: #f8f9fc;
            border-color: #e8ecf3;
            color: #4a5568;
        }
        
        body.light-mode #facultyPortal .sidebar-toggle:hover {
            background: #4a90e2;
            border-color: #4a90e2;
            color: #ffffff;
        }
        
        body.light-mode #facultyPortal .menu-section-title {
            color: #718096;
        }
        
        body.light-mode #facultyPortal .menu-item {
            color: #4a5568;
        }
        
        body.light-mode #facultyPortal .menu-item:hover {
            background-color: #f7fafc;
            color: #1a202c;
        }
        
        body.light-mode #facultyPortal .menu-item.active {
            background: rgba(74, 144, 226, 0.1);
            color: #4a90e2;
        }
        
        body.light-mode #facultyPortal .sidebar-footer {
            border-top-color: #e8ecf3;
        }
        
        body.light-mode #facultyPortal .logout-btn {
            border-color: #e8ecf3;
            color: #4a5568;
        }
        
        body.light-mode #facultyPortal .logout-btn:hover {
            background-color: #f7fafc;
            border-color: #4a90e2;
            color: #1a202c;
        }
        
        body.light-mode #facultyPortal .main-content {
            background-color: #f5f7fa;
        }
        
        body.light-mode #facultyPortal .topbar {
            background-color: #ffffff;
            border-bottom-color: #e8ecf3;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
        }
        
        body.light-mode #facultyPortal .page-title {
            color: #1a202c;
        }
        
        body.light-mode #facultyPortal .page-breadcrumb {
            color: #718096;
        }
        
        body.light-mode #facultyPortal .topbar-action {
            background-color: #f8f9fc;
            border-color: #e8ecf3;
            color: #4a5568;
        }
        
        body.light-mode #facultyPortal .topbar-action:hover {
            background-color: rgba(74, 144, 226, 0.1);
            border-color: #4a90e2;
            color: #4a90e2;
        }
        
        body.light-mode #facultyPortal .card {
            background-color: #ffffff;
            border-color: #e8ecf3;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        body.light-mode #facultyPortal .card-header {
            border-bottom-color: #e8ecf3;
        }
        
        body.light-mode #facultyPortal .card-title {
            color: #1a202c;
        }
        
        body.light-mode #facultyPortal .card-meta {
            color: #718096;
        }
        
        body.light-mode #facultyPortal table {
            border-color: #e8ecf3;
        }
        
        body.light-mode #facultyPortal th {
            background-color: #f8f9fc;
            color: #4a5568;
            border-bottom-color: #e8ecf3;
        }
        
        body.light-mode #facultyPortal td {
            border-bottom-color: #e8ecf3;
            color: #1a202c;
        }
        
        body.light-mode #facultyPortal tr:hover {
            background-color: #f8f9fc;
        }
        
        body.light-mode #facultyPortal .btn {
            background-color: #f8f9fc;
            border-color: #4a90e2;
            color: #4a90e2;
        }
        
        body.light-mode #facultyPortal .btn:hover {
            background-color: rgba(74, 144, 226, 0.1);
        }
        
        body.light-mode #facultyPortal .btn-primary {
            background-color: #4a90e2;
            border-color: #4a90e2;
            color: #ffffff;
        }
        
        body.light-mode #facultyPortal .btn-primary:hover {
            background-color: #357abd;
            border-color: #357abd;
        }
        
        body.light-mode #facultyPortal .btn-secondary {
            background-color: transparent;
            border-color: #e8ecf3;
            color: #4a5568;
        }
        
        body.light-mode #facultyPortal .btn-secondary:hover {
            background-color: #f8f9fc;
            border-color: #4a90e2;
            color: #4a90e2;
        }
        
        body.light-mode #facultyPortal .filter-label {
            color: #4a5568;
        }
        
        body.light-mode #facultyPortal .filter-input,
        body.light-mode #facultyPortal .filter-select {
            background-color: #f8f9fc;
            border-color: #e8ecf3;
            color: #1a202c;
        }
        
        body.light-mode #facultyPortal .filter-input:focus,
        body.light-mode #facultyPortal .filter-select:focus {
            background-color: #ffffff;
            border-color: #4a90e2;
        }
        
        body.light-mode #facultyPortal .data-card {
            background-color: #f8f9fc;
            border-color: #e8ecf3;
        }
        
        body.light-mode #facultyPortal .data-card-label {
            color: #4a5568;
        }
        
        body.light-mode #facultyPortal .data-card-value {
            color: #4a90e2;
        }
        
        body.light-mode #facultyPortal .alert {
            background-color: #f8f9fc;
            border-color: #e8ecf3;
        }
        
        body.light-mode #facultyPortal .alert-info {
            background-color: rgba(74, 144, 226, 0.1);
            border-color: rgba(74, 144, 226, 0.2);
            color: #357abd;
        }
        
        body.light-mode #facultyPortal .alert-warning {
            background-color: rgba(255, 152, 0, 0.1);
            border-color: rgba(255, 152, 0, 0.2);
            color: #f57c00;
        }
        
        body.light-mode #facultyPortal .chart-placeholder {
            background-color: #f8f9fc;
            border-color: #e8ecf3;
            color: #718096;
        }
        
        body.light-mode #facultyPortal .section-separator {
            border-top-color: #e8ecf3;
        }
        
        body.light-mode #facultyPortal .task-item {
            background-color: #f8f9fc;
            border-color: #e8ecf3;
        }
        
        body.light-mode #facultyPortal .task-item:hover {
            background-color: #f0f4f8;
        }
        
        body.light-mode #facultyPortal .task-title {
            color: #1a202c;
        }
        
        body.light-mode #facultyPortal .task-time {
            color: #718096;
        }
        
        body.light-mode .modal-overlay {
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        body.light-mode .modal-content {
            background-color: #ffffff;
            border-color: #e8ecf3;
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.15);
        }
        
        body.light-mode .modal-header {
            border-bottom-color: #e8ecf3;
            color: #1a202c;
        }
        
        body.light-mode .modal-close {
            background: #f8f9fc;
            color: #4a5568;
        }
        
        body.light-mode .modal-close:hover {
            background: rgba(74, 144, 226, 0.1);
            color: #4a90e2;
        }
        
        body.light-mode .modal-body {
            color: #4a5568;
        }
        
        body.light-mode .modal-footer {
            border-top-color: #e8ecf3;
        }
        
        body.light-mode .form-group label,
        body.light-mode .form-label {
            color: #4a5568;
        }
        
        body.light-mode .form-input,
        body.light-mode .form-select,
        body.light-mode .form-textarea {
            background-color: #f8f9fc;
            border-color: #e8ecf3;
            color: #1a202c;
        }
        
        body.light-mode .form-input:focus,
        body.light-mode .form-select:focus,
        body.light-mode .form-textarea:focus {
            background-color: #ffffff;
            border-color: #4a90e2;
        }
        
        /* Additional Faculty Portal Light Mode Styles */
        body.light-mode #facultyPortal .btn-danger {
            background-color: rgba(244, 67, 54, 0.1);
            border-color: rgba(244, 67, 54, 0.3);
            color: #ef5350;
        }

        body.light-mode #facultyPortal .btn-danger:hover {
            background-color: rgba(244, 67, 54, 0.2);
            border-color: #ef5350;
        }

        body.light-mode #facultyPortal .table-container {
            background-color: #ffffff;
        }

        body.light-mode #facultyPortal .kpi-value {
            color: #4a90e2;
        }

        body.light-mode #facultyPortal .kpi-label {
            color: #4a5568;
        }

        body.light-mode #facultyPortal .kpi-trend {
            color: #718096;
        }

        body.light-mode #facultyPortal .alert-danger {
            background-color: rgba(244, 67, 54, 0.1);
            border-color: rgba(244, 67, 54, 0.2);
            color: #d32f2f;
        }

        body.light-mode #facultyPortal input[type="text"],
        body.light-mode #facultyPortal input[type="number"],
        body.light-mode #facultyPortal input[type="date"],
        body.light-mode #facultyPortal input[type="file"],
        body.light-mode #facultyPortal textarea,
        body.light-mode #facultyPortal select {
            background-color: #f8f9fc !important;
            border-color: #e8ecf3 !important;
            color: #1a202c !important;
        }

        body.light-mode #facultyPortal input[type="text"]:focus,
        body.light-mode #facultyPortal input[type="number"]:focus,
        body.light-mode #facultyPortal input[type="date"]:focus,
        body.light-mode #facultyPortal textarea:focus,
        body.light-mode #facultyPortal select:focus {
            background-color: #ffffff !important;
            border-color: #4a90e2 !important;
        }

        body.light-mode #facultyPortal input:disabled,
        body.light-mode #facultyPortal textarea:disabled {
            background-color: #e8ecf3 !important;
            color: #718096 !important;
        }

        body.light-mode #facultyPortal .course-item,
        body.light-mode #facultyPortal .message-item {
            background-color: #f8f9fc !important;
            border-color: #e8ecf3 !important;
            color: #1a202c !important;
        }

        body.light-mode #facultyPortal [style*="background-color: #141414"],
        body.light-mode #facultyPortal [style*="background-color: #1a1a1a"],
        body.light-mode #facultyPortal [style*="background-color:#141414"],
        body.light-mode #facultyPortal [style*="background-color:#1a1a1a"] {
            background-color: #f8f9fc !important;
            border-color: #e8ecf3 !important;
            color: #1a202c !important;
        }

        body.light-mode #facultyPortal [style*="color: #666"],
        body.light-mode #facultyPortal [style*="color:#666"],
        body.light-mode #facultyPortal [style*="color: #999"],
        body.light-mode #facultyPortal [style*="color:#999"] {
            color: #718096 !important;
        }

        body.light-mode #facultyPortal [style*="color: #e0e0e0"],
        body.light-mode #facultyPortal [style*="color:#e0e0e0"],
        body.light-mode #facultyPortal [style*="color: #e4e6eb"],
        body.light-mode #facultyPortal [style*="color:#e4e6eb"] {
            color: #1a202c !important;
        }

        body.light-mode #facultyPortal [style*="border: 1px solid #2a2a2a"],
        body.light-mode #facultyPortal [style*="border:1px solid #2a2a2a"],
        body.light-mode #facultyPortal [style*="border: 2px dashed #2a2a2a"],
        body.light-mode #facultyPortal [style*="border:2px dashed #2a2a2a"] {
            border-color: #e8ecf3 !important;
        }

        body.light-mode #facultyPortal [style*="border-bottom: 1px solid #1a1a1a"],
        body.light-mode #facultyPortal [style*="border-bottom:1px solid #1a1a1a"],
        body.light-mode #facultyPortal [style*="border-bottom: 1px solid #2a2a2a"],
        body.light-mode #facultyPortal [style*="border-bottom:1px solid #2a2a2a"] {
            border-bottom-color: #e8ecf3 !important;
        }

        body.light-mode #facultyPortal .course-card-mini {
            background-color: #ffffff;
            border-color: #e8ecf3;
        }

        body.light-mode #facultyPortal .course-card-mini:hover {
            background-color: #f8f9fc;
            border-color: #4a90e2;
        }

        body.light-mode #facultyPortal div[style*="background-color: #141414"],
        body.light-mode #facultyPortal div[style*="background-color:#141414"],
        body.light-mode #facultyPortal div[style*="background-color: #1a1a1a"],
        body.light-mode #facultyPortal div[style*="background-color:#1a1a1a"],
        body.light-mode #facultyPortal td[style*="background-color: #141414"],
        body.light-mode #facultyPortal td[style*="background-color:#141414"] {
            background-color: #ffffff !important;
        }

        body.light-mode #facultyPortal input[style*="background-color: #141414"],
        body.light-mode #facultyPortal input[style*="background-color:#141414"],
        body.light-mode #facultyPortal select[style*="background-color: #141414"],
        body.light-mode #facultyPortal select[style*="background-color:#141414"],
        body.light-mode #facultyPortal textarea[style*="background-color: #141414"],
        body.light-mode #facultyPortal textarea[style*="background-color:#141414"] {
            background-color: #f8f9fc !important;
            border-color: #e8ecf3 !important;
            color: #1a202c !important;
        }

        /* Portal Link Styling for Faculty */
        body.light-mode #facultyPortal a.topbar-action {
            background: rgba(74, 144, 226, 0.15) !important;
            color: #4a90e2 !important;
            border: 1px solid rgba(74, 144, 226, 0.3) !important;
        }

        body.light-mode #facultyPortal a.topbar-action:hover {
            background: rgba(74, 144, 226, 0.25) !important;
            border-color: #4a90e2 !important;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(74, 144, 226, 0.2);
        }

        /* Modal specific styles for light mode */
        body.light-mode #facultyPortal .modal-overlay {
            background-color: rgba(0, 0, 0, 0.5);
        }

        body.light-mode #facultyPortal .modal-content {
            background-color: #ffffff;
            border-color: #e8ecf3;
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.15);
        }

        body.light-mode #facultyPortal .modal-header {
            border-bottom-color: #e8ecf3;
        }

        body.light-mode #facultyPortal .modal-title {
            color: #1a202c;
        }

        body.light-mode #facultyPortal .modal-close {
            background: #f8f9fc;
            color: #4a5568;
        }

        body.light-mode #facultyPortal .modal-close:hover {
            background: rgba(74, 144, 226, 0.1);
            color: #4a90e2;
        }

        /* Signature Pad Styles */
        body.light-mode #facultyPortal #signaturePad {
            background: white;
            border-color: #4caf50;
        }
        
    </style>
</head>
<body>

<!-- Role Selection Screen -->
<div id="roleSelectionScreen" class="pre-login-container">
    <div class="role-selection-screen">
        <div class="role-header">
            <h1>KALNET College ERP</h1>
            <p>Select your role to access institutional management portal</p>
        </div>
        <div class="role-grid">
            <div class="role-card" onclick="selectRole('student')">
                <div class="role-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3L1 9l11 6 11-6-11-6z"/><path d="M5 13l7 4 7-4M5 13v6l7 4 7-4v-6"/></svg></div>
                <h3>Student</h3>
                <p>Access academic records, attendance, fee payments, and course registration</p>
            </div>
            <div class="role-card" onclick="selectRole('faculty')">
                <div class="role-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="7" r="4"/><path d="M5.5 21v-2a7.5 7.5 0 0 1 15 0v2"/><path d="M12 14v-3"/></svg></div>
                <h3>Faculty</h3>
                <p>Manage courses, attendance marking, grade submission, and student records</p>
            </div>
            <div class="role-card" onclick="selectRole('admin')">
                <div class="role-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/></svg></div>
                <h3>Admin</h3>
                <p>Full system access for user management, configuration, and institutional control</p>
            </div>
            <div class="role-card" onclick="selectRole('operations')">
                <div class="role-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg></div>
                <h3>Operations / CMD</h3>
                <p>Asset management, maintenance tracking, facility booking, and operational oversight</p>
            </div>
            <div class="role-card" onclick="selectRole('management')">
                <div class="role-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg></div>
                <h3>Management</h3>
                <p>Executive dashboards, financial overview, strategic reports, and institutional analytics</p>
            </div>
        </div>
    </div>
</div>

<!-- Login Screen -->
<div id="loginScreen" class="pre-login-container hidden">
    <div class="login-card">
        <div class="login-header">
            <h2>Sign In</h2>
            <p>Enter your credentials to access the system</p>
        </div>
        <form onsubmit="handleLogin(event)">
            <div class="form-group">
                <label>Institution Code</label>
                <input type="text" id="institutionCode" value="INST-2024-001" required>
            </div>
            <div class="form-group">
                <label>User ID / Email</label>
                <input type="text" id="userId" value="admin@college.edu" required>
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="password" value="" required>
            </div>
            <div class="form-group">
                <label>Role</label>
                <select id="loginRole">
                    <option value="student">Student</option>
                    <option value="faculty">Faculty</option>
                    <option value="admin" selected>Admin</option>
                    <option value="operations">Operations / CMD</option>
                    <option value="management">Management</option>
                </select>
            </div>
            <button type="submit" class="btn-primary">Sign In</button>
        </form>
        <div class="login-footer">
            <a href="javascript:void(0)">Forgot Password?</a>
            <a href="javascript:void(0)">Need Help?</a>
        </div>
    </div>
</div>

<!-- Main Application Layout -->
<div id="mainApp" class="main-layout hidden">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>College ERP</h2>
            <button class="sidebar-toggle" onclick="toggleSidebar()" title="Toggle Sidebar">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                    <line x1="3" y1="12" x2="21" y2="12"/>
                    <polyline points="15 6 21 12 15 18"/>
                </svg>
            </button>
        </div>
        <div class="sidebar-nav">
            <div class="nav-section">
                <div class="nav-section-title">Core</div>
                <div class="nav-item active" data-screen="overview">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg></span>
                    <span>Overview Dashboard</span>
                </div>
                <div class="nav-item" data-screen="users">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg></span>
                    <span>Users</span>
                </div>
                <div class="nav-item" data-screen="faculty">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/><path d="M14.48 17.34c-.4-.22-.98-.33-1.48-.33-.51 0-1.11.12-1.5.34l.01.66h2.94l.03-.67z" opacity=".3"/></svg></span>
                    <span>Faculty</span>
                </div>
                <div class="nav-item" data-screen="departments">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"/></svg></span>
                    <span>Departments</span>
                </div>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Academics</div>
                <div class="nav-item" data-screen="students">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"/></svg></span>
                    <span>Student Master</span>
                </div>
                <div class="nav-item" data-screen="courses">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"/></svg></span>
                    <span>Course & Curriculum</span>
                </div>
                <div class="nav-item" data-screen="registration">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg></span>
                    <span>Registration Control</span>
                </div>
                <div class="nav-item" data-screen="attendance">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10zM5 7V5h14v2H5zm11.56 7.38l-4.03 4.03-2.37-2.37-1.41 1.41 3.78 3.78 5.44-5.44z"/></svg></span>
                    <span>Attendance Overview</span>
                </div>
                <div class="nav-item" data-screen="timetable">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg></span>
                    <span>Timetable</span>
                </div>
                <div class="nav-item" data-screen="exams">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg></span>
                    <span>Exams & Results</span>
                </div>
                <div class="nav-item" data-screen="results">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/></svg></span>
                    <span>Results Analysis</span>
                </div>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Operations</div>
                <div class="nav-item" data-screen="assets">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2zm-5 12H9v-2h6v2zm5-7H4V4l16-.02V7z"/></svg></span>
                    <span>Asset Master</span>
                </div>
                <div class="nav-item" data-screen="tickets">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/></svg></span>
                    <span>Maintenance Tickets</span>
                </div>
                <div class="nav-item" data-screen="hostel">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 13c1.66 0 3-1.34 3-3S8.66 7 7 7s-3 1.34-3 3 1.34 3 3 3zm12-6h-8v7H3V5H1v15h2v-3h18v3h2v-9c0-2.21-1.79-4-4-4z"/></svg></span>
                    <span>Hostel Management</span>
                </div>
                <div class="nav-item" data-screen="facility">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M14 6v15H3v-2h2V3h9v1h5v15h2v2h-4V6h-3zm-4 5v2h2v-2h-2z"/></svg></span>
                    <span>Facility / Booking</span>
                </div>
                <div class="nav-item" data-screen="library">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 11.55C9.64 9.35 6.48 8 3 8v11c3.48 0 6.64 1.35 9 3.55 2.36-2.19 5.52-3.55 9-3.55V8c-3.48 0-6.64 1.35-9 3.55zM12 8c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3z"/></svg></span>
                    <span>Library Management</span>
                </div>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Finance</div>
                <div class="nav-item" data-screen="feeStructure">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg></span>
                    <span>Fee Structure</span>
                </div>
                <div class="nav-item" data-screen="feeLedger">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M4 10h3v7H4zm6.5 0h3v7h-3zM2 19h20v3H2zm15-9h3v7h-3zm-5-9L2 6v2h20V6z"/></svg></span>
                    <span>Student Fee Ledger</span>
                </div>
                <div class="nav-item" data-screen="payments">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/></svg></span>
                    <span>Payments & Waivers</span>
                </div>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Communication</div>
                <div class="nav-item" data-screen="notices">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M18 11v2h4v-2h-4zm-2 6.61c.96.71 2.21 1.65 3.2 2.39.4-.53.8-1.07 1.2-1.6-.99-.74-2.24-1.68-3.2-2.4-.4.54-.8 1.08-1.2 1.61zM20.4 5.6c-.4-.53-.8-1.07-1.2-1.6-.99.74-2.24 1.68-3.2 2.4.4.53.8 1.07 1.2 1.6.96-.72 2.21-1.65 3.2-2.4zM4 9c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h1v4h2v-4h1l5 3V6L8 9H4zm11.5 3c0-1.33-.58-2.53-1.5-3.35v6.69c.92-.81 1.5-2.01 1.5-3.34z"/></svg></span>
                    <span>Notices & Announcements</span>
                </div>
                <div class="nav-item" data-screen="documentSignatures">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zm-9.18-6.95L7.4 14.46 10.94 18l5.66-5.66-1.41-1.41-4.24 4.24-2.13-2.12z"/></svg></span>
                    <span>Document Signatures</span>
                </div>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">System</div>
                <div class="nav-item" data-screen="auditLogs">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/></svg></span>
                    <span>Audit Logs</span>
                </div>
                <div class="nav-item" data-screen="systemHealth">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h3l-1 1v2h12v-2l-1-1h3c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 13H4V5h16v11zm-9-1h2v-3h3V9h-3V6h-2v3H8v3h3z"/></svg></span>
                    <span>System Health</span>
                </div>
                <div class="nav-item" data-screen="configurations">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"/></svg></span>
                    <span>Configurations</span>
                </div>
                <div class="nav-item" data-screen="profile">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/></svg></span>
                    <span>My Profile</span>
                </div>
                <div class="nav-item" data-screen="settings">
                    <span class="nav-item-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg></span>
                    <span>Settings</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <!-- Topbar -->
        <div class="topbar">
            <div class="topbar-left">
                <div class="page-title" id="pageTitle">Overview Dashboard</div>
                <div class="page-breadcrumb" id="pageBreadcrumb">Home / Overview</div>
            </div>
            <div class="topbar-right">
                <div class="topbar-action" onclick="toggleTheme()" title="Toggle Dark Mode">
                    <svg id="adminDarkModeIcon" viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                        <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/>
                    </svg>
                </div>
                <div class="topbar-action" onclick="showAdminNotifications()" title="Notifications">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                        <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
                    </svg>
                    <span class="notification-badge">3</span>
                </div>
                <div class="topbar-action" onclick="showAdminHelp()" title="Help">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                        <path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/>
                    </svg>
                </div>
                <div class="user-menu" onclick="navigateToScreen('profile')" title="Profile" style="cursor: pointer; display: flex; align-items: center; gap: 10px; padding: 6px 12px; background: rgba(74, 144, 226, 0.1); border-radius: 8px;">
                    <div class="user-avatar" style="width: 32px; height: 32px; border-radius: 50%; background: linear-gradient(135deg, #4a90e2, #357abd); display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 600; color: white;">AD</div>
                    <div class="user-info">
                        <div class="user-name" style="font-size: 13px; font-weight: 600;">Admin User</div>
                        <div class="user-role" id="userRoleDisplay" style="font-size: 11px; color: #718096;">Administrator</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Content Area -->
        <div class="content-area" id="contentArea">
            <!-- Content will be dynamically loaded here -->
        </div>
    </div>
</div>

<script>
    // Global State
    let currentScreen = 'overview';
    let selectedRole = '';
    let currentUser = null;
    let navigationHistory = ['overview']; // Navigation history stack for back button

    // Notification System
    function showNotification(message, type = 'success') {
        const notification = document.createElement('div');
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${type === 'success' ? '#27ae60' : type === 'error' ? '#e74c3c' : '#4a90e2'};
            color: white;
            padding: 16px 24px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 10000;
            font-weight: 600;
            animation: slideInRight 0.3s ease;
        `;
        notification.textContent = message;
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.style.animation = 'slideOutRight 0.3s ease';
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    }
    
    // Export Functions
    function exportData(type) {
        showNotification(`Exporting ${type}... Download will start shortly.`, 'info');
        setTimeout(() => {
            showNotification(`${type} exported successfully!`, 'success');
        }, 1500);
    }

    // Initialize app
    function initApp() {
        // Check for saved theme
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-mode');
            document.getElementById('themeIcon').textContent = '';
        }
        
        // Add navigation click handlers
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                const screen = this.getAttribute('data-screen');
                navigateToScreen(screen);
            });
        });
        
        // Load overview screen
        loadScreen('overview');
    }

    // Role Selection
    function selectRole(role) {
        selectedRole = role;
        
        document.getElementById('roleSelectionScreen').classList.add('hidden');
        document.getElementById('loginScreen').classList.remove('hidden');
        
        // Set role in login form
        document.getElementById('loginRole').value = role;
    }

    // Handle Login
    function handleLogin(event) {
        event.preventDefault();
        
        const role = document.getElementById('loginRole').value;
        const userId = document.getElementById('userId').value;
        
        // Handle student users - redirect to student portal
        if (role === 'student') {
            window.location.href = 'student.html';
            return;
        }
        
        // Handle faculty users
        if (role === 'faculty') {
            currentUser = {
                id: userId,
                role: role,
                name: 'Dr. Rajesh Kumar'
            };
            
            // Hide login and admin app, show faculty portal
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.add('hidden');
            
            // Initialize faculty portal
            if (typeof initFacultyApp === 'function') {
                initFacultyApp();
            }
            return;
        }
        
        // Mock authentication
        currentUser = {
            id: userId,
            role: role,
            name: 'Admin User'
        };
        
        // Update role display
        const roleMap = {
            'student': 'Student',
            'faculty': 'Faculty',
            'admin': 'Administrator',
            'operations': 'Operations Manager',
            'management': 'Management'
        };
        document.getElementById('userRoleDisplay').textContent = roleMap[role];
        
        // Hide login, show main app
        document.getElementById('loginScreen').classList.add('hidden');
        document.getElementById('mainApp').classList.remove('hidden');
        
        initApp();
    }

    // Theme Toggle
    function toggleTheme() {
        document.body.classList.toggle('dark-mode');
        const isDark = document.body.classList.contains('dark-mode');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        updateAdminDarkModeIcon(isDark);
    }

    function updateAdminDarkModeIcon(isDark) {
        const icon = document.getElementById('adminDarkModeIcon');
        if (icon) {
            if (isDark) {
                // Moon icon for dark mode
                icon.innerHTML = '<path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/>';
            } else {
                // Sun icon for light mode
                icon.innerHTML = '<path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/>';
            }
        }
    }

    function showAdminNotifications() {
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
                <div class="modal-content" style="max-width: 450px;">
                    <div class="modal-header">
                        <h3>Notifications</h3>
                        <button class="modal-close" onclick="closeModal()"></button>
                    </div>
                    <div class="modal-body" style="max-height: 400px; overflow-y: auto;">
                        <div style="padding: 12px; background: rgba(231, 76, 60, 0.1); border-radius: 8px; margin-bottom: 12px;">
                            <div style="font-weight: 600; margin-bottom: 4px;"> Critical Alert</div>
                            <div style="font-size: 13px; color: #666;">Server maintenance scheduled for tonight 11 PM - 2 AM</div>
                            <div style="font-size: 11px; color: #999; margin-top: 4px;">1 hour ago</div>
                        </div>
                        <div style="padding: 12px; background: rgba(255, 152, 0, 0.1); border-radius: 8px; margin-bottom: 12px;">
                            <div style="font-weight: 600; margin-bottom: 4px;"> Fee Collection Reminder</div>
                            <div style="font-size: 13px; color: #666;">Fee submission deadline approaching - 45 students pending</div>
                            <div style="font-size: 11px; color: #999; margin-top: 4px;">3 hours ago</div>
                        </div>
                        <div style="padding: 12px; background: rgba(74, 144, 226, 0.1); border-radius: 8px; margin-bottom: 12px;">
                            <div style="font-weight: 600; margin-bottom: 4px;"> New Registration Request</div>
                            <div style="font-size: 13px; color: #666;">12 new student registrations awaiting approval</div>
                            <div style="font-size: 11px; color: #999; margin-top: 4px;">Yesterday</div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal()">Close</button>
                        <button class="btn btn-primary" onclick="closeModal(); showNotification('All notifications marked as read', 'success')">Mark All Read</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function showAdminHelp() {
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
                <div class="modal-content" style="max-width: 550px;">
                    <div class="modal-header">
                        <h3>Help & Support</h3>
                        <button class="modal-close" onclick="closeModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div style="margin-bottom: 20px;">
                            <div style="font-weight: 600; margin-bottom: 8px; color: #4a90e2;"> Admin Quick Guide</div>
                            <div style="font-size: 13px; color: #666; line-height: 1.8;">
                                <p> <strong>Overview:</strong> View system-wide statistics and quick actions</p>
                                <p> <strong>Users:</strong> Manage faculty, staff, and student accounts</p>
                                <p> <strong>Departments:</strong> Configure department settings and hierarchy</p>
                                <p> <strong>Finance:</strong> Manage fees, payments, and financial reports</p>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <div style="font-weight: 600; margin-bottom: 8px; color: #4a90e2;"> Keyboard Shortcuts</div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 13px;">
                                <div><code style="background: #f0f0f0; padding: 2px 6px; border-radius: 4px;">O</code> Overview</div>
                                <div><code style="background: #f0f0f0; padding: 2px 6px; border-radius: 4px;">U</code> Users</div>
                                <div><code style="background: #f0f0f0; padding: 2px 6px; border-radius: 4px;">S</code> Students</div>
                                <div><code style="background: #f0f0f0; padding: 2px 6px; border-radius: 4px;">F</code> Finance</div>
                            </div>
                        </div>
                        
                        <div style="padding: 16px; background: rgba(74, 144, 226, 0.05); border-radius: 8px;">
                            <div style="font-weight: 600; margin-bottom: 8px;"> Contact Support</div>
                            <div style="font-size: 13px; color: #666;">
                                <p>Email: admin-support@kalnetcollege.edu</p>
                                <p>Phone: +91 1234-567891</p>
                                <p>Available: 24/7 Technical Support</p>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal()">Close</button>
                        <button class="btn btn-primary" onclick="closeModal(); showNotification('Opening documentation...', 'info')">View Full Documentation</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    // Navigation
    function navigateToScreen(screen, addToHistory = true) {
        // Add to history if not going back and not already on this screen
        if (addToHistory && currentScreen !== screen) {
            navigationHistory.push(screen);
            // Limit history size to prevent memory issues
            if (navigationHistory.length > 50) {
                navigationHistory.shift();
            }
        }
        
        currentScreen = screen;
        
        // Update active nav item
        document.querySelectorAll('.nav-item').forEach(item => {
            item.classList.remove('active');
            if (item.getAttribute('data-screen') === screen) {
                item.classList.add('active');
            }
        });
        
        // Load screen content
        loadScreen(screen);
    }
    
    // Go back to previous screen
    function goBack() {
        if (navigationHistory.length > 1) {
            // Remove current screen from history
            navigationHistory.pop();
            // Get previous screen
            const previousScreen = navigationHistory[navigationHistory.length - 1];
            // Navigate without adding to history
            navigateToScreen(previousScreen, false);
        } else {
            // Default to overview if no history
            navigateToScreen('overview', false);
        }
    }

    // Load Screen Content
    function loadScreen(screen) {
        const contentArea = document.getElementById('contentArea');
        const titleMap = {
            'overview': { title: 'Overview Dashboard', breadcrumb: 'Home / Overview' },
            'users': { title: 'User Management', breadcrumb: 'Admin / Users' },
            'departments': { title: 'Department Management', breadcrumb: 'Academic / Departments' },
            'students': { title: 'Student Master', breadcrumb: 'Academic / Students' },
            'courses': { title: 'Course & Curriculum', breadcrumb: 'Academic / Courses' },
            'registration': { title: 'Registration Control', breadcrumb: 'Academic / Registration' },
            'attendance': { title: 'Attendance Overview', breadcrumb: 'Academic / Attendance' },
            'exams': { title: 'Exams & Results', breadcrumb: 'Academic / Exams' },
            'assets': { title: 'Asset Master', breadcrumb: 'Operations / Assets' },
            'tickets': { title: 'Maintenance Tickets', breadcrumb: 'Operations / Tickets' },
            'hostel': { title: 'Hostel Management', breadcrumb: 'Operations / Hostel' },
            'facility': { title: 'Facility Booking', breadcrumb: 'Operations / Facility' },
            'feeStructure': { title: 'Fee Structure', breadcrumb: 'Finance / Fee Structure' },
            'feeLedger': { title: 'Student Fee Ledger', breadcrumb: 'Finance / Ledger' },
            'payments': { title: 'Payments & Waivers', breadcrumb: 'Finance / Payments' },
            'notices': { title: 'Notices & Announcements', breadcrumb: 'Communications / Notices' },
            'documentSignatures': { title: 'Document Signatures', breadcrumb: 'Communications / Document Signatures' },
            'auditLogs': { title: 'Audit Logs', breadcrumb: 'System / Audit Logs' },
            'systemHealth': { title: 'System Health', breadcrumb: 'System / Health' },
            'configurations': { title: 'System Configurations', breadcrumb: 'System / Configurations' },
            'timetable': { title: 'Timetable Management', breadcrumb: 'Academic / Timetable' },
            'results': { title: 'Results Management', breadcrumb: 'Academic / Results' },
            'library': { title: 'Library Management', breadcrumb: 'Operations / Library' },
            'profile': { title: 'My Profile', breadcrumb: 'Account / Profile' },
            'faculty': { title: 'Faculty Management', breadcrumb: 'Admin / Faculty' }
        };
        
        const pageInfo = titleMap[screen] || { title: 'Dashboard', breadcrumb: 'Home / Dashboard' };
        document.getElementById('pageTitle').textContent = pageInfo.title;
        document.getElementById('pageBreadcrumb').textContent = pageInfo.breadcrumb;
        
        // Load screen-specific content
        switch(screen) {
            case 'overview':
                contentArea.innerHTML = getOverviewScreen();
                attachOverviewHandlers();
                break;
            case 'users':
                contentArea.innerHTML = getUsersScreen();
                break;
            case 'faculty':
                contentArea.innerHTML = getFacultyScreen();
                break;
            case 'departments':
                contentArea.innerHTML = getDepartmentsScreen();
                break;
            case 'students':
                contentArea.innerHTML = getStudentsScreen();
                break;
            case 'courses':
                contentArea.innerHTML = getCoursesScreen();
                break;
            case 'registration':
                contentArea.innerHTML = getRegistrationScreen();
                break;
            case 'attendance':
                contentArea.innerHTML = getAttendanceScreen();
                break;
            case 'timetable':
                contentArea.innerHTML = getTimetableScreen();
                break;
            case 'exams':
                contentArea.innerHTML = getExamsScreen();
                break;
            case 'results':
                contentArea.innerHTML = getResultsScreen();
                break;
            case 'assets':
                contentArea.innerHTML = getAssetsScreen();
                break;
            case 'tickets':
                contentArea.innerHTML = getTicketsScreen();
                break;
            case 'hostel':
                contentArea.innerHTML = getHostelScreen();
                break;
            case 'facility':
                contentArea.innerHTML = getFacilityScreen();
                break;
            case 'library':
                contentArea.innerHTML = getLibraryScreen();
                break;
            case 'feeStructure':
                contentArea.innerHTML = getFeeStructureScreen();
                break;
            case 'feeLedger':
                contentArea.innerHTML = getFeeLedgerScreen();
                break;
            case 'payments':
                contentArea.innerHTML = getPaymentsScreen();
                break;
            case 'notices':
                contentArea.innerHTML = getNoticesScreen();
                break;
            case 'documentSignatures':
                contentArea.innerHTML = getAdminDocumentSignaturesScreen();
                break;
            case 'auditLogs':
                contentArea.innerHTML = getAuditLogsScreen();
                break;
            case 'systemHealth':
                contentArea.innerHTML = getSystemHealthScreen();
                break;
            case 'configurations':
                contentArea.innerHTML = getConfigurationsScreen();
                break;
            case 'profile':
                contentArea.innerHTML = getProfileScreen();
                break;
            case 'settings':
                contentArea.innerHTML = getSettingsScreen();
                break;
            default:
                contentArea.innerHTML = getOverviewScreen();
        }
    }

    // Overview Screen
    function getOverviewScreen() {
        return `
            <div class="kpi-grid">
                <div class="kpi-card" onclick="navigateToScreen('students')">
                    <div class="kpi-header">
                        <span class="kpi-label">Total Students</span>
                        <div class="kpi-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3L1 9l11 6 11-6-11-6z"/><path d="M5 13l7 4 7-4M5 13v6l7 4 7-4v-6"/></svg></div>
                    </div>
                    <div class="kpi-value">2,547</div>
                    <div class="kpi-change positive"> 12.5% from last year</div>
                </div>
                
                <div class="kpi-card" onclick="navigateToScreen('users')">
                    <div class="kpi-header">
                        <span class="kpi-label">Faculty Members</span>
                        <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="7" r="4"/><path d="M5.5 21v-2a7.5 7.5 0 0 1 15 0v2"/></svg></div>
                    </div>
                    <div class="kpi-value">187</div>
                    <div class="kpi-change positive"> 5 new this month</div>
                </div>
                
                <div class="kpi-card" onclick="navigateToScreen('tickets')">
                    <div class="kpi-header">
                        <span class="kpi-label">Open Tickets</span>
                        <div class="kpi-icon red"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg></div>
                    </div>
                    <div class="kpi-value">42</div>
                    <div class="kpi-change negative"> 8 pending</div>
                </div>
                
                <div class="kpi-card" onclick="navigateToScreen('feeLedger')">
                    <div class="kpi-header">
                        <span class="kpi-label">Fee Collection</span>
                        <div class="kpi-icon orange"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg></div>
                    </div>
                    <div class="kpi-value"> 3.2 Cr</div>
                    <div class="kpi-change positive"> 89.5% collected</div>
                </div>
                
                <div class="kpi-card" onclick="navigateToScreen('attendance')">
                    <div class="kpi-header">
                        <span class="kpi-label">Avg Attendance</span>
                        <div class="kpi-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></div>
                    </div>
                    <div class="kpi-value">87.3%</div>
                    <div class="kpi-change positive"> 2.1% this week</div>
                </div>
                
                <div class="kpi-card" onclick="navigateToScreen('assets')">
                    <div class="kpi-header">
                        <span class="kpi-label">Total Assets</span>
                        <div class="kpi-icon purple"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg></div>
                    </div>
                    <div class="kpi-value">1,842</div>
                    <div class="kpi-change neutral">12 under maintenance</div>
                </div>
                
                <div class="kpi-card" onclick="navigateToScreen('hostel')">
                    <div class="kpi-header">
                        <span class="kpi-label">Hostel Occupancy</span>
                        <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></div>
                    </div>
                    <div class="kpi-value">92%</div>
                    <div class="kpi-change positive">845 / 918 beds</div>
                </div>
                
                <div class="kpi-card" onclick="navigateToScreen('exams')">
                    <div class="kpi-header">
                        <span class="kpi-label">Upcoming Exams</span>
                        <div class="kpi-icon orange"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg></div>
                    </div>
                    <div class="kpi-value">24</div>
                    <div class="kpi-change neutral">Next: Dec 15, 2024</div>
                </div>
            </div>
            
            <div class="table-container">
                <div class="table-header">
                    <div class="table-title">Recent Activity</div>
                    <div class="table-filters">
                        <select class="filter-select">
                            <option>All Activities</option>
                            <option>Academic</option>
                            <option>Operations</option>
                            <option>Finance</option>
                        </select>
                    </div>
                </div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Timestamp</th>
                                <th>User</th>
                                <th>Activity</th>
                                <th>Department</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2024-12-08 14:23</td>
                                <td>Dr. Sarah Johnson</td>
                                <td>Updated course syllabus - CS301</td>
                                <td>Computer Science</td>
                                <td><span class="badge success">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 14:15</td>
                                <td>Admin Team</td>
                                <td>Published exam schedule</td>
                                <td>Academic Affairs</td>
                                <td><span class="badge success">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 13:58</td>
                                <td>Maintenance Dept</td>
                                <td>Resolved ticket #MT-1842</td>
                                <td>Operations</td>
                                <td><span class="badge success">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 13:45</td>
                                <td>Finance Team</td>
                                <td>Processed fee payment - 15 students</td>
                                <td>Finance</td>
                                <td><span class="badge success">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 13:30</td>
                                <td>Prof. Michael Chen</td>
                                <td>Marked attendance - MATH201</td>
                                <td>Mathematics</td>
                                <td><span class="badge success">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 13:12</td>
                                <td>Student Affairs</td>
                                <td>Approved hostel allocation - 8 students</td>
                                <td>Student Services</td>
                                <td><span class="badge success">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 12:55</td>
                                <td>IT Support</td>
                                <td>Installed software update - Lab 3</td>
                                <td>IT Services</td>
                                <td><span class="badge success">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 12:40</td>
                                <td>Registrar Office</td>
                                <td>Processed course registration - 42 students</td>
                                <td>Academic Affairs</td>
                                <td><span class="badge success">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 12:28</td>
                                <td>Library Services</td>
                                <td>Ordered new books - 125 titles</td>
                                <td>Library</td>
                                <td><span class="badge warning">Pending Approval</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 12:10</td>
                                <td>Transport Dept</td>
                                <td>Updated bus routes</td>
                                <td>Operations</td>
                                <td><span class="badge success">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 11:58</td>
                                <td>HR Department</td>
                                <td>Processed payroll - Faculty</td>
                                <td>HR</td>
                                <td><span class="badge success">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 11:45</td>
                                <td>Admissions Office</td>
                                <td>Sent offer letters - 52 applicants</td>
                                <td>Admissions</td>
                                <td><span class="badge success">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 11:30</td>
                                <td>Sports Complex</td>
                                <td>Equipment maintenance scheduled</td>
                                <td>Sports</td>
                                <td><span class="badge warning">Scheduled</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 11:15</td>
                                <td>Dr. Emma Wilson</td>
                                <td>Uploaded lecture materials - PHY202</td>
                                <td>Physics</td>
                                <td><span class="badge success">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 11:00</td>
                                <td>Cafeteria Manager</td>
                                <td>Updated menu for next week</td>
                                <td>Facilities</td>
                                <td><span class="badge success">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 10:45</td>
                                <td>Placement Cell</td>
                                <td>Scheduled campus interview - 5 companies</td>
                                <td>Placements</td>
                                <td><span class="badge info">Scheduled</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function attachOverviewHandlers() {
        // KPI cards already have onclick handlers in HTML
    }

    // Users Screen
    function getUsersScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">User Management</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('User List')">Export</button>
                        <button class="btn btn-primary btn-sm" onclick="addUser()">Add User</button>
                    </div>
                </div>
                <div class="table-filters">
                    <select class="filter-select">
                        <option>All Roles</option>
                        <option>Admin</option>
                        <option>Faculty</option>
                        <option>Student</option>
                        <option>Staff</option>
                    </select>
                    <select class="filter-select">
                        <option>All Departments</option>
                        <option>Computer Science</option>
                        <option>Mathematics</option>
                        <option>Physics</option>
                    </select>
                    <select class="filter-select">
                        <option>All Status</option>
                        <option>Active</option>
                        <option>Inactive</option>
                    </select>
                    <input type="text" class="search-input" placeholder="Search users...">
                </div>
            </div>
            
            <div class="table-container">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>User ID</th>
                                <th>Name</th>
                                <th>Role</th>
                                <th>Department</th>
                                <th>Email</th>
                                <th>Status</th>
                                <th>Last Login</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr onclick="viewUserDetails('USR-001')" style="cursor: pointer;">
                                <td>USR-001</td>
                                <td>Dr. Sarah Johnson</td>
                                <td>Faculty</td>
                                <td>Computer Science</td>
                                <td>sarah.j@college.edu</td>
                                <td><span class="badge success">Active</span></td>
                                <td>2024-12-08 14:23</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editUser('USR-001')">Edit</button>
                                        <button class="action-btn" onclick="viewUserDetails('USR-001')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewUserDetails('USR-002')" style="cursor: pointer;">
                                <td>USR-002</td>
                                <td>Prof. Michael Chen</td>
                                <td>Faculty</td>
                                <td>Mathematics</td>
                                <td>michael.c@college.edu</td>
                                <td><span class="badge success">Active</span></td>
                                <td>2024-12-08 13:30</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editUser('USR-002')">Edit</button>
                                        <button class="action-btn" onclick="viewUserDetails('USR-002')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewUserDetails('USR-003')" style="cursor: pointer;">
                                <td>USR-003</td>
                                <td>Admin User</td>
                                <td>Admin</td>
                                <td>Administration</td>
                                <td>admin@college.edu</td>
                                <td><span class="badge success">Active</span></td>
                                <td>2024-12-08 14:45</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editUser('USR-003')">Edit</button>
                                        <button class="action-btn" onclick="viewUserDetails('USR-003')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewUserDetails('USR-004')" style="cursor: pointer;">
                                <td>USR-004</td>
                                <td>John Martinez</td>
                                <td>Staff</td>
                                <td>Operations</td>
                                <td>john.m@college.edu</td>
                                <td><span class="badge success">Active</span></td>
                                <td>2024-12-08 13:58</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editUser('USR-004')">Edit</button>
                                        <button class="action-btn" onclick="viewUserDetails('USR-004')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>USR-005</td>
                                <td>Dr. Emma Wilson</td>
                                <td>Faculty</td>
                                <td>Physics</td>
                                <td>emma.w@college.edu</td>
                                <td><span class="badge warning">On Leave</span></td>
                                <td>2024-12-05 09:15</td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editUser('USR-005')">Edit</button>
                                        <button class="action-btn" onclick="viewUserDetails('USR-005')">View</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // Faculty Screen
    function getFacultyScreen() {
        return `
            <div class="kpi-grid" style="margin-bottom: 25px;">
                <div class="kpi-card">
                    <div class="kpi-header">
                        <span class="kpi-label">Total Faculty</span>
                        <div class="kpi-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg></div>
                    </div>
                    <div class="kpi-value">156</div>
                    <div class="kpi-change neutral">All Departments</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-header">
                        <span class="kpi-label">Professors</span>
                        <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a10 10 0 0 1 10 10v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8A10 10 0 0 1 12 2z"/><path d="M12 2v10"/></svg></div>
                    </div>
                    <div class="kpi-value">12</div>
                    <div class="kpi-change positive">Senior Level</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-header">
                        <span class="kpi-label">Associate Professors</span>
                        <div class="kpi-icon orange"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg></div>
                    </div>
                    <div class="kpi-value">45</div>
                    <div class="kpi-change positive">Mid Level</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-header">
                        <span class="kpi-label">Assistant Professors</span>
                        <div class="kpi-icon cyan"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></div>
                    </div>
                    <div class="kpi-value">99</div>
                    <div class="kpi-change positive">Entry Level</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Faculty Management</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('Faculty List')">Export</button>
                        <button class="btn btn-primary btn-sm" onclick="addFaculty()">Add Faculty</button>
                    </div>
                </div>
                <div class="table-filters">
                    <select class="filter-select">
                        <option>All Designations</option>
                        <option>Professor</option>
                        <option>Associate Professor</option>
                        <option>Assistant Professor</option>
                    </select>
                    <select class="filter-select">
                        <option>All Departments</option>
                        <option>Computer Science</option>
                        <option>Mathematics</option>
                        <option>Physics</option>
                        <option>Electronics</option>
                    </select>
                    <select class="filter-select">
                        <option>All Status</option>
                        <option>Active</option>
                        <option>On Leave</option>
                    </select>
                    <input type="text" class="search-input" placeholder="Search faculty...">
                </div>
            </div>
            
            <div class="table-container">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Faculty ID</th>
                                <th>Name</th>
                                <th>Department</th>
                                <th>Designation</th>
                                <th>Contact</th>
                                <th>Joining Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr onclick="viewFacultyDetails('FAC001')" style="cursor: pointer;">
                                <td>FAC001</td>
                                <td>Dr. Rajesh Gupta</td>
                                <td>Computer Science</td>
                                <td>Professor</td>
                                <td>rajesh.gupta@college.edu</td>
                                <td>2010-07-15</td>
                                <td><span class="badge success">Active</span></td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editFaculty('FAC001')">Edit</button>
                                        <button class="action-btn" onclick="viewFacultyDetails('FAC001')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewFacultyDetails('FAC002')" style="cursor: pointer;">
                                <td>FAC002</td>
                                <td>Dr. Sunita Mehta</td>
                                <td>Electronics</td>
                                <td>Associate Professor</td>
                                <td>sunita.mehta@college.edu</td>
                                <td>2014-08-20</td>
                                <td><span class="badge success">Active</span></td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editFaculty('FAC002')">Edit</button>
                                        <button class="action-btn" onclick="viewFacultyDetails('FAC002')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewFacultyDetails('FAC003')" style="cursor: pointer;">
                                <td>FAC003</td>
                                <td>Mr. Anil Kumar</td>
                                <td>Mechanical</td>
                                <td>Assistant Professor</td>
                                <td>anil.kumar@college.edu</td>
                                <td>2018-01-10</td>
                                <td><span class="badge warning">On Leave</span></td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editFaculty('FAC003')">Edit</button>
                                        <button class="action-btn" onclick="viewFacultyDetails('FAC003')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewFacultyDetails('FAC004')" style="cursor: pointer;">
                                <td>FAC004</td>
                                <td>Dr. Priya Sharma</td>
                                <td>Physics</td>
                                <td>Associate Professor</td>
                                <td>priya.sharma@college.edu</td>
                                <td>2015-06-01</td>
                                <td><span class="badge success">Active</span></td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editFaculty('FAC004')">Edit</button>
                                        <button class="action-btn" onclick="viewFacultyDetails('FAC004')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewFacultyDetails('FAC005')" style="cursor: pointer;">
                                <td>FAC005</td>
                                <td>Prof. Vikram Singh</td>
                                <td>Mathematics</td>
                                <td>Professor</td>
                                <td>vikram.singh@college.edu</td>
                                <td>2008-09-15</td>
                                <td><span class="badge success">Active</span></td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editFaculty('FAC005')">Edit</button>
                                        <button class="action-btn" onclick="viewFacultyDetails('FAC005')">View</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // Departments Screen
    function getDepartmentsScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Department Management</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('Department List')">Export</button>
                        <button class="btn btn-primary btn-sm" onclick="addDepartment()">Add Department</button>
                    </div>
                </div>
                <div class="table-filters">
                    <input type="text" class="search-input" placeholder="Search departments...">
                </div>
            </div>
            
            <div class="table-container">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Dept Code</th>
                                <th>Department Name</th>
                                <th>HOD</th>
                                <th>Faculty Count</th>
                                <th>Student Count</th>
                                <th>Budget ()</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr onclick="viewDepartmentDetails('CSE')" style="cursor: pointer;">
                                <td>CSE</td>
                                <td>Computer Science & Engineering</td>
                                <td>Dr. Sarah Johnson</td>
                                <td>45</td>
                                <td>782</td>
                                <td> 2.5 Cr</td>
                                <td><span class="badge success">Active</span></td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editDepartment('CSE')">Edit</button>
                                        <button class="action-btn" onclick="viewDepartmentDetails('CSE')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewDepartmentDetails('MATH')" style="cursor: pointer;">
                                <td>MATH</td>
                                <td>Mathematics</td>
                                <td>Prof. Michael Chen</td>
                                <td>28</td>
                                <td>456</td>
                                <td> 1.2 Cr</td>
                                <td><span class="badge success">Active</span></td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editDepartment('MATH')">Edit</button>
                                        <button class="action-btn" onclick="viewDepartmentDetails('MATH')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewDepartmentDetails('PHY')" style="cursor: pointer;">
                                <td>PHY</td>
                                <td>Physics</td>
                                <td>Dr. Emma Wilson</td>
                                <td>32</td>
                                <td>523</td>
                                <td> 1.8 Cr</td>
                                <td><span class="badge success">Active</span></td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editDepartment('PHY')">Edit</button>
                                        <button class="action-btn" onclick="viewDepartmentDetails('PHY')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewDepartmentDetails('EEE')" style="cursor: pointer;">
                                <td>EEE</td>
                                <td>Electrical & Electronics Engineering</td>
                                <td>Dr. James Anderson</td>
                                <td>38</td>
                                <td>645</td>
                                <td> 2.1 Cr</td>
                                <td><span class="badge success">Active</span></td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editDepartment('ECE')">Edit</button>
                                        <button class="action-btn" onclick="viewDepartmentDetails('ECE')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>MECH</td>
                                <td>Mechanical Engineering</td>
                                <td>Prof. Robert Taylor</td>
                                <td>42</td>
                                <td>721</td>
                                <td> 2.3 Cr</td>
                                <td><span class="badge success">Active</span></td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editDepartment('MECH')">Edit</button>
                                        <button class="action-btn" onclick="viewDepartmentDetails('MECH')">View</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // Students Screen
    function getStudentsScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Student Master</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('Student List')">Export</button>
                        <button class="btn btn-primary btn-sm" onclick="addStudent()">Add Student</button>
                    </div>
                </div>
                <div class="table-filters">
                    <select class="filter-select">
                        <option>All Programs</option>
                        <option>B.Tech CSE</option>
                        <option>B.Tech EEE</option>
                        <option>B.Sc Mathematics</option>
                    </select>
                    <select class="filter-select">
                        <option>All Years</option>
                        <option>1st Year</option>
                        <option>2nd Year</option>
                        <option>3rd Year</option>
                        <option>4th Year</option>
                    </select>
                    <input type="text" class="search-input" placeholder="Search students...">
                </div>
            </div>
            
            <div class="table-container">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Roll No</th>
                                <th>Student Name</th>
                                <th>Program</th>
                                <th>Year</th>
                                <th>Attendance %</th>
                                <th>CGPA</th>
                                <th>Fee Status</th>
                                <th>Academic Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr onclick="viewStudentDetails('STU-001')" style="cursor: pointer;">
                                <td>2023-CSE-001</td>
                                <td>Aditya Sharma</td>
                                <td>B.Tech CSE</td>
                                <td>2nd Year</td>
                                <td>92%</td>
                                <td>8.45</td>
                                <td><span class="badge success">Paid</span></td>
                                <td><span class="badge success">Regular</span></td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editStudent('STU-001')">Edit</button>
                                        <button class="action-btn" onclick="viewStudentDetails('STU-001')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewStudentDetails('STU-002')" style="cursor: pointer;">
                                <td>2023-CSE-002</td>
                                <td>Priya Singh</td>
                                <td>B.Tech CSE</td>
                                <td>2nd Year</td>
                                <td>88%</td>
                                <td>9.12</td>
                                <td><span class="badge success">Paid</span></td>
                                <td><span class="badge success">Regular</span></td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editStudent('STU-002')">Edit</button>
                                        <button class="action-btn" onclick="viewStudentDetails('STU-002')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewStudentDetails('STU-003')" style="cursor: pointer;">
                                <td>2022-EEE-045</td>
                                <td>Rohan Das</td>
                                <td>B.Tech EEE</td>
                                <td>3rd Year</td>
                                <td>76%</td>
                                <td>7.28</td>
                                <td><span class="badge warning">Pending</span></td>
                                <td><span class="badge warning">Backlog</span></td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editStudent('STU-003')">Edit</button>
                                        <button class="action-btn" onclick="viewStudentDetails('STU-003')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>2024-CSE-089</td>
                                <td>Sneha Patel</td>
                                <td>B.Tech CSE</td>
                                <td>1st Year</td>
                                <td>95%</td>
                                <td>9.45</td>
                                <td><span class="badge success">Paid</span></td>
                                <td><span class="badge success">Regular</span></td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editStudent('STU-004')">Edit</button>
                                        <button class="action-btn" onclick="viewStudentDetails('STU-004')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>2021-MECH-112</td>
                                <td>Vikram Kumar</td>
                                <td>B.Tech MECH</td>
                                <td>4th Year</td>
                                <td>82%</td>
                                <td>8.12</td>
                                <td><span class="badge success">Paid</span></td>
                                <td><span class="badge success">Regular</span></td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editStudent('STU-005')">Edit</button>
                                        <button class="action-btn" onclick="viewStudentDetails('STU-005')">View</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // Courses Screen
    function getCoursesScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Course & Curriculum Management</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('Course Catalog')">Export Catalog</button>
                        <button class="btn btn-primary btn-sm" onclick="addCourse()">Add Course</button>
                    </div>
                </div>
                
                <p style="padding: 20px; color: #718096;">
                    Course management module allows you to:
                    <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
                        <li>Create and manage course catalog</li>
                        <li>Define curriculum structure by program</li>
                        <li>Set credit requirements and prerequisites</li>
                        <li>Map courses to semesters</li>
                        <li>Manage course offerings by term</li>
                    </ul>
                </p>
                
                <div class="table-filters">
                    <select class="filter-select">
                        <option>All Departments</option>
                        <option>Computer Science</option>
                        <option>Mathematics</option>
                        <option>Physics</option>
                    </select>
                    <select class="filter-select">
                        <option>All Levels</option>
                        <option>100 Level</option>
                        <option>200 Level</option>
                        <option>300 Level</option>
                        <option>400 Level</option>
                    </select>
                    <input type="text" class="search-input" placeholder="Search courses...">
                </div>
            </div>
            
            <div class="table-container">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Course Code</th>
                                <th>Course Name</th>
                                <th>Credits</th>
                                <th>Department</th>
                                <th>Type</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr onclick="viewCourseDetails('CS101')" style="cursor: pointer;">
                                <td>CS101</td>
                                <td>Introduction to Computer Science</td>
                                <td>4.0</td>
                                <td>Computer Science</td>
                                <td><span class="badge info">Core</span></td>
                                <td><span class="badge success">Active</span></td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="event.stopPropagation(); editCourse('C001')">Edit</button>
                                        <button class="action-btn" onclick="viewCourseDetails('CS101')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewCourseDetails('MATH201')" style="cursor: pointer;">
                                <td>MATH201</td>
                                <td>Linear Algebra</td>
                                <td>3.0</td>
                                <td>Mathematics</td>
                                <td><span class="badge info">Core</span></td>
                                <td><span class="badge success">Active</span></td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editCourse('MATH201')">Edit</button>
                                        <button class="action-btn" onclick="viewCourseDetails('MATH201')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewCourseDetails('CS305')" style="cursor: pointer;">
                                <td>CS305</td>
                                <td>Database Systems</td>
                                <td>4.0</td>
                                <td>Computer Science</td>
                                <td><span class="badge info">Core</span></td>
                                <td><span class="badge success">Active</span></td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editCourse('CS305')">Edit</button>
                                        <button class="action-btn" onclick="viewCourseDetails('CS305')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewCourseDetails('PHY202')" style="cursor: pointer;">
                                <td>PHY202</td>
                                <td>General Physics II</td>
                                <td>4.0</td>
                                <td>Physics</td>
                                <td><span class="badge info">Core</span></td>
                                <td><span class="badge success">Active</span></td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="event.stopPropagation(); editCourse('PHY202')">Edit</button>
                                        <button class="action-btn" onclick="event.stopPropagation(); viewCourseDetails('PHY202')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>CS410</td>
                                <td>Machine Learning</td>
                                <td>3.0</td>
                                <td>Computer Science</td>
                                <td><span class="badge warning">Elective</span></td>
                                <td><span class="badge success">Active</span></td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editCourse('CS410')">Edit</button>
                                        <button class="action-btn" onclick="viewCourseDetails('CS410')">View</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // Registration Screen
    function getRegistrationScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Course Registration Control</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="showNotification('Registration draft saved', 'success')">Save Draft</button>
                        <button class="btn btn-primary btn-sm" onclick="showNotification('Registration window published successfully!', 'success')">Publish Window</button>
                    </div>
                </div>
                
                <p style="padding: 20px; color: #718096;">
                    Registration control panel allows you to:
                    <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
                        <li>Define registration windows by term and program</li>
                        <li>Set credit limits and enrollment capacity</li>
                        <li>Configure add/drop deadlines</li>
                        <li>Enable/disable advisor approval requirements</li>
                        <li>Manage late registration policies and fees</li>
                        <li>Control program-specific eligibility rules</li>
                    </ul>
                </p>
            </div>
            
            <div class="card">
                <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">Registration Window Settings</h3>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                    <div>
                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 8px;">Academic Year</label>
                        <select class="filter-select" style="width: 100%;">
                            <option>2024 - 2025</option>
                            <option>2023 - 2024</option>
                        </select>
                    </div>
                    <div>
                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 8px;">Term</label>
                        <select class="filter-select" style="width: 100%;">
                            <option>Fall Semester</option>
                            <option>Spring Semester</option>
                            <option>Summer Term</option>
                        </select>
                    </div>
                    <div>
                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 8px;">Start Date & Time</label>
                        <input type="datetime-local" class="search-input" style="width: 100%;" value="2024-08-15T08:00">
                    </div>
                    <div>
                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 8px;">End Date & Time</label>
                        <input type="datetime-local" class="search-input" style="width: 100%;" value="2024-08-25T23:59">
                    </div>
                    <div>
                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 8px;">Max Credits Per Student</label>
                        <input type="number" class="search-input" style="width: 100%;" value="18">
                    </div>
                    <div>
                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 8px;">Grace Period (Hours)</label>
                        <input type="number" class="search-input" style="width: 100%;" value="0">
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">Rules & Policies</h3>
                <div style="display: flex; flex-direction: column; gap: 16px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 4px;">Allow Add/Drop</div>
                            <div style="font-size: 12px; color: #718096;">Students can modify courses after initial registration</div>
                        </div>
                        <label style="position: relative; display: inline-block; width: 44px; height: 24px;">
                            <input type="checkbox" checked style="opacity: 0; width: 0; height: 0;">
                            <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #4a90e2; transition: .4s; border-radius: 24px; box-shadow: inset 0 0 2px rgba(0,0,0,0.1);"></span>
                        </label>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 4px;">Advisor Approval</div>
                            <div style="font-size: 12px; color: #718096;">Require advisor sign-off before confirming schedule</div>
                        </div>
                        <label style="position: relative; display: inline-block; width: 44px; height: 24px;">
                            <input type="checkbox" style="opacity: 0; width: 0; height: 0;">
                            <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #cbd5e0; transition: .4s; border-radius: 24px; box-shadow: inset 0 0 2px rgba(0,0,0,0.1);"></span>
                        </label>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 4px;">Late Registration</div>
                            <div style="font-size: 12px; color: #718096;">Allow registration after window close with fee</div>
                        </div>
                        <label style="position: relative; display: inline-block; width: 44px; height: 24px;">
                            <input type="checkbox" checked style="opacity: 0; width: 0; height: 0;">
                            <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #4a90e2; transition: .4s; border-radius: 24px; box-shadow: inset 0 0 2px rgba(0,0,0,0.1);"></span>
                        </label>
                    </div>
                </div>
            </div>
        `;
    }

    // Attendance Screen
    function getAttendanceScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Attendance Overview</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('Attendance Report')">Export Report</button>
                        <button class="btn btn-primary btn-sm" onclick="markAttendance()">Mark Attendance</button>
                    </div>
                </div>
                
                <p style="padding: 20px; color: #718096;">
                    Attendance tracking system provides:
                    <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
                        <li>Real-time attendance marking and tracking</li>
                        <li>Student-wise and course-wise reports</li>
                        <li>Low attendance alerts and notifications</li>
                        <li>Biometric and manual entry integration</li>
                        <li>Leave management and approvals</li>
                        <li>Automated percentage calculations</li>
                    </ul>
                </p>
                
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Today's Attendance</span>
                            <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></div>
                        </div>
                        <div class="kpi-value">89.2%</div>
                        <div class="kpi-change positive">2,272 / 2,547 students</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Weekly Average</span>
                            <div class="kpi-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></div>
                        </div>
                        <div class="kpi-value">87.8%</div>
                        <div class="kpi-change positive"> 1.5% from last week</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Low Attendance Alerts</span>
                            <div class="kpi-icon red"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg></div>
                        </div>
                        <div class="kpi-value">142</div>
                        <div class="kpi-change negative">Students below 75%</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Leave Requests</span>
                            <div class="kpi-icon orange"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/></svg></div>
                        </div>
                        <div class="kpi-value">28</div>
                        <div class="kpi-change neutral">Pending approval</div>
                    </div>
                </div>
            </div>
        `;
    }

    // Timetable Screen
    function getTimetableScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Timetable Management</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('Timetable')">Export</button>
                        <button class="btn btn-primary btn-sm" onclick="addSchedule()">Add Schedule</button>
                    </div>
                </div>
                <div class="table-filters">
                    <select class="filter-select">
                        <option>CSE - 3rd Year - Section A</option>
                        <option>CSE - 3rd Year - Section B</option>
                        <option>CSE - 2nd Year - Section A</option>
                        <option>ECE - 3rd Year - Section A</option>
                        <option>MECH - 4th Year - Section A</option>
                    </select>
                    <select class="filter-select">
                        <option>Fall 2024</option>
                        <option>Spring 2024</option>
                        <option>Summer 2024</option>
                    </select>
                </div>
            </div>
            
            <div class="card" style="overflow-x: auto; margin-top: 20px;">
                <div class="timetable">
                    <div class="timetable-header">
                        <div>Time</div>
                        <div>Monday</div>
                        <div>Tuesday</div>
                        <div>Wednesday</div>
                        <div>Thursday</div>
                        <div>Friday</div>
                        <div>Saturday</div>
                    </div>
                    <div class="timetable-row">
                        <div class="timetable-time">9:00 - 10:00</div>
                        <div class="timetable-subject"><strong>DBMS</strong><br>Dr. Rajesh Gupta</div>
                        <div class="timetable-subject"><strong>OS</strong><br>Dr. Sunita Mehta</div>
                        <div class="timetable-subject"><strong>CN</strong><br>Mr. Anil Kumar</div>
                        <div class="timetable-subject"><strong>DBMS</strong><br>Dr. Rajesh Gupta</div>
                        <div class="timetable-subject"><strong>SE</strong><br>Dr. Priya Sharma</div>
                        <div class="timetable-subject lab"><strong>Lab</strong><br>All Faculty</div>
                    </div>
                    <div class="timetable-row">
                        <div class="timetable-time">10:00 - 11:00</div>
                        <div class="timetable-subject"><strong>OS</strong><br>Dr. Sunita Mehta</div>
                        <div class="timetable-subject"><strong>DBMS</strong><br>Dr. Rajesh Gupta</div>
                        <div class="timetable-subject"><strong>SE</strong><br>Dr. Priya Sharma</div>
                        <div class="timetable-subject"><strong>CN</strong><br>Mr. Anil Kumar</div>
                        <div class="timetable-subject"><strong>DBMS</strong><br>Dr. Rajesh Gupta</div>
                        <div class="timetable-subject lab"><strong>Lab</strong><br>All Faculty</div>
                    </div>
                    <div class="timetable-row">
                        <div class="timetable-time">11:00 - 11:15</div>
                        <div class="timetable-break">Break</div>
                    </div>
                    <div class="timetable-row">
                        <div class="timetable-time">11:15 - 12:15</div>
                        <div class="timetable-subject"><strong>CN</strong><br>Mr. Anil Kumar</div>
                        <div class="timetable-subject"><strong>SE</strong><br>Dr. Priya Sharma</div>
                        <div class="timetable-subject"><strong>OS</strong><br>Dr. Sunita Mehta</div>
                        <div class="timetable-subject"><strong>DBMS</strong><br>Dr. Rajesh Gupta</div>
                        <div class="timetable-subject"><strong>CN</strong><br>Mr. Anil Kumar</div>
                        <div class="timetable-subject lab"><strong>Lab</strong><br>All Faculty</div>
                    </div>
                    <div class="timetable-row">
                        <div class="timetable-time">12:15 - 13:00</div>
                        <div class="timetable-break">Lunch Break</div>
                    </div>
                    <div class="timetable-row">
                        <div class="timetable-time">13:00 - 14:00</div>
                        <div class="timetable-subject"><strong>SE</strong><br>Dr. Priya Sharma</div>
                        <div class="timetable-subject"><strong>CN</strong><br>Mr. Anil Kumar</div>
                        <div class="timetable-subject"><strong>DBMS</strong><br>Dr. Rajesh Gupta</div>
                        <div class="timetable-subject"><strong>OS</strong><br>Dr. Sunita Mehta</div>
                        <div class="timetable-subject tutorial"><strong>Tutorial</strong><br>TAs</div>
                        <div class="timetable-subject lab"><strong>Lab</strong><br>All Faculty</div>
                    </div>
                    <div class="timetable-row">
                        <div class="timetable-time">14:00 - 15:00</div>
                        <div class="timetable-subject"><strong>DBMS</strong><br>Dr. Rajesh Gupta</div>
                        <div class="timetable-subject"><strong>OS</strong><br>Dr. Sunita Mehta</div>
                        <div class="timetable-subject"><strong>CN</strong><br>Mr. Anil Kumar</div>
                        <div class="timetable-subject"><strong>SE</strong><br>Dr. Priya Sharma</div>
                        <div class="timetable-subject tutorial"><strong>Tutorial</strong><br>TAs</div>
                        <div class="timetable-subject lab"><strong>Lab</strong><br>All Faculty</div>
                    </div>
                </div>
            </div>
        `;
    }

    // Exams Screen
    function getExamsScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Exam Schedule Management</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="showNotification('Opening audit log...', 'info')">Audit Log</button>
                        <button class="btn btn-primary btn-sm" onclick="showNotification('Exam schedule published successfully!', 'success')">Publish Schedule</button>
                    </div>
                </div>
                
                <p style="padding: 20px; color: #718096;">
                    Examination management system includes:
                    <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
                        <li>Create and manage exam schedules</li>
                        <li>Venue allocation and capacity management</li>
                        <li>Conflict detection and resolution</li>
                        <li>Invigilator assignment</li>
                        <li>Hall ticket generation</li>
                        <li>Result processing and grade publication</li>
                    </ul>
                </p>
                
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Total Exams</span>
                            <div class="kpi-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg></div>
                        </div>
                        <div class="kpi-value">42</div>
                        <div class="kpi-change neutral">Fall 2024 Term</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Scheduled</span>
                            <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></div>
                        </div>
                        <div class="kpi-value">38</div>
                        <div class="kpi-change positive">90.5% complete</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Conflicts</span>
                            <div class="kpi-icon red"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg></div>
                        </div>
                        <div class="kpi-value">2</div>
                        <div class="kpi-change negative">Needs resolution</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Venues Used</span>
                            <div class="kpi-icon orange"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="2" width="16" height="20" rx="2" ry="2"/><path d="M9 22v-4h6v4M8 6h.01M16 6h.01M12 6h.01M12 10h.01M12 14h.01M16 10h.01M8 10h.01M8 14h.01M16 14h.01"/></svg></div>
                        </div>
                        <div class="kpi-value">12</div>
                        <div class="kpi-change neutral">Halls & Labs</div>
                    </div>
                </div>
            </div>
            
            <div class="table-container">
                <div class="table-header">
                    <div class="table-title">Exam Schedule (Draft)</div>
                    <div class="table-filters">
                        <select class="filter-select">
                            <option>All Departments</option>
                            <option>Computer Science</option>
                            <option>Mathematics</option>
                        </select>
                    </div>
                </div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Code</th>
                                <th>Course Name</th>
                                <th>Date</th>
                                <th>Time Slot</th>
                                <th>Type</th>
                                <th>Venue</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>CS101</td>
                                <td>Intro to Programming</td>
                                <td>Dec 10, 2024</td>
                                <td>09:00 - 12:00</td>
                                <td><span class="badge info">Written</span></td>
                                <td>Hall A (Capacity: 200)</td>
                                <td>
                                    <button class="action-btn" onclick="editExam('CS101')">Edit</button>
                                </td>
                            </tr>
                            <tr style="background: rgba(231, 76, 60, 0.05); border-left: 3px solid #e74c3c;">
                                <td>CS204</td>
                                <td>Data Structures</td>
                                <td>Dec 10, 2024</td>
                                <td style="color: #e74c3c; font-weight: 600;">09:00 - 12:00 </td>
                                <td><span class="badge warning">Lab</span></td>
                                <td>Lab 3 (Capacity: 45)</td>
                                <td>
                                    <button class="action-btn" onclick="editExam('CS204')">Edit</button>
                                </td>
                            </tr>
                            <tr>
                                <td>MATH201</td>
                                <td>Linear Algebra</td>
                                <td>Dec 11, 2024</td>
                                <td>14:00 - 17:00</td>
                                <td><span class="badge info">Written</span></td>
                                <td>Hall B (Capacity: 150)</td>
                                <td>
                                    <button class="action-btn" onclick="editExam('MATH201')">Edit</button>
                                </td>
                            </tr>
                            <tr>
                                <td>ENG105</td>
                                <td>Technical Writing</td>
                                <td>Dec 12, 2024</td>
                                <td>09:00 - 11:00</td>
                                <td><span class="badge success">Online</span></td>
                                <td>Remote Proctoring</td>
                                <td>
                                    <button class="action-btn" onclick="editExam('ENG105')">Edit</button>
                                </td>
                            </tr>
                            <tr style="background: rgba(230, 126, 34, 0.05); border-left: 3px solid #e67e22;">
                                <td>CS305</td>
                                <td>Database Systems</td>
                                <td>Dec 13, 2024</td>
                                <td>13:00 - 16:00</td>
                                <td><span class="badge info">Written</span></td>
                                <td>Hall C (Cap: 50) </td>
                                <td>
                                    <button class="action-btn" onclick="editExam('CS305')">Edit</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // Results Screen
    function getResultsScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Examination Results</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('Results')">Export Results</button>
                        <button class="btn btn-primary btn-sm" onclick="publishResults()">Publish Results</button>
                    </div>
                </div>
                <div class="table-filters">
                    <select class="filter-select">
                        <option>All Departments</option>
                        <option>Computer Science</option>
                        <option>Electronics</option>
                        <option>Mechanical</option>
                        <option>Mathematics</option>
                    </select>
                    <select class="filter-select">
                        <option>All Years</option>
                        <option>1st Year</option>
                        <option>2nd Year</option>
                        <option>3rd Year</option>
                        <option>4th Year</option>
                    </select>
                    <select class="filter-select">
                        <option>Fall 2024</option>
                        <option>Spring 2024</option>
                        <option>Summer 2024</option>
                    </select>
                    <input type="text" class="search-input" placeholder="Search by student name or ID...">
                </div>
            </div>
            
            <div class="result-cards-container" style="display: flex; flex-direction: column; gap: 20px; margin-top: 20px;">
                <div class="result-card">
                    <div class="result-card-header">
                        <div>
                            <h3 style="margin: 0; font-size: 18px; color: #1a202c;">Rahul Kumar - STU001</h3>
                            <p style="color: #718096; font-size: 14px; margin: 5px 0 0 0;">B.Tech CSE - 3rd Year | Semester 5</p>
                        </div>
                        <div style="text-align: right;">
                            <h3 style="margin: 0; font-size: 24px; color: #48bb78;">CGPA: 8.7</h3>
                            <p style="color: #718096; font-size: 14px; margin: 5px 0 0 0;">Rank: 12 / 120</p>
                        </div>
                    </div>
                    <div class="result-subjects">
                        <div class="result-subject">
                            <span class="result-subject-name">Database Management Systems</span>
                            <div class="result-marks">
                                <span style="color: #4a5568; font-weight: 500;">90/100</span>
                                <span class="grade-badge grade-a">A</span>
                            </div>
                        </div>
                        <div class="result-subject">
                            <span class="result-subject-name">Operating Systems</span>
                            <div class="result-marks">
                                <span style="color: #4a5568; font-weight: 500;">83/100</span>
                                <span class="grade-badge grade-a">A</span>
                            </div>
                        </div>
                        <div class="result-subject">
                            <span class="result-subject-name">Computer Networks</span>
                            <div class="result-marks">
                                <span style="color: #4a5568; font-weight: 500;">77/100</span>
                                <span class="grade-badge grade-b">B</span>
                            </div>
                        </div>
                        <div class="result-subject">
                            <span class="result-subject-name">Software Engineering</span>
                            <div class="result-marks">
                                <span style="color: #4a5568; font-weight: 500;">88/100</span>
                                <span class="grade-badge grade-a">A</span>
                            </div>
                        </div>
                        <div class="result-subject">
                            <span class="result-subject-name">Web Technologies</span>
                            <div class="result-marks">
                                <span style="color: #4a5568; font-weight: 500;">92/100</span>
                                <span class="grade-badge grade-a">A</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="result-card">
                    <div class="result-card-header">
                        <div>
                            <h3 style="margin: 0; font-size: 18px; color: #1a202c;">Priya Sharma - STU002</h3>
                            <p style="color: #718096; font-size: 14px; margin: 5px 0 0 0;">B.Tech CSE - 3rd Year | Semester 5</p>
                        </div>
                        <div style="text-align: right;">
                            <h3 style="margin: 0; font-size: 24px; color: #48bb78;">CGPA: 9.1</h3>
                            <p style="color: #718096; font-size: 14px; margin: 5px 0 0 0;">Rank: 3 / 120</p>
                        </div>
                    </div>
                    <div class="result-subjects">
                        <div class="result-subject">
                            <span class="result-subject-name">Database Management Systems</span>
                            <div class="result-marks">
                                <span style="color: #4a5568; font-weight: 500;">95/100</span>
                                <span class="grade-badge grade-a">A+</span>
                            </div>
                        </div>
                        <div class="result-subject">
                            <span class="result-subject-name">Operating Systems</span>
                            <div class="result-marks">
                                <span style="color: #4a5568; font-weight: 500;">91/100</span>
                                <span class="grade-badge grade-a">A+</span>
                            </div>
                        </div>
                        <div class="result-subject">
                            <span class="result-subject-name">Computer Networks</span>
                            <div class="result-marks">
                                <span style="color: #4a5568; font-weight: 500;">89/100</span>
                                <span class="grade-badge grade-a">A</span>
                            </div>
                        </div>
                        <div class="result-subject">
                            <span class="result-subject-name">Software Engineering</span>
                            <div class="result-marks">
                                <span style="color: #4a5568; font-weight: 500;">93/100</span>
                                <span class="grade-badge grade-a">A+</span>
                            </div>
                        </div>
                        <div class="result-subject">
                            <span class="result-subject-name">Web Technologies</span>
                            <div class="result-marks">
                                <span style="color: #4a5568; font-weight: 500;">88/100</span>
                                <span class="grade-badge grade-a">A</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="result-card">
                    <div class="result-card-header">
                        <div>
                            <h3 style="margin: 0; font-size: 18px; color: #1a202c;">Amit Patel - STU003</h3>
                            <p style="color: #718096; font-size: 14px; margin: 5px 0 0 0;">B.Tech CSE - 3rd Year | Semester 5</p>
                        </div>
                        <div style="text-align: right;">
                            <h3 style="margin: 0; font-size: 24px; color: #48bb78;">CGPA: 7.9</h3>
                            <p style="color: #718096; font-size: 14px; margin: 5px 0 0 0;">Rank: 45 / 120</p>
                        </div>
                    </div>
                    <div class="result-subjects">
                        <div class="result-subject">
                            <span class="result-subject-name">Database Management Systems</span>
                            <div class="result-marks">
                                <span style="color: #4a5568; font-weight: 500;">75/100</span>
                                <span class="grade-badge grade-b">B</span>
                            </div>
                        </div>
                        <div class="result-subject">
                            <span class="result-subject-name">Operating Systems</span>
                            <div class="result-marks">
                                <span style="color: #4a5568; font-weight: 500;">80/100</span>
                                <span class="grade-badge grade-a">A</span>
                            </div>
                        </div>
                        <div class="result-subject">
                            <span class="result-subject-name">Computer Networks</span>
                            <div class="result-marks">
                                <span style="color: #4a5568; font-weight: 500;">72/100</span>
                                <span class="grade-badge grade-b">B</span>
                            </div>
                        </div>
                        <div class="result-subject">
                            <span class="result-subject-name">Software Engineering</span>
                            <div class="result-marks">
                                <span style="color: #4a5568; font-weight: 500;">78/100</span>
                                <span class="grade-badge grade-b">B</span>
                            </div>
                        </div>
                        <div class="result-subject">
                            <span class="result-subject-name">Web Technologies</span>
                            <div class="result-marks">
                                <span style="color: #4a5568; font-weight: 500;">85/100</span>
                                <span class="grade-badge grade-a">A</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    // Assets Screen
    function getAssetsScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Asset Management</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('Asset Report')">Export Report</button>
                        <button class="btn btn-primary btn-sm" onclick="addAsset()">Add Asset</button>
                    </div>
                </div>
                
                <div class="table-filters">
                    <select class="filter-select">
                        <option>All Locations</option>
                        <option>Science Block A</option>
                        <option>Library</option>
                        <option>Engineering Hall</option>
                    </select>
                    <select class="filter-select">
                        <option>All Types</option>
                        <option>Furniture</option>
                        <option>IT Equipment</option>
                        <option>Lab Equipment</option>
                    </select>
                    <input type="text" class="search-input" placeholder="Search by ID, Type, or Location...">
                </div>
            </div>
            
            <div class="table-container">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Asset ID</th>
                                <th>Type</th>
                                <th>Location</th>
                                <th>Condition</th>
                                <th>Status</th>
                                <th>Last Maintenance</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr onclick="viewAssetDetails('AST-2023-001')" style="cursor: pointer;">
                                <td>AST-2023-001</td>
                                <td>Projector</td>
                                <td>Science Block A, Rm 101</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 6px;">
                                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #2ecc71;"></div>
                                        Good
                                    </div>
                                </td>
                                <td><span class="badge success">Active</span></td>
                                <td>Nov 15, 2024</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editAsset('AST-2023-001')">Edit</button>
                                        <button class="action-btn" onclick="viewAssetDetails('AST-2023-001')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewAssetDetails('AST-2023-042')" style="cursor: pointer;">
                                <td>AST-2023-042</td>
                                <td>Computer</td>
                                <td>Lab 3</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 6px;">
                                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #2ecc71;"></div>
                                        Good
                                    </div>
                                </td>
                                <td><span class="badge success">Active</span></td>
                                <td>Oct 20, 2024</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="showNotification('Opening asset editor...', 'info')">Edit</button>
                                        <button class="action-btn" onclick="showNotification('Loading asset details...', 'info')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr style="background: rgba(230, 126, 34, 0.05);">
                                <td>AST-2022-158</td>
                                <td> Furniture</td>
                                <td>Library, Floor 2</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 6px;">
                                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #e67e22;"></div>
                                        Fair
                                    </div>
                                </td>
                                <td><span class="badge warning">Maintenance</span></td>
                                <td>Sep 05, 2024</td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="showNotification('Opening asset editor...', 'info')">Edit</button>
                                        <button class="action-btn" onclick="showNotification('Loading asset details...', 'info')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>AST-2023-089</td>
                                <td> Lab Equipment</td>
                                <td>Physics Lab</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 6px;">
                                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #2ecc71;"></div>
                                        Excellent
                                    </div>
                                </td>
                                <td><span class="badge success">Active</span></td>
                                <td>Nov 28, 2024</td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="showNotification('Opening asset editor...', 'info')">Edit</button>
                                        <button class="action-btn" onclick="showNotification('Loading asset details...', 'info')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr style="background: rgba(231, 76, 60, 0.05);">
                                <td>AST-2021-234</td>
                                <td> Printer</td>
                                <td>Admin Office</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 6px;">
                                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #e74c3c;"></div>
                                        Poor
                                    </div>
                                </td>
                                <td><span class="badge danger">Retired</span></td>
                                <td>Mar 12, 2024</td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="showNotification('Opening asset editor...', 'info')">Edit</button>
                                        <button class="action-btn" onclick="showNotification('Loading asset details...', 'info')">View</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // Tickets Screen
    function getTicketsScreen() {
        return `
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-header">
                        <span class="kpi-label">Total Open Requests</span>
                        <div class="kpi-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg></div>
                    </div>
                    <div class="kpi-value">42</div>
                    <div class="kpi-change positive"> 12% this week</div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-header">
                        <span class="kpi-label">SLA Breaches</span>
                        <div class="kpi-icon red"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg></div>
                    </div>
                    <div class="kpi-value">5</div>
                    <div class="kpi-change negative">+2 Today</div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-header">
                        <span class="kpi-label">Unassigned Tickets</span>
                        <div class="kpi-icon orange"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/></svg></div>
                    </div>
                    <div class="kpi-value">12</div>
                    <div class="kpi-change neutral">Needs Action</div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-header">
                        <span class="kpi-label">Avg Resolution Time</span>
                        <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="13" r="7"/><polyline points="12 9 12 13 15 15"/><path d="M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83"/></svg></div>
                    </div>
                    <div class="kpi-value">4.2 hrs</div>
                    <div class="kpi-change positive"> 15% improvement</div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Maintenance Requests</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('Maintenance Report')">Export Report</button>
                        <button class="btn btn-primary btn-sm" onclick="createTicket()">Create New Request</button>
                    </div>
                </div>
                
                <div class="table-filters">
                    <input type="text" class="search-input" placeholder="Search by Request ID, Location, or Description...">
                    <select class="filter-select">
                        <option>All Statuses</option>
                        <option>Open</option>
                        <option>In Progress</option>
                        <option>Resolved</option>
                    </select>
                    <select class="filter-select">
                        <option>All Priorities</option>
                        <option>Critical</option>
                        <option>High</option>
                        <option>Medium</option>
                        <option>Low</option>
                    </select>
                </div>
            </div>
            
            <div class="table-container">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Req ID</th>
                                <th>Issue & Description</th>
                                <th>Location</th>
                                <th>Priority</th>
                                <th>Assigned Staff</th>
                                <th>SLA Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr onclick="viewTicketDetails('REQ-2095')" style="cursor: pointer; background: rgba(231, 76, 60, 0.05); border-left: 3px solid #e74c3c;">
                                <td>
                                    <div style="font-weight: 600; color: #4a90e2;">#REQ-2095</div>
                                    <div style="font-size: 11px; color: #718096;">10:42 AM</div>
                                </td>
                                <td>
                                    <div style="font-weight: 600;">HVAC Failure - Server Room</div>
                                    <div style="font-size: 12px; color: #718096;">Main cooling unit making loud noises, temperature rising</div>
                                </td>
                                <td>IT Building, B2</td>
                                <td><span class="badge danger">Critical</span></td>
                                <td onclick="event.stopPropagation();">
                                    <button class="btn-secondary btn-sm" onclick="showNotification('Staff assignment dialog opening...', 'info')">Assign Staff</button>
                                </td>
                                <td>
                                    <div style="color: #e74c3c; font-weight: 600; font-size: 12px;">SLA Breached</div>
                                    <div style="font-size: 11px; color: #718096;">2h 15m overdue</div>
                                </td>
                                <td onclick="event.stopPropagation();">
                                    <button class="action-btn" onclick="viewTicketDetails('REQ-2095')">View</button>
                                </td>
                            </tr>
                            <tr onclick="viewTicketDetails('REQ-2094')" style="cursor: pointer;">
                                <td>
                                    <div style="font-weight: 600; color: #4a90e2;">#REQ-2094</div>
                                    <div style="font-size: 11px; color: #718096;">09:15 AM</div>
                                </td>
                                <td>
                                    <div style="font-weight: 600;">Projector Not Working</div>
                                    <div style="font-size: 12px; color: #718096;">Classroom projector won't turn on</div>
                                </td>
                                <td>Science Block A, Rm 201</td>
                                <td><span class="badge warning">High</span></td>
                                <td>John Martinez</td>
                                <td>
                                    <div style="color: #2ecc71; font-weight: 600; font-size: 12px;">On Track</div>
                                    <div style="font-size: 11px; color: #718096;">1h 30m remaining</div>
                                </td>
                                <td onclick="event.stopPropagation();">
                                    <button class="action-btn" onclick="viewTicketDetails('REQ-2094')">View</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div style="font-weight: 600; color: #4a90e2;">#REQ-2093</div>
                                    <div style="font-size: 11px; color: #718096;">Yesterday</div>
                                </td>
                                <td>
                                    <div style="font-weight: 600;">Wi-Fi Connectivity Issues</div>
                                    <div style="font-size: 12px; color: #718096;">Students reporting intermittent connectivity</div>
                                </td>
                                <td>Library, Floor 3</td>
                                <td><span class="badge info">Medium</span></td>
                                <td>IT Support Team</td>
                                <td>
                                    <div style="color: #2ecc71; font-weight: 600; font-size: 12px;">Resolved</div>
                                    <div style="font-size: 11px; color: #718096;">45m ahead</div>
                                </td>
                                <td>
                                    <button class="action-btn" onclick="showNotification('Loading request details...', 'info')">View</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div style="font-weight: 600; color: #4a90e2;">#REQ-2092</div>
                                    <div style="font-size: 11px; color: #718096;">Yesterday</div>
                                </td>
                                <td>
                                    <div style="font-weight: 600;">Leaking Faucet</div>
                                    <div style="font-size: 12px; color: #718096;">Washroom faucet continuously dripping</div>
                                </td>
                                <td>Hostel Block C</td>
                                <td><span class="badge neutral">Low</span></td>
                                <td>Plumbing Team</td>
                                <td>
                                    <div style="color: #2ecc71; font-weight: 600; font-size: 12px;">Resolved</div>
                                    <div style="font-size: 11px; color: #718096;">2h 10m ahead</div>
                                </td>
                                <td>
                                    <button class="action-btn" onclick="showNotification('Loading request details...', 'info')">View</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // Hostel Screen
    function getHostelScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Hostel Management</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('Hostel Data')">Export</button>
                        <button class="btn btn-primary btn-sm" onclick="allocateRoom()">Allocate Room</button>
                    </div>
                </div>
                
                <p style="padding: 20px; color: #718096;">
                    Hostel management system provides:
                    <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
                        <li>Room allocation and vacancy tracking</li>
                        <li>Student check-in/check-out management</li>
                        <li>Mess and facility booking</li>
                        <li>Visitor management and gate pass</li>
                        <li>Hostel fee collection</li>
                        <li>Complaint and request tracking</li>
                    </ul>
                </p>
                
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Total Beds</span>
                            <div class="kpi-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></div>
                        </div>
                        <div class="kpi-value">918</div>
                        <div class="kpi-change neutral">Across 4 blocks</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Occupied</span>
                            <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></div>
                        </div>
                        <div class="kpi-value">845</div>
                        <div class="kpi-change positive">92% occupancy</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Available</span>
                            <div class="kpi-icon orange"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/></svg></div>
                        </div>
                        <div class="kpi-value">73</div>
                        <div class="kpi-change neutral">Vacant beds</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Maintenance</span>
                            <div class="kpi-icon red"></div>
                        </div>
                        <div class="kpi-value">18</div>
                        <div class="kpi-change negative">Under repair</div>
                    </div>
                </div>
            </div>
        `;
    }

    // Facility Screen
    function getFacilityScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Facility Booking</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="showNotification('Opening calendar view...', 'info')">View Calendar</button>
                        <button class="btn btn-primary btn-sm" onclick="newBooking()">New Booking</button>
                    </div>
                </div>
                
                <p style="padding: 20px; color: #718096;">
                    Facility booking system allows:
                    <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
                        <li>Book auditoriums, conference rooms, labs</li>
                        <li>Sports facility scheduling</li>
                        <li>Equipment and resource reservation</li>
                        <li>Approval workflow management</li>
                        <li>Conflict detection and prevention</li>
                        <li>Usage tracking and reports</li>
                    </ul>
                </p>
                
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Today's Bookings</span>
                            <div class="kpi-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></div>
                        </div>
                        <div class="kpi-value">24</div>
                        <div class="kpi-change positive">Across all facilities</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Auditorium</span>
                            <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg></div>
                        </div>
                        <div class="kpi-value">85%</div>
                        <div class="kpi-change positive">Utilization</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Sports Complex</span>
                            <div class="kpi-icon orange"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6.5 6.5l11 11M17.5 6.5l-11 11M2 12h4m16 0h-4M12 2v4m0 16v-4"/></svg></div>
                        </div>
                        <div class="kpi-value">72%</div>
                        <div class="kpi-change positive">Utilization</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Pending Approvals</span>
                            <div class="kpi-icon red"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 2H6v5l6 5-6 5v5h12v-5l-6-5 6-5V2z"/></svg></div>
                        </div>
                        <div class="kpi-value">8</div>
                        <div class="kpi-change neutral">Awaiting approval</div>
                    </div>
                </div>
            </div>
        `;
    }

    // Library Screen
    function getLibraryScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Library Management</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('Library Books')">Export</button>
                        <button class="btn btn-primary btn-sm" onclick="addBook()">Add Book</button>
                    </div>
                </div>
                <div class="table-filters">
                    <select class="filter-select">
                        <option>All Categories</option>
                        <option>Computer Science</option>
                        <option>Mathematics</option>
                        <option>Physics</option>
                        <option>Electronics</option>
                        <option>General</option>
                    </select>
                    <select class="filter-select">
                        <option>All Status</option>
                        <option>Available</option>
                        <option>Issued</option>
                        <option>Reserved</option>
                    </select>
                    <input type="text" class="search-input" placeholder="Search books, authors...">
                </div>
            </div>
            
            <div class="book-grid">
                <div class="book-card">
                    <div class="book-cover-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="48" height="48">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                        </svg>
                    </div>
                    <div class="book-details">
                        <h4 class="book-title">Data Structures & Algorithms</h4>
                        <p class="book-author">Thomas H. Cormen, Charles E. Leiserson</p>
                        <p class="book-isbn">ISBN: 978-0262033848</p>
                        <div class="book-meta">
                            <span class="book-status available">Available (5)</span>
                            <span class="book-category">Computer Science</span>
                        </div>
                        <div class="book-actions">
                            <button class="btn btn-sm btn-primary" onclick="issueBook('BK001')">Issue</button>
                            <button class="btn btn-sm btn-secondary" onclick="viewBookDetails('BK001')">View</button>
                        </div>
                    </div>
                </div>

                <div class="book-card">
                    <div class="book-cover-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="48" height="48">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                        </svg>
                    </div>
                    <div class="book-details">
                        <h4 class="book-title">Operating System Concepts</h4>
                        <p class="book-author">Abraham Silberschatz, Peter B. Galvin</p>
                        <p class="book-isbn">ISBN: 978-1118063330</p>
                        <div class="book-meta">
                            <span class="book-status issued">Issued</span>
                            <span class="book-category">Computer Science</span>
                        </div>
                        <div class="book-actions">
                            <button class="btn btn-sm btn-secondary" disabled onclick="showNotification('Book is currently issued', 'warning')">Issue</button>
                            <button class="btn btn-sm btn-secondary" onclick="viewBookDetails('BK002')">View</button>
                        </div>
                    </div>
                </div>

                <div class="book-card">
                    <div class="book-cover-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="48" height="48">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                        </svg>
                    </div>
                    <div class="book-details">
                        <h4 class="book-title">Computer Networks</h4>
                        <p class="book-author">Andrew S. Tanenbaum, David J. Wetherall</p>
                        <p class="book-isbn">ISBN: 978-0132126953</p>
                        <div class="book-meta">
                            <span class="book-status available">Available (3)</span>
                            <span class="book-category">Computer Science</span>
                        </div>
                        <div class="book-actions">
                            <button class="btn btn-sm btn-primary" onclick="issueBook('BK003')">Issue</button>
                            <button class="btn btn-sm btn-secondary" onclick="viewBookDetails('BK003')">View</button>
                        </div>
                    </div>
                </div>

                <div class="book-card">
                    <div class="book-cover-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="48" height="48">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                        </svg>
                    </div>
                    <div class="book-details">
                        <h4 class="book-title">Database System Concepts</h4>
                        <p class="book-author">Henry F. Korth, S. Sudarshan</p>
                        <p class="book-isbn">ISBN: 978-0073523323</p>
                        <div class="book-meta">
                            <span class="book-status available">Available (4)</span>
                            <span class="book-category">Computer Science</span>
                        </div>
                        <div class="book-actions">
                            <button class="btn btn-sm btn-primary" onclick="issueBook('BK004')">Issue</button>
                            <button class="btn btn-sm btn-secondary" onclick="viewBookDetails('BK004')">View</button>
                        </div>
                    </div>
                </div>

                <div class="book-card">
                    <div class="book-cover-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="48" height="48">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                        </svg>
                    </div>
                    <div class="book-details">
                        <h4 class="book-title">Artificial Intelligence: A Modern Approach</h4>
                        <p class="book-author">Stuart Russell, Peter Norvig</p>
                        <p class="book-isbn">ISBN: 978-0136042594</p>
                        <div class="book-meta">
                            <span class="book-status available">Available (2)</span>
                            <span class="book-category">Computer Science</span>
                        </div>
                        <div class="book-actions">
                            <button class="btn btn-sm btn-primary" onclick="issueBook('BK005')">Issue</button>
                            <button class="btn btn-sm btn-secondary" onclick="viewBookDetails('BK005')">View</button>
                        </div>
                    </div>
                </div>

                <div class="book-card">
                    <div class="book-cover-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="48" height="48">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                        </svg>
                    </div>
                    <div class="book-details">
                        <h4 class="book-title">Linear Algebra and Its Applications</h4>
                        <p class="book-author">Gilbert Strang</p>
                        <p class="book-isbn">ISBN: 978-0030105678</p>
                        <div class="book-meta">
                            <span class="book-status reserved">Reserved</span>
                            <span class="book-category">Mathematics</span>
                        </div>
                        <div class="book-actions">
                            <button class="btn btn-sm btn-secondary" disabled onclick="showNotification('Book is reserved', 'warning')">Issue</button>
                            <button class="btn btn-sm btn-secondary" onclick="viewBookDetails('BK006')">View</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 25px;">
                <div class="card-header">
                    <div class="card-title">Recent Issues & Returns</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Transaction ID</th>
                                <th>Student</th>
                                <th>Book</th>
                                <th>Issue Date</th>
                                <th>Due Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>LIB-1234</td>
                                <td>Rahul Kumar (STU001)</td>
                                <td>Data Structures & Algorithms</td>
                                <td>Nov 20, 2024</td>
                                <td>Dec 20, 2024</td>
                                <td><span class="badge success">Active</span></td>
                                <td>
                                    <button class="action-btn" onclick="returnBook('LIB-1234')">Return</button>
                                </td>
                            </tr>
                            <tr>
                                <td>LIB-1235</td>
                                <td>Priya Sharma (STU002)</td>
                                <td>Operating System Concepts</td>
                                <td>Nov 15, 2024</td>
                                <td>Dec 15, 2024</td>
                                <td><span class="badge success">Active</span></td>
                                <td>
                                    <button class="action-btn" onclick="returnBook('LIB-1235')">Return</button>
                                </td>
                            </tr>
                            <tr style="background: rgba(231, 76, 60, 0.05);">
                                <td>LIB-1230</td>
                                <td>Amit Patel (STU003)</td>
                                <td>Computer Networks</td>
                                <td>Oct 20, 2024</td>
                                <td style="color: #e74c3c; font-weight: 600;">Nov 20, 2024</td>
                                <td><span class="badge danger">Overdue</span></td>
                                <td>
                                    <button class="action-btn" onclick="returnBook('LIB-1230')">Return</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // Fee Structure Screen
    function getFeeStructureScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Fee Structure Management</div>
                    <div
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('Fee Structure')">Export</button>
                        <button class="btn btn-primary btn-sm" onclick="addFeeStructure()">Add Fee Structure</button>
                    </div>
                </div>
                
                <p style="padding: 20px; color: #718096;">
                    Fee structure management includes:
                    <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
                        <li>Define fee components by program and year</li>
                        <li>Set tuition, hostel, transport, and other fees</li>
                        <li>Configure payment schedules and installments</li>
                        <li>Manage late fee penalties</li>
                        <li>Create scholarship and waiver rules</li>
                        <li>Academic year-wise fee structures</li>
                    </ul>
                </p>
            </div>
            
            <div class="table-container">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Program</th>
                                <th>Year</th>
                                <th>Tuition Fee</th>
                                <th>Hostel Fee</th>
                                <th>Other Fees</th>
                                <th>Total</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>B.Tech CSE</td>
                                <td>1st Year</td>
                                <td> 1,50,000</td>
                                <td> 60,000</td>
                                <td> 25,000</td>
                                <td> 2,35,000</td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editFeeStructure('FEE-001')">Edit</button>
                                        <button class="action-btn" onclick="showNotification('Loading fee structure...', 'info')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>B.Tech CSE</td>
                                <td>2nd Year</td>
                                <td> 1,50,000</td>
                                <td> 60,000</td>
                                <td> 20,000</td>
                                <td> 2,30,000</td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editFeeStructure('FEE-002')">Edit</button>
                                        <button class="action-btn" onclick="showNotification('Loading fee structure...', 'info')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>B.Tech EEE</td>
                                <td>1st Year</td>
                                <td> 1,40,000</td>
                                <td> 60,000</td>
                                <td> 25,000</td>
                                <td> 2,25,000</td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="editFeeStructure('FEE-003')">Edit</button>
                                        <button class="action-btn" onclick="showNotification('Loading fee structure...', 'info')">View</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // Fee Ledger Screen
    function getFeeLedgerScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Student Fee Ledger</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('Fee Ledger Report')">Export Report</button>
                        <button class="btn btn-primary btn-sm" onclick="showNotification('Opening payment form...', 'info')">Record Payment</button>
                    </div>
                </div>
                
                <div class="table-filters">
                    <select class="filter-select">
                        <option>All Programs</option>
                        <option>B.Tech CSE</option>
                        <option>B.Tech EEE</option>
                    </select>
                    <select class="filter-select">
                        <option>All Status</option>
                        <option>Paid</option>
                        <option>Pending</option>
                        <option>Overdue</option>
                    </select>
                    <input type="text" class="search-input" placeholder="Search by student name or ID...">
                </div>
            </div>
            
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-header">
                        <span class="kpi-label">Total Collectible</span>
                        <div class="kpi-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg></div>
                    </div>
                    <div class="kpi-value"> 3.6 Cr</div>
                    <div class="kpi-change neutral">Current academic year</div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-header">
                        <span class="kpi-label">Collected</span>
                        <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></div>
                    </div>
                    <div class="kpi-value"> 3.2 Cr</div>
                    <div class="kpi-change positive">89.5% collection</div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-header">
                        <span class="kpi-label">Pending</span>
                        <div class="kpi-icon orange"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 2H6v5l6 5-6 5v5h12v-5l-6-5 6-5V2z"/></svg></div>
                    </div>
                    <div class="kpi-value"> 38 L</div>
                    <div class="kpi-change neutral">268 students</div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-header">
                        <span class="kpi-label">Overdue</span>
                        <div class="kpi-icon red"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg></div>
                    </div>
                    <div class="kpi-value"> 4.2 L</div>
                    <div class="kpi-change negative">42 students</div>
                </div>
            </div>
            
            <div class="table-container">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Roll No</th>
                                <th>Student Name</th>
                                <th>Program</th>
                                <th>Total Fee</th>
                                <th>Paid</th>
                                <th>Balance</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2023-CSE-001</td>
                                <td>Aditya Sharma</td>
                                <td>B.Tech CSE</td>
                                <td> 2,35,000</td>
                                <td> 2,35,000</td>
                                <td> 0</td>
                                <td><span class="badge success">Paid</span></td>
                                <td>
                                    <button class="action-btn" onclick="showNotification('Loading student ledger...', 'info')">View Ledger</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2023-CSE-002</td>
                                <td>Priya Singh</td>
                                <td>B.Tech CSE</td>
                                <td> 2,35,000</td>
                                <td> 2,35,000</td>
                                <td> 0</td>
                                <td><span class="badge success">Paid</span></td>
                                <td>
                                    <button class="action-btn" onclick="showNotification('Loading student ledger...', 'info')">View Ledger</button>
                                </td>
                            </tr>
                            <tr style="background: rgba(230, 126, 34, 0.05);">
                                <td>2022-EEE-045</td>
                                <td>Rohan Das</td>
                                <td>B.Tech EEE</td>
                                <td> 2,25,000</td>
                                <td> 1,50,000</td>
                                <td> 75,000</td>
                                <td><span class="badge warning">Pending</span></td>
                                <td>
                                    <button class="action-btn" onclick="showNotification('Loading student ledger...', 'info')">View Ledger</button>
                                </td>
                            </tr>
                            <tr style="background: rgba(231, 76, 60, 0.05);">
                                <td>2021-MECH-089</td>
                                <td>Vikram Kumar</td>
                                <td>B.Tech MECH</td>
                                <td> 2,30,000</td>
                                <td> 1,30,000</td>
                                <td> 1,00,000</td>
                                <td><span class="badge danger">Overdue</span></td>
                                <td>
                                    <button class="action-btn" onclick="showNotification('Loading student ledger...', 'info')">View Ledger</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // Payments Screen
    function getPaymentsScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Payments & Waivers</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('Payment Records')">Export</button>
                        <button class="btn btn-primary btn-sm" onclick="showNotification('Opening payment form...', 'info')">Record Payment</button>
                    </div>
                </div>
                
                <p style="padding: 20px; color: #718096;">
                    Payment management includes:
                    <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
                        <li>Record online and offline payments</li>
                        <li>Payment gateway integration</li>
                        <li>Receipt generation and printing</li>
                        <li>Refund processing</li>
                        <li>Scholarship and waiver management</li>
                        <li>Payment reminders and notifications</li>
                    </ul>
                </p>
                
                <div class="table-filters">
                    <select class="filter-select">
                        <option>All Payment Modes</option>
                        <option>Online</option>
                        <option>Cash</option>
                        <option>Cheque</option>
                        <option>DD</option>
                    </select>
                    <input type="date" class="filter-select">
                    <input type="text" class="search-input" placeholder="Search payments...">
                </div>
            </div>
            
            <div class="table-container">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Receipt No</th>
                                <th>Date</th>
                                <th>Student</th>
                                <th>Amount</th>
                                <th>Mode</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>REC-2024-1842</td>
                                <td>2024-12-08</td>
                                <td>Aditya Sharma (2023-CSE-001)</td>
                                <td> 1,17,500</td>
                                <td><span class="badge info">Online</span></td>
                                <td><span class="badge success">Verified</span></td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="showNotification('Printing receipt...', 'info')">Print</button>
                                        <button class="action-btn" onclick="showNotification('Loading payment details...', 'info')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>REC-2024-1841</td>
                                <td>2024-12-08</td>
                                <td>Priya Singh (2023-CSE-002)</td>
                                <td> 2,35,000</td>
                                <td><span class="badge info">Online</span></td>
                                <td><span class="badge success">Verified</span></td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="showNotification('Printing receipt...', 'info')">Print</button>
                                        <button class="action-btn" onclick="showNotification('Loading payment details...', 'info')">View</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>REC-2024-1840</td>
                                <td>2024-12-07</td>
                                <td>Rohan Das (2022-EEE-045)</td>
                                <td> 75,000</td>
                                <td><span class="badge warning">Cheque</span></td>
                                <td><span class="badge warning">Pending Clearance</span></td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="showNotification('Printing receipt...', 'info')">Print</button>
                                        <button class="action-btn" onclick="showNotification('Loading payment details...', 'info')">View</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // Notices Screen
    function getNoticesScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Communications & Notices</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="showNotification('Loading notice history...', 'info')">View History</button>
                        <button class="btn btn-primary btn-sm" onclick="showNotification('Notice creation form opening...', 'info')">Create Notice</button>
                    </div>
                </div>
                
                <div class="table-filters">
                    <input type="text" class="search-input" placeholder="Search notices by title, ID or author..." style="flex: 1;">
                    <button class="filter-select" style="display: flex; align-items: center; gap: 8px;">
                        All Audiences
                    </button>
                    <button class="filter-select">
                        This Month
                    </button>
                </div>
            </div>
            
            <div class="table-container">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Status</th>
                                <th>Notice Title</th>
                                <th>Target Audience</th>
                                <th>Author</th>
                                <th>Published Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="badge success">Published</span></td>
                                <td>
                                    <div style="font-weight: 600;">Fall Semester Exam Schedule</div>
                                    <div style="font-size: 11px; color: #718096;">ID: NOT-2023-892</div>
                                </td>
                                <td>Students</td>
                                <td>Sarah Jenkins</td>
                                <td>Oct 24, 2023</td>
                                <td>
                                    <button class="action-btn" onclick="showNotification('Loading notice...', 'info')">View</button>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="badge info">Scheduled</span></td>
                                <td>
                                    <div style="font-weight: 600;">Payroll System Maintenance</div>
                                    <div style="font-size: 11px; color: #718096;">ID: NOT-2023-901</div>
                                </td>
                                <td>Faculty, Staff</td>
                                <td>Mark Doe</td>
                                <td>Nov 01, 2023</td>
                                <td>
                                    <button class="action-btn" onclick="showNotification('Opening notice editor...', 'info')">Edit</button>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="badge neutral">Draft</span></td>
                                <td>
                                    <div style="font-weight: 600;">Campus Parking Policy Update</div>
                                    <div style="font-size: 11px; color: #718096;">ID: NOT-2023-905</div>
                                </td>
                                <td>Not set</td>
                                <td>You</td>
                                <td></td>
                                <td>
                                    <div class="action-cell">
                                        <button class="action-btn" onclick="showNotification('Opening notice editor...', 'info')">Edit</button>
                                        <button class="action-btn" onclick="showNotification('Deleting notice...', 'warning')">Delete</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="badge success">Published</span></td>
                                <td>
                                    <div style="font-weight: 600;">Library Holiday Hours</div>
                                    <div style="font-size: 11px; color: #718096;">ID: NOT-2023-880</div>
                                </td>
                                <td>All</td>
                                <td>Emily Chen</td>
                                <td>Oct 15, 2023</td>
                                <td>
                                    <button class="action-btn" onclick="showNotification('Loading notice...', 'info')">View</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // Admin Document Signatures Screen
    function getAdminDocumentSignaturesScreen() {
        const activeTab = window.adminDocSignaturesTab || 'pending';
        
        let pendingContent = '';
        if (activeTab === 'pending' || activeTab === 'all') {
            const title = activeTab === 'pending' ? 'Documents Awaiting Your Approval' : 'All Pending Documents';
            pendingContent = '<div class="card"><div class="card-header"><div class="card-title">' + title + '</div><div class="card-meta">Admin review required</div></div><div class="table-container"><table><thead><tr><th>Document ID</th><th>Document Title</th><th>Type</th><th>Initiated By</th><th>Date</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td><strong>DOC-2024-0156</strong></td><td>Budget Allocation - Q1 2024</td><td><span class="badge">Finance</span></td><td>Prof. Amit Singh</td><td>2024-02-01</td><td><span class="status-badge" style="background-color: rgba(255, 152, 0, 0.15); color: #ffb74d; border: 1px solid rgba(255, 152, 0, 0.3);">Awaiting</span></td><td><div class="action-cell"><button class="btn btn-primary" style="padding: 4px 12px; font-size: 12px;" onclick="adminReviewDocument(\'DOC-2024-0156\', \'Budget Allocation - Q1 2024\')">Sign</button><button class="action-btn" onclick="viewAdminSignatureHistory(\'DOC-2024-0156\')">History</button></div></td></tr><tr><td><strong>DOC-2024-0152</strong></td><td>Lab Equipment Procurement</td><td><span class="badge">Procurement</span></td><td>Dr. Sunita Mehta</td><td>2024-01-30</td><td><span class="status-badge" style="background-color: rgba(255, 152, 0, 0.15); color: #ffb74d; border: 1px solid rgba(255, 152, 0, 0.3);">Awaiting</span></td><td><div class="action-cell"><button class="btn btn-primary" style="padding: 4px 12px; font-size: 12px;" onclick="adminReviewDocument(\'DOC-2024-0152\', \'Lab Equipment Procurement\')">Sign</button><button class="action-btn" onclick="viewAdminSignatureHistory(\'DOC-2024-0152\')">History</button></div></td></tr><tr><td><strong>DOC-2024-0148</strong></td><td>Faculty Leave Policy Amendment</td><td><span class="badge">Policy</span></td><td>Dr. Priya Sharma</td><td>2024-01-28</td><td><span class="status-badge" style="background-color: rgba(231, 76, 60, 0.15); color: #e57373; border: 1px solid rgba(231, 76, 60, 0.3);">Urgent</span></td><td><div class="action-cell"><button class="btn btn-primary" style="padding: 4px 12px; font-size: 12px;" onclick="adminReviewDocument(\'DOC-2024-0148\', \'Faculty Leave Policy Amendment\')">Sign</button><button class="action-btn" onclick="viewAdminSignatureHistory(\'DOC-2024-0148\')">History</button></div></td></tr></tbody></table></div></div>';
        }
        
        let progressContent = '';
        if (activeTab === 'in-progress' || activeTab === 'all') {
            const separator = activeTab === 'in-progress' ? '' : '<div class="section-separator"></div>';
            progressContent = separator + '<div class="card"><div class="card-header"><div class="card-title">Documents In Progress</div><div class="card-meta">Signature workflow in progress</div></div><div class="table-container"><table><thead><tr><th>Document ID</th><th>Document Title</th><th>Type</th><th>Current Stage</th><th>Pending With</th><th>Progress</th><th>Actions</th></tr></thead><tbody><tr><td><strong>DOC-2024-0142</strong></td><td>Annual Academic Calendar 2024-25</td><td><span class="badge">Academic</span></td><td>HOD Review</td><td>Dr. Amit Singh (CS HOD)</td><td><div style="display: flex; align-items: center; gap: 8px;"><div style="flex: 1; background-color: rgba(74, 144, 226, 0.1); height: 6px; border-radius: 3px; overflow: hidden; max-width: 100px;"><div style="width: 33%; background-color: #4a90e2; height: 100%;"></div></div><span style="font-size: 11px; color: #999;">1/3</span></div></td><td><button class="btn btn-secondary" style="padding: 4px 10px; font-size: 11px;" onclick="viewAdminSignatureHistory(\'DOC-2024-0142\')">Track</button></td></tr><tr><td><strong>DOC-2024-0138</strong></td><td>Research Grant Application - IoT Lab</td><td><span class="badge">Research</span></td><td>Dean Approval</td><td>Dr. Priya Sharma (Dean)</td><td><div style="display: flex; align-items: center; gap: 8px;"><div style="flex: 1; background-color: rgba(74, 144, 226, 0.1); height: 6px; border-radius: 3px; overflow: hidden; max-width: 100px;"><div style="width: 66%; background-color: #4a90e2; height: 100%;"></div></div><span style="font-size: 11px; color: #999;">2/3</span></div></td><td><button class="btn btn-secondary" style="padding: 4px 10px; font-size: 11px;" onclick="viewAdminSignatureHistory(\'DOC-2024-0138\')">Track</button></td></tr></tbody></table></div></div>';
        }
        
        let completedContent = '';
        if (activeTab === 'completed') {
            completedContent = '<div class="card"><div class="card-header"><div class="card-title">Recently Completed Documents</div><div class="card-meta">All signatures collected</div></div><div class="table-container"><table><thead><tr><th>Document ID</th><th>Document Title</th><th>Type</th><th>Initiated By</th><th>Completed</th><th>Signatures</th><th>Actions</th></tr></thead><tbody><tr><td><strong>DOC-2024-0130</strong></td><td>Mid-Year Performance Review</td><td><span class="badge">Policy</span></td><td>Admin</td><td>2024-01-20</td><td><span style="color: #4caf50; font-weight: 600;">4/4 </span></td><td><div class="action-cell"><button class="action-btn" onclick="downloadAdminSignedDocument(\'DOC-2024-0130\')">Download</button><button class="action-btn" onclick="viewAdminSignatureHistory(\'DOC-2024-0130\')">History</button></div></td></tr><tr><td><strong>DOC-2024-0125</strong></td><td>New Faculty Joining Approval</td><td><span class="badge">HR</span></td><td>HR Dept</td><td>2024-01-18</td><td><span style="color: #4caf50; font-weight: 600;">3/3 </span></td><td><div class="action-cell"><button class="action-btn" onclick="downloadAdminSignedDocument(\'DOC-2024-0125\')">Download</button><button class="action-btn" onclick="viewAdminSignatureHistory(\'DOC-2024-0125\')">History</button></div></td></tr></tbody></table></div></div>';
        }
        
        return '<div class="card"><div class="card-header"><div class="card-title">Document Signature Management</div><div class="card-actions"><button class="btn btn-secondary btn-sm" onclick="showNotification(\'Generating signature report...\', \'info\')">Export Report</button><button class="btn btn-primary btn-sm" onclick="adminInitiateDocument()">+ Create Document</button></div></div><div class="data-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 24px;"><div class="data-card" style="cursor: pointer; text-align: center;" onclick="switchAdminDocSignTab(\'pending\')"><div class="data-card-label">Pending Approval</div><div class="data-card-value" style="color: #ffb74d;">12</div></div><div class="data-card" style="cursor: pointer; text-align: center;" onclick="switchAdminDocSignTab(\'in-progress\')"><div class="data-card-label">In Progress</div><div class="data-card-value" style="color: #4a90e2;">28</div></div><div class="data-card" style="cursor: pointer; text-align: center;" onclick="switchAdminDocSignTab(\'completed\')"><div class="data-card-label">Completed Today</div><div class="data-card-value" style="color: #4caf50;">8</div></div><div class="data-card" style="cursor: pointer; text-align: center;" onclick="switchAdminDocSignTab(\'all\')"><div class="data-card-label">Total Documents</div><div class="data-card-value">156</div></div></div><div style="display: flex; gap: 8px; margin-bottom: 20px; border-bottom: 2px solid rgba(74, 144, 226, 0.1); padding-bottom: 0;"><button class="tab-btn ' + (activeTab === 'pending' ? 'active' : '') + '" onclick="switchAdminDocSignTab(\'pending\')" style="padding: 12px 24px; background: none; border: none; border-bottom: 3px solid ' + (activeTab === 'pending' ? '#4a90e2' : 'transparent') + '; color: ' + (activeTab === 'pending' ? '#4a90e2' : '#999') + '; font-weight: ' + (activeTab === 'pending' ? '600' : '400') + '; cursor: pointer;">Pending <span style="background: #ffb74d; color: white; padding: 2px 8px; border-radius: 10px; font-size: 11px; margin-left: 6px;">12</span></button><button class="tab-btn ' + (activeTab === 'in-progress' ? 'active' : '') + '" onclick="switchAdminDocSignTab(\'in-progress\')" style="padding: 12px 24px; background: none; border: none; border-bottom: 3px solid ' + (activeTab === 'in-progress' ? '#4a90e2' : 'transparent') + '; color: ' + (activeTab === 'in-progress' ? '#4a90e2' : '#999') + '; font-weight: ' + (activeTab === 'in-progress' ? '600' : '400') + '; cursor: pointer;">In Progress</button><button class="tab-btn ' + (activeTab === 'completed' ? 'active' : '') + '" onclick="switchAdminDocSignTab(\'completed\')" style="padding: 12px 24px; background: none; border: none; border-bottom: 3px solid ' + (activeTab === 'completed' ? '#4a90e2' : 'transparent') + '; color: ' + (activeTab === 'completed' ? '#4a90e2' : '#999') + '; font-weight: ' + (activeTab === 'completed' ? '600' : '400') + '; cursor: pointer;">Completed</button><button class="tab-btn ' + (activeTab === 'all' ? 'active' : '') + '" onclick="switchAdminDocSignTab(\'all\')" style="padding: 12px 24px; background: none; border: none; border-bottom: 3px solid ' + (activeTab === 'all' ? '#4a90e2' : 'transparent') + '; color: ' + (activeTab === 'all' ? '#4a90e2' : '#999') + '; font-weight: ' + (activeTab === 'all' ? '600' : '400') + '; cursor: pointer;">All</button></div></div><div class="section-separator"></div>' + pendingContent + progressContent + completedContent + '<div class="section-separator"></div><div class="card"><div class="card-header"><div class="card-title">Signature Workflow Configuration</div><div class="card-meta">Manage document routing and approval chains</div></div><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; padding: 8px 0;"><div style="padding: 16px; background: rgba(74, 144, 226, 0.05); border-radius: 8px; border: 1px solid rgba(74, 144, 226, 0.1);"><div style="font-weight: 600; color: #4a90e2; margin-bottom: 8px;"> Academic Documents</div><div style="font-size: 13px; color: #666; margin-bottom: 12px;">Faculty  HOD  Dean  Admin</div><button class="btn btn-secondary btn-sm" onclick="editSignatureWorkflow(\'academic\')">Configure</button></div><div style="padding: 16px; background: rgba(76, 175, 80, 0.05); border-radius: 8px; border: 1px solid rgba(76, 175, 80, 0.1);"><div style="font-weight: 600; color: #4caf50; margin-bottom: 8px;"> Finance Documents</div><div style="font-size: 13px; color: #666; margin-bottom: 12px;">Initiator  HOD  Finance  Admin</div><button class="btn btn-secondary btn-sm" onclick="editSignatureWorkflow(\'finance\')">Configure</button></div><div style="padding: 16px; background: rgba(255, 152, 0, 0.05); border-radius: 8px; border: 1px solid rgba(255, 152, 0, 0.1);"><div style="font-weight: 600; color: #ffb74d; margin-bottom: 8px;"> Policy Documents</div><div style="font-size: 13px; color: #666; margin-bottom: 12px;">Dean  Admin  Management</div><button class="btn btn-secondary btn-sm" onclick="editSignatureWorkflow(\'policy\')">Configure</button></div><div style="padding: 16px; background: rgba(156, 39, 176, 0.05); border-radius: 8px; border: 1px solid rgba(156, 39, 176, 0.1);"><div style="font-weight: 600; color: #ba68c8; margin-bottom: 8px;"> Research Documents</div><div style="font-size: 13px; color: #666; margin-bottom: 12px;">Researcher  HOD  Dean  Admin</div><button class="btn btn-secondary btn-sm" onclick="editSignatureWorkflow(\'research\')">Configure</button></div></div></div>';
    }

    function switchAdminDocSignTab(tab) {
        window.adminDocSignaturesTab = tab;
        document.getElementById('contentArea').innerHTML = getAdminDocumentSignaturesScreen();
    }

    // Admin Document Signature Functions
    function adminInitiateDocument() {
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <h3>Initiate New Document</h3>
                        <button class="modal-close" onclick="closeModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div class="form-field" style="margin-bottom: 15px;">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Document Title <span style="color: #e57373;">*</span></label>
                            <input type="text" id="adminDocTitle" placeholder="Enter document title" style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                        </div>
                        <div class="form-field" style="margin-bottom: 15px;">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Document Type</label>
                            <select id="adminDocType" style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                                <option value="academic">Academic</option>
                                <option value="administrative">Administrative</option>
                                <option value="finance">Finance</option>
                                <option value="policy">Policy</option>
                                <option value="hr">Human Resources</option>
                                <option value="research">Research</option>
                            </select>
                        </div>
                        <div class="form-field" style="margin-bottom: 15px;">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Send To</label>
                            <select id="adminDocWorkflow" style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                                <option value="dean">Dean</option>
                                <option value="hod">All HODs</option>
                                <option value="faculty">Selected Faculty</option>
                                <option value="management">Management</option>
                            </select>
                        </div>
                        <div class="form-field" style="margin-bottom: 15px;">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Priority Level</label>
                            <select id="adminDocPriority" style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                                <option value="normal">Normal</option>
                                <option value="high">High</option>
                                <option value="urgent">Urgent</option>
                            </select>
                        </div>
                        <div class="form-field" style="margin-bottom: 15px;">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Upload Document</label>
                            <div style="border: 2px dashed #e0e0e0; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;" onclick="document.getElementById('adminDocFileInput').click()">
                                <div style="font-size: 24px; margin-bottom: 5px;"></div>
                                <div style="font-size: 12px; color: #718096;">Click to upload or drag and drop</div>
                                <div style="color: #999; font-size: 11px; margin-top: 4px;">PDF, DOC, DOCX (Max 10MB)</div>
                                <input type="file" id="adminDocFileInput" style="display: none;" accept=".pdf,.doc,.docx">
                            </div>
                        </div>
                        <div class="form-field" style="margin-bottom: 15px;">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Description / Notes</label>
                            <textarea id="adminDocDescription" placeholder="Add any additional notes for signatories..." style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0; min-height: 80px;"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                        <button class="btn btn-primary" onclick="submitAdminDocument()">Send for Signature</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function submitAdminDocument() {
        const title = document.getElementById('adminDocTitle').value;
        if (!title.trim()) {
            showNotification('Please enter a document title', 'error');
            return;
        }
        closeModal();
        showNotification('Document created and sent for signatures!', 'success');
        setTimeout(function() {
            switchAdminDocSignTab('in-progress');
        }, 500);
    }

    function adminReviewDocument(docId, docTitle) {
        const modalHtml = `
            <div id="adminSignDocumentModal" class="modal-overlay active" onclick="if(event.target === this) closeAdminSignModal()">
                <div class="modal-content" style="max-width: 1100px; max-height: 95vh;">
                    <div class="modal-header">
                        <h3>Review & Sign Document Digitally</h3>
                        <button class="modal-close" onclick="closeAdminSignModal()"></button>
                    </div>
                    <div class="modal-body" style="max-height: calc(95vh - 120px); overflow-y: auto;">
                        <div class="data-grid" style="margin-bottom: 20px; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                            <div class="data-card">
                                <div class="data-card-label">Document</div>
                                <div class="data-card-value" style="font-size: 14px;">${docTitle}</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">Document ID</div>
                                <div class="data-card-value" style="font-size: 14px;">${docId}</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">Type</div>
                                <div class="data-card-value" style="font-size: 14px;">Administrative</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">Priority</div>
                                <div class="data-card-value" style="font-size: 14px; color: #ffb74d;">High</div>
                            </div>
                        </div>

                        <!-- PDF Viewer Section -->
                        <div style="background-color: rgba(74, 144, 226, 0.05); border: 1px solid rgba(74, 144, 226, 0.2); border-radius: 8px; padding: 16px; margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                <div style="font-weight: 600; color: #4a90e2;"> Document Preview</div>
                                <div style="display: flex; gap: 8px;">
                                    <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="showNotification('Downloading PDF...', 'info')"> Download PDF</button>
                                </div>
                            </div>
                            <div id="adminPdfViewer" style="background-color: #fff; border: 1px solid #ddd; border-radius: 4px; padding: 20px; min-height: 300px; max-height: 400px; overflow-y: auto; text-align: center;">
                                <div style="background: #f9f9f9; padding: 30px; border-radius: 8px; border: 2px dashed #ddd;">
                                    <svg style="width: 60px; height: 60px; margin-bottom: 12px; opacity: 0.4; color: #4a90e2;" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"/>
                                    </svg>
                                    <div style="font-weight: 600; color: #333; margin-bottom: 8px;">${docTitle}.pdf</div>
                                    <div style="color: #666; font-size: 13px; margin-bottom: 16px;">Please review the document carefully before signing</div>
                                    <div style="background: white; padding: 20px; border-radius: 6px; margin: 16px auto; max-width: 600px; text-align: left; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                        <h4 style="color: #4a90e2; margin-bottom: 12px;"> ${docTitle}</h4>
                                        <p style="color: #555; line-height: 1.8; margin-bottom: 10px;"><strong>Summary:</strong> This document requires your final administrative approval.</p>
                                        <p style="color: #555; line-height: 1.8; margin-bottom: 10px;"><strong>Department:</strong> Computer Science</p>
                                        <p style="color: #555; line-height: 1.8; margin-bottom: 10px;"><strong>Submitted Date:</strong> February 1, 2024</p>
                                        <hr style="margin: 16px 0; border: none; border-top: 1px solid #eee;">
                                        <p style="color: #777; font-size: 13px; font-style: italic;">This document has been reviewed and approved by all previous signatories.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Signature Workflow -->
                        <div style="background-color: rgba(76, 175, 80, 0.05); border: 1px solid rgba(76, 175, 80, 0.2); border-radius: 8px; padding: 16px; margin-bottom: 20px;">
                            <div style="font-weight: 500; margin-bottom: 12px;">Signature Workflow</div>
                            <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap;">
                                <div style="flex: 0 0 auto; padding: 8px 12px; background-color: #81c784; color: white; border-radius: 4px; font-size: 12px;"> Dr. Rajesh Kumar</div>
                                <div style="flex: 0 0 20px; height: 2px; background-color: #81c784;"></div>
                                <div style="flex: 0 0 auto; padding: 8px 12px; background-color: #81c784; color: white; border-radius: 4px; font-size: 12px;"> Dr. Amit Singh (HOD)</div>
                                <div style="flex: 0 0 20px; height: 2px; background-color: #81c784;"></div>
                                <div style="flex: 0 0 auto; padding: 8px 12px; background-color: #81c784; color: white; border-radius: 4px; font-size: 12px;"> Dr. Priya Sharma (Dean)</div>
                                <div style="flex: 0 0 20px; height: 2px; background-color: #ffb74d;"></div>
                                <div style="flex: 0 0 auto; padding: 8px 12px; background-color: #ffb74d; color: white; border-radius: 4px; font-size: 12px;"> Admin (You)</div>
                            </div>
                        </div>

                        <!-- Digital Signature Pad -->
                        <div style="background-color: rgba(76, 175, 80, 0.05); border: 1px solid rgba(76, 175, 80, 0.3); border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                <div style="font-weight: 600; color: #4caf50;"> Draw Your Digital Signature</div>
                                <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="clearAdminSignaturePad()"> Clear</button>
                            </div>
                            <div style="background: white; border: 2px solid #4caf50; border-radius: 8px; overflow: hidden; margin-bottom: 12px;">
                                <canvas id="adminSignaturePad" width="800" height="200" style="display: block; cursor: crosshair; touch-action: none; width: 100%;"></canvas>
                            </div>
                            <div style="color: #666; font-size: 12px; text-align: center;">
                                 Draw your signature using mouse or touchpad | Signature will be applied to the document
                            </div>
                        </div>

                        <!-- How It Works -->
                        <div style="background-color: rgba(74, 144, 226, 0.05); border: 1px solid rgba(74, 144, 226, 0.2); border-radius: 8px; padding: 16px; margin-bottom: 20px;">
                            <div style="font-weight: 500; margin-bottom: 8px; color: #4a90e2;"> How It Works</div>
                            <div style="color: #666; font-size: 13px; line-height: 1.8;">
                                 <strong>Step 1:</strong> Review the document above<br>
                                 <strong>Step 2:</strong> Draw your signature in the signature pad<br>
                                 <strong>Step 3:</strong> Add any remarks (optional)<br>
                                 <strong>Step 4:</strong> Click "Apply Signature & Approve"<br>
                                 <strong>Step 5:</strong> Document will be marked as fully approved
                            </div>
                        </div>

                        <div class="form-group" style="margin-bottom: 16px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 500;">Signature Verification</label>
                            <div id="adminSignatureStatus" style="background: rgba(255, 152, 0, 0.05); border: 1px solid rgba(255, 152, 0, 0.2); padding: 12px; border-radius: 6px;">
                                <div style="display: flex; align-items: center; gap: 8px; color: #ffb74d; font-size: 13px;">
                                    <span></span>
                                    <span>Please draw your signature above to enable submission</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group" style="margin-bottom: 16px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 500;">Remarks / Comments (Optional)</label>
                            <textarea id="adminSignRemarks" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; min-height: 60px;" placeholder="Any comments or notes regarding this signature"></textarea>
                        </div>

                        <div class="form-group" style="margin-bottom: 20px;">
                            <label style="display: flex; align-items: flex-start; gap: 8px; cursor: pointer;">
                                <input type="checkbox" id="adminSignConfirm" required style="margin-top: 3px;"> 
                                <span style="font-weight: 500;">I confirm that I have reviewed the document and my digital signature represents my approval</span>
                            </label>
                        </div>

                        <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px;">
                            <button class="btn" style="background: rgba(231, 76, 60, 0.1); color: #e57373; border: 1px solid rgba(231, 76, 60, 0.3);" onclick="rejectAdminDocument('${docId}')">Reject Document</button>
                            <button class="btn btn-secondary" onclick="closeAdminSignModal()">Cancel</button>
                            <button class="btn btn-primary" id="adminSubmitSignatureBtn" onclick="submitAdminSignature('${docId}')">
                                <svg style="width: 14px; height: 14px; margin-right: 6px; vertical-align: middle;" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                    <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                </svg>
                                Apply Signature & Approve
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
        initAdminSignaturePad();
    }

    function initAdminSignaturePad() {
        setTimeout(function() {
            const canvas = document.getElementById('adminSignaturePad');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            window.adminSignatureData = null;

            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';

            function startDrawing(e) {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;
                lastX = (e.clientX - rect.left) * scaleX;
                lastY = (e.clientY - rect.top) * scaleY;
            }

            function draw(e) {
                if (!isDrawing) return;
                const rect = canvas.getBoundingClientRect();
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;
                const x = (e.clientX - rect.left) * scaleX;
                const y = (e.clientY - rect.top) * scaleY;

                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(x, y);
                ctx.stroke();
                lastX = x;
                lastY = y;

                window.adminSignatureData = canvas.toDataURL();
                const statusEl = document.getElementById('adminSignatureStatus');
                if (statusEl) {
                    statusEl.innerHTML = '<div style="display: flex; align-items: center; gap: 8px; color: #4caf50; font-size: 13px;"><span></span><span>Signature captured successfully</span></div>';
                    statusEl.style.background = 'rgba(76, 175, 80, 0.05)';
                    statusEl.style.borderColor = 'rgba(76, 175, 80, 0.2)';
                }
            }

            function stopDrawing() { isDrawing = false; }

            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);

            canvas.addEventListener('touchstart', function(e) {
                e.preventDefault();
                const touch = e.touches[0];
                startDrawing({ clientX: touch.clientX, clientY: touch.clientY });
            });
            canvas.addEventListener('touchmove', function(e) {
                e.preventDefault();
                const touch = e.touches[0];
                draw({ clientX: touch.clientX, clientY: touch.clientY });
            });
            canvas.addEventListener('touchend', function(e) {
                e.preventDefault();
                stopDrawing();
            });
        }, 100);
    }

    function clearAdminSignaturePad() {
        const canvas = document.getElementById('adminSignaturePad');
        if (canvas) {
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            window.adminSignatureData = null;
            const statusEl = document.getElementById('adminSignatureStatus');
            if (statusEl) {
                statusEl.innerHTML = '<div style="display: flex; align-items: center; gap: 8px; color: #ffb74d; font-size: 13px;"><span></span><span>Please draw your signature above to enable submission</span></div>';
                statusEl.style.background = 'rgba(255, 152, 0, 0.05)';
                statusEl.style.borderColor = 'rgba(255, 152, 0, 0.2)';
            }
        }
    }

    function closeAdminSignModal() {
        const modal = document.getElementById('adminSignDocumentModal');
        if (modal) modal.remove();
    }

    function submitAdminSignature(docId) {
        const checkbox = document.getElementById('adminSignConfirm');
        if (!checkbox || !checkbox.checked) {
            showNotification('Please confirm that you have reviewed the document', 'error');
            return;
        }
        closeAdminSignModal();
        showNotification(' Document signed and approved successfully!', 'success');
        setTimeout(function() {
            switchAdminDocSignTab('completed');
        }, 500);
    }

    function rejectAdminDocument(docId) {
        closeAdminSignModal();
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
                <div class="modal-content" style="max-width: 450px;">
                    <div class="modal-header">
                        <h3>Reject Document</h3>
                        <button class="modal-close" onclick="closeModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div style="padding: 16px; background: rgba(231, 76, 60, 0.1); border-radius: 8px; margin-bottom: 16px;">
                            <div style="font-weight: 600; color: #e57373; margin-bottom: 4px;"> Warning</div>
                            <div style="font-size: 13px; color: #666;">This will reject the document and return it to the initiator for revision.</div>
                        </div>
                        <div class="form-field">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Reason for Rejection <span style="color: #e57373;">*</span></label>
                            <textarea id="rejectReason" placeholder="Please provide the reason for rejection..." style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0; min-height: 100px;"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                        <button class="btn" style="background: #e57373; color: white;" onclick="confirmRejectAdminDocument('${docId}')">Confirm Rejection</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function confirmRejectAdminDocument(docId) {
        const reason = document.getElementById('rejectReason').value;
        if (!reason.trim()) {
            showNotification('Please provide a reason for rejection', 'error');
            return;
        }
        closeModal();
        showNotification('Document rejected and returned to initiator', 'info');
    }

    function viewAdminSignatureHistory(docId) {
        const modalHtml = `
            <div id="adminSignatureHistoryModal" class="modal-overlay active" onclick="if(event.target === this) closeAdminSignatureHistoryModal()">
                <div class="modal-content" style="max-width: 800px;">
                    <div class="modal-header">
                        <h3>Document Signature History</h3>
                        <button class="modal-close" onclick="closeAdminSignatureHistoryModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div style="margin-bottom: 20px;">
                            <div style="font-weight: 600; margin-bottom: 4px;">Budget Allocation - Q1 2024</div>
                            <div style="color: #999; font-size: 13px;">Document ID: ${docId}</div>
                        </div>

                        <div style="background-color: rgba(74, 144, 226, 0.05); border-left: 4px solid #4a90e2; padding: 16px; border-radius: 4px; margin-bottom: 24px;">
                            <div style="font-weight: 500; margin-bottom: 4px;">Current Status</div>
                            <div style="color: #ffb74d; font-weight: 600;">Awaiting Admin Approval</div>
                        </div>

                        <div style="position: relative; padding-left: 32px;">
                            <!-- Timeline item 1 -->
                            <div style="position: relative; padding-bottom: 32px;">
                                <div style="position: absolute; left: -32px; top: 0; width: 24px; height: 24px; background-color: #81c784; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <svg style="width: 14px; height: 14px; color: white;" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                    </svg>
                                </div>
                                <div style="position: absolute; left: -20px; top: 28px; bottom: 0; width: 2px; background-color: #81c784;"></div>
                                <div>
                                    <div style="font-weight: 600;">Document Initiated</div>
                                    <div style="color: #666; font-size: 13px; margin-top: 4px;">By: Dr. Rajesh Kumar (Initiator)</div>
                                    <div style="color: #999; font-size: 12px; margin-top: 2px;">Jan 25, 2024 at 10:30 AM</div>
                                </div>
                            </div>

                            <!-- Timeline item 2 -->
                            <div style="position: relative; padding-bottom: 32px;">
                                <div style="position: absolute; left: -32px; top: 0; width: 24px; height: 24px; background-color: #81c784; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <svg style="width: 14px; height: 14px; color: white;" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>
                                    </svg>
                                </div>
                                <div style="position: absolute; left: -20px; top: 28px; bottom: 0; width: 2px; background-color: #81c784;"></div>
                                <div>
                                    <div style="font-weight: 600;">Signed by HOD</div>
                                    <div style="color: #666; font-size: 13px; margin-top: 4px;">Dr. Amit Singh - Signature Method: Digital Certificate</div>
                                    <div style="color: #999; font-size: 12px; margin-top: 2px;">Jan 28, 2024 at 2:45 PM</div>
                                    <div style="margin-top: 8px;">
                                        <button class="btn btn-secondary" style="padding: 4px 10px; font-size: 11px;" onclick="showNotification('Downloading signed version...', 'info')">View Signed Copy</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Timeline item 3 -->
                            <div style="position: relative; padding-bottom: 32px;">
                                <div style="position: absolute; left: -32px; top: 0; width: 24px; height: 24px; background-color: #81c784; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <svg style="width: 14px; height: 14px; color: white;" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>
                                    </svg>
                                </div>
                                <div style="position: absolute; left: -20px; top: 28px; bottom: 0; width: 2px; background-color: #ffb74d;"></div>
                                <div>
                                    <div style="font-weight: 600;">Signed by Dean</div>
                                    <div style="color: #666; font-size: 13px; margin-top: 4px;">Dr. Priya Sharma - Signature Method: Digital Certificate</div>
                                    <div style="color: #999; font-size: 12px; margin-top: 2px;">Jan 30, 2024 at 11:15 AM</div>
                                    <div style="margin-top: 8px;">
                                        <button class="btn btn-secondary" style="padding: 4px 10px; font-size: 11px;" onclick="showNotification('Downloading signed version...', 'info')">View Signed Copy</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Timeline item 4 -->
                            <div style="position: relative;">
                                <div style="position: absolute; left: -32px; top: 0; width: 24px; height: 24px; background-color: #ffb74d; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <div style="width: 10px; height: 10px; background-color: white; border-radius: 50%;"></div>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: #ffb74d;">Pending: Admin Approval</div>
                                    <div style="color: #666; font-size: 13px; margin-top: 4px;">Forwarded: Jan 30, 2024 at 11:16 AM</div>
                                    <div style="margin-top: 8px;">
                                        <button class="btn btn-primary" style="padding: 6px 12px; font-size: 12px;" onclick="closeAdminSignatureHistoryModal(); adminReviewDocument('${docId}', 'Budget Allocation - Q1 2024')">Review & Sign Now</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 32px; padding-top: 20px; border-top: 1px solid #eee;">
                            <button class="btn btn-secondary" onclick="downloadAdminSignedDocument('${docId}')">Download Current Version</button>
                            <button class="btn" onclick="closeAdminSignatureHistoryModal()">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function closeAdminSignatureHistoryModal() {
        const modal = document.getElementById('adminSignatureHistoryModal');
        if (modal) modal.remove();
    }

    function downloadAdminSignedDocument(docId) {
        showNotification('Downloading signed document ' + docId + '...', 'info');
        setTimeout(function() {
            showNotification('Document downloaded successfully!', 'success');
        }, 1500);
    }

    function editSignatureWorkflow(workflowType) {
        showNotification('Opening ' + workflowType + ' workflow configuration...', 'info');
    }

    // Audit Logs Screen
    function getAuditLogsScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">System Audit Logs</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportData('Audit Logs')">Export Logs</button>
                    </div>
                </div>
                
                <p style="padding: 20px; color: #718096;">
                    Audit logs track all system activities for security and compliance:
                    <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
                        <li>User login/logout activities</li>
                        <li>Data modifications and deletions</li>
                        <li>Permission changes</li>
                        <li>Financial transactions</li>
                        <li>System configuration changes</li>
                        <li>Failed access attempts</li>
                    </ul>
                </p>
                
                <div class="table-filters">
                    <select class="filter-select">
                        <option>All Activities</option>
                        <option>Login/Logout</option>
                        <option>Data Modification</option>
                        <option>Financial</option>
                        <option>Security</option>
                    </select>
                    <select class="filter-select">
                        <option>All Users</option>
                        <option>Admin</option>
                        <option>Faculty</option>
                        <option>Staff</option>
                    </select>
                    <input type="date" class="filter-select">
                    <input type="text" class="search-input" placeholder="Search logs...">
                </div>
            </div>
            
            <div class="table-container">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Timestamp</th>
                                <th>User</th>
                                <th>Action</th>
                                <th>Module</th>
                                <th>IP Address</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2024-12-08 14:45:23</td>
                                <td>admin@college.edu</td>
                                <td>Login Successful</td>
                                <td>Authentication</td>
                                <td>192.168.1.105</td>
                                <td><span class="badge success">Success</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 14:23:15</td>
                                <td>sarah.j@college.edu</td>
                                <td>Updated Course Syllabus</td>
                                <td>Academics</td>
                                <td>192.168.1.142</td>
                                <td><span class="badge success">Success</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 14:15:08</td>
                                <td>admin@college.edu</td>
                                <td>Published Exam Schedule</td>
                                <td>Academics</td>
                                <td>192.168.1.105</td>
                                <td><span class="badge success">Success</span></td>
                            </tr>
                            <tr style="background: rgba(231, 76, 60, 0.05);">
                                <td>2024-12-08 13:58:42</td>
                                <td>unknown@external.com</td>
                                <td>Failed Login Attempt</td>
                                <td>Authentication</td>
                                <td>203.45.128.92</td>
                                <td><span class="badge danger">Failed</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-08 13:45:10</td>
                                <td>finance@college.edu</td>
                                <td>Processed Payment</td>
                                <td>Finance</td>
                                <td>192.168.1.180</td>
                                <td><span class="badge success">Success</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // System Health Screen
    function getSystemHealthScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">System Health Monitor</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="showNotification('Refreshing system status...', 'info')">Refresh</button>
                        <button class="btn btn-primary btn-sm" onclick="showNotification('Running diagnostics...', 'info')">Run Diagnostics</button>
                    </div>
                </div>
                
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">System Uptime</span>
                            <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></div>
                        </div>
                        <div class="kpi-value">99.8%</div>
                        <div class="kpi-change positive">45 days, 12 hours</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">CPU Usage</span>
                            <div class="kpi-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg></div>
                        </div>
                        <div class="kpi-value">42%</div>
                        <div class="kpi-change positive">Normal load</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Memory Usage</span>
                            <div class="kpi-icon orange"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3M12 17h.01"/></svg></div>
                        </div>
                        <div class="kpi-value">68%</div>
                        <div class="kpi-change neutral">12.8 GB / 19 GB</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Disk Space</span>
                            <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg></div>
                        </div>
                        <div class="kpi-value">54%</div>
                        <div class="kpi-change positive">542 GB / 1 TB</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Database</span>
                            <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="4" width="16" height="16" rx="2" ry="2"/><path d="M9 9h6M9 15h6"/></svg></div>
                        </div>
                        <div class="kpi-value">Healthy</div>
                        <div class="kpi-change positive">All connections stable</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">API Response</span>
                            <div class="kpi-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></div>
                        </div>
                        <div class="kpi-value">142 ms</div>
                        <div class="kpi-change positive">Avg response time</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Active Users</span>
                            <div class="kpi-icon purple"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/></svg></div>
                        </div>
                        <div class="kpi-value">284</div>
                        <div class="kpi-change positive">Currently online</div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Last Backup</span>
                            <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg></div>
                        </div>
                        <div class="kpi-value">2 hrs ago</div>
                        <div class="kpi-change positive">Successful</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">Service Status</h3>
                <div style="display: flex; flex-direction: column; gap: 12px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f7fafc; border-radius: 6px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="width: 10px; height: 10px; border-radius: 50%; background: #2ecc71;"></div>
                            <div>
                                <div style="font-weight: 600;">Web Application</div>
                                <div style="font-size: 12px; color: #718096;">Main ERP Interface</div>
                            </div>
                        </div>
                        <span class="badge success">Running</span>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f7fafc; border-radius: 6px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="width: 10px; height: 10px; border-radius: 50%; background: #2ecc71;"></div>
                            <div>
                                <div style="font-weight: 600;">Database Server</div>
                                <div style="font-size: 12px; color: #718096;">MySQL 8.0</div>
                            </div>
                        </div>
                        <span class="badge success">Running</span>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f7fafc; border-radius: 6px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="width: 10px; height: 10px; border-radius: 50%; background: #2ecc71;"></div>
                            <div>
                                <div style="font-weight: 600;">Email Service</div>
                                <div style="font-size: 12px; color: #718096;">SMTP Gateway</div>
                            </div>
                        </div>
                        <span class="badge success">Running</span>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f7fafc; border-radius: 6px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="width: 10px; height: 10px; border-radius: 50%; background: #2ecc71;"></div>
                            <div>
                                <div style="font-weight: 600;">Payment Gateway</div>
                                <div style="font-size: 12px; color: #718096;">Online Payments</div>
                            </div>
                        </div>
                        <span class="badge success">Running</span>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #fff3cd; border-radius: 6px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="width: 10px; height: 10px; border-radius: 50%; background: #e67e22;"></div>
                            <div>
                                <div style="font-weight: 600;">SMS Service</div>
                                <div style="font-size: 12px; color: #718096;">Notifications</div>
                            </div>
                        </div>
                        <span class="badge warning">Degraded</span>
                    </div>
                </div>
            </div>
        `;
    }

    // Detail View Functions
    function viewStudentDetails(studentId) {
        const students = {
            'STU-001': {
                id: 'STU-001',
                name: 'John Smith',
                email: 'john.smith@student.college.edu',
                phone: '+91 98765 43210',
                department: 'Computer Science',
                year: '3rd Year',
                semester: '6th',
                batch: '2022-2026',
                enrollmentDate: 'August 15, 2022',
                status: 'Active',
                attendance: '87%',
                cgpa: '8.5',
                address: '123 Main Street, City, State - 123456',
                guardianName: 'Robert Smith',
                guardianContact: '+91 98765 00000',
                courses: ['Data Structures', 'Algorithms', 'Database Management', 'Web Development', 'Operating Systems']
            },
            'STU-002': {
                id: 'STU-002',
                name: 'Emily Davis',
                email: 'emily.davis@student.college.edu',
                phone: '+91 98765 43211',
                department: 'Computer Science',
                year: '2nd Year',
                semester: '4th',
                batch: '2023-2027',
                enrollmentDate: 'August 10, 2023',
                status: 'Active',
                attendance: '92%',
                cgpa: '9.2',
                address: '456 Oak Avenue, City, State - 123457',
                guardianName: 'James Davis',
                guardianContact: '+91 98765 00001',
                courses: ['Object Oriented Programming', 'Data Structures', 'Discrete Mathematics', 'Computer Networks']
            }
        };
        
        const student = students[studentId] || students['STU-001'];
        
        const contentArea = document.getElementById('contentArea');
        document.getElementById('pageTitle').textContent = 'Student Details';
        
        contentArea.innerHTML = `
            <button class="back-btn" onclick="goBack()">
                 Back
            </button>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">${student.name}</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="showNotification('Opening profile editor...', 'info')">Edit Profile</button>
                        <button class="btn btn-primary btn-sm" onclick="showNotification('Generating report...', 'info')">Generate Report</button>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px;">
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Student ID</label>
                        <div style="font-size: 14px; font-weight: 500;">${student.id}</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Email</label>
                        <div style="font-size: 14px; font-weight: 500;">${student.email}</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Phone</label>
                        <div style="font-size: 14px; font-weight: 500;">${student.phone}</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Department</label>
                        <div style="font-size: 14px; font-weight: 500;">${student.department}</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Year / Semester</label>
                        <div style="font-size: 14px; font-weight: 500;">${student.year} - ${student.semester}</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Batch</label>
                        <div style="font-size: 14px; font-weight: 500;">${student.batch}</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Status</label>
                        <div><span class="badge success">${student.status}</span></div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Attendance</label>
                        <div style="font-size: 14px; font-weight: 500;">${student.attendance}</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">CGPA</label>
                        <div style="font-size: 14px; font-weight: 500;">${student.cgpa}</div>
                    </div>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;">
                <div class="card">
                    <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">Personal Information</h3>
                    <div style="display: flex; flex-direction: column; gap: 16px;">
                        <div>
                            <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600;">Enrollment Date</label>
                            <div style="font-size: 14px;">${student.enrollmentDate}</div>
                        </div>
                        <div>
                            <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600;">Address</label>
                            <div style="font-size: 14px;">${student.address}</div>
                        </div>
                        <div>
                            <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600;">Guardian Name</label>
                            <div style="font-size: 14px;">${student.guardianName}</div>
                        </div>
                        <div>
                            <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600;">Guardian Contact</label>
                            <div style="font-size: 14px;">${student.guardianContact}</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">Enrolled Courses</h3>
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        ${student.courses.map(course => `
                            <div style="padding: 12px; background: #f8f9fc; border-radius: 8px; border-left: 3px solid #4a90e2;">
                                <div style="font-weight: 600; font-size: 14px;">${course}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">Academic Performance</h3>
                <div class="kpi-grid" style="grid-template-columns: repeat(4, 1fr);">
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Overall CGPA</span>
                            <div class="kpi-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg></div>
                        </div>
                        <div class="kpi-value">${student.cgpa}</div>
                        <div class="kpi-change positive">Out of 10.0</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Attendance</span>
                            <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></div>
                        </div>
                        <div class="kpi-value">${student.attendance}</div>
                        <div class="kpi-change positive">Above requirement</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Completed Credits</span>
                            <div class="kpi-icon purple"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3L1 9l11 6 11-6-11-6z"/><path d="M5 13l7 4 7-4M5 13v6l7 4 7-4v-6"/></svg></div>
                        </div>
                        <div class="kpi-value">78</div>
                        <div class="kpi-change neutral">Out of 120</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Active Courses</span>
                            <div class="kpi-icon orange"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg></div>
                        </div>
                        <div class="kpi-value">${student.courses.length}</div>
                        <div class="kpi-change neutral">This semester</div>
                    </div>
                </div>
            </div>
        `;
    }

    function viewUserDetails(userId) {
        const contentArea = document.getElementById('contentArea');
        document.getElementById('pageTitle').textContent = 'User Details';
        
        contentArea.innerHTML = `
            <button class="back-btn" onclick="goBack()">
                 Back
            </button>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Dr. Sarah Johnson</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="showNotification('Opening user editor...', 'info')">Edit User</button>
                        <button class="btn btn-danger btn-sm" onclick="showNotification('Confirm deactivation?', 'warning')">Deactivate</button>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px;">
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">User ID</label>
                        <div style="font-size: 14px; font-weight: 500;">USR-001</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Email</label>
                        <div style="font-size: 14px; font-weight: 500;">sarah.j@college.edu</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Role</label>
                        <div><span class="badge info">Faculty</span></div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Department</label>
                        <div style="font-size: 14px; font-weight: 500;">Computer Science</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Status</label>
                        <div><span class="badge success">Active</span></div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Last Login</label>
                        <div style="font-size: 14px; font-weight: 500;">2024-12-08 14:23</div>
                    </div>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;">
                <div class="card">
                    <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">User Permissions</h3>
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px; background: #f8f9fc; border-radius: 6px;">
                            <span>View Students</span>
                            <span class="badge success">Granted</span>
                        </div>
                        <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px; background: #f8f9fc; border-radius: 6px;">
                            <span>Manage Attendance</span>
                            <span class="badge success">Granted</span>
                        </div>
                        <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px; background: #f8f9fc; border-radius: 6px;">
                            <span>Submit Grades</span>
                            <span class="badge success">Granted</span>
                        </div>
                        <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px; background: #f8f9fc; border-radius: 6px;">
                            <span>Manage Users</span>
                            <span class="badge danger">Denied</span>
                        </div>
                        <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px; background: #f8f9fc; border-radius: 6px;">
                            <span>System Settings</span>
                            <span class="badge danger">Denied</span>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">Recent Activity</h3>
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <div style="padding: 12px; border-left: 3px solid #4a90e2; background: #f8f9fc; border-radius: 4px;">
                            <div style="font-weight: 600; font-size: 13px; margin-bottom: 4px;">Updated Course Syllabus</div>
                            <div style="font-size: 12px; color: #718096;">2 hours ago</div>
                        </div>
                        <div style="padding: 12px; border-left: 3px solid #27ae60; background: #f8f9fc; border-radius: 4px;">
                            <div style="font-weight: 600; font-size: 13px; margin-bottom: 4px;">Submitted Grades for CS301</div>
                            <div style="font-size: 12px; color: #718096;">1 day ago</div>
                        </div>
                        <div style="padding: 12px; border-left: 3px solid #4a90e2; background: #f8f9fc; border-radius: 4px;">
                            <div style="font-weight: 600; font-size: 13px; margin-bottom: 4px;">Marked Attendance</div>
                            <div style="font-size: 12px; color: #718096;">2 days ago</div>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    function viewCourseDetails(courseId) {
        const contentArea = document.getElementById('contentArea');
        document.getElementById('pageTitle').textContent = 'Course Details';
        
        contentArea.innerHTML = `
            <button class="back-btn" onclick="goBack()">
                 Back
            </button>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Introduction to Programming - CS101</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="showNotification('Opening course editor...', 'info')">Edit Course</button>
                        <button class="btn btn-primary btn-sm" onclick="showNotification('Loading schedule...', 'info')">View Schedule</button>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px;">
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Course Code</label>
                        <div style="font-size: 14px; font-weight: 500;">CS101</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Department</label>
                        <div style="font-size: 14px; font-weight: 500;">Computer Science</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Credits</label>
                        <div style="font-size: 14px; font-weight: 500;">4 Credits</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Instructor</label>
                        <div style="font-size: 14px; font-weight: 500;">Dr. Sarah Johnson</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Enrolled Students</label>
                        <div style="font-size: 14px; font-weight: 500;">145 Students</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Status</label>
                        <div><span class="badge success">Active</span></div>
                    </div>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;">
                <div class="card">
                    <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">Course Description</h3>
                    <p style="line-height: 1.6; color: #4a5568;">
                        This course introduces fundamental concepts of computer programming using Python. Students will learn about variables, data types, control structures, functions, and object-oriented programming basics. The course includes hands-on lab sessions and programming assignments.
                    </p>
                    
                    <h4 style="font-size: 14px; font-weight: 600; margin-top: 20px; margin-bottom: 12px;">Learning Outcomes</h4>
                    <ul style="margin-left: 20px; line-height: 1.8; color: #4a5568;">
                        <li>Understand basic programming concepts and syntax</li>
                        <li>Write, debug, and test Python programs</li>
                        <li>Apply problem-solving techniques to programming challenges</li>
                        <li>Implement object-oriented programming principles</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">Course Statistics</h3>
                    <div class="kpi-grid" style="grid-template-columns: repeat(2, 1fr);">
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <span class="kpi-label">Avg. Attendance</span>
                                <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></div>
                            </div>
                            <div class="kpi-value">88%</div>
                            <div class="kpi-change positive">Above target</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <span class="kpi-label">Pass Rate</span>
                                <div class="kpi-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg></div>
                            </div>
                            <div class="kpi-value">92%</div>
                            <div class="kpi-change positive">Last semester</div>
                        </div>
                    </div>
                    
                    <h4 style="font-size: 14px; font-weight: 600; margin-top: 20px; margin-bottom: 12px;">Schedule</h4>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <div style="padding: 10px; background: #f8f9fc; border-radius: 6px;">
                            <strong>Monday:</strong> 10:00 AM - 11:30 AM (Room 301)
                        </div>
                        <div style="padding: 10px; background: #f8f9fc; border-radius: 6px;">
                            <strong>Wednesday:</strong> 10:00 AM - 11:30 AM (Room 301)
                        </div>
                        <div style="padding: 10px; background: #f8f9fc; border-radius: 6px;">
                            <strong>Friday:</strong> 2:00 PM - 4:00 PM (Lab 102)
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    // Configurations Screen
    function getConfigurationsScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">System Configurations</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="showNotification('Resetting to defaults...', 'warning')">Reset Defaults</button>
                        <button class="btn btn-primary btn-sm" onclick="showNotification('Saving changes...', 'success')">Save Changes</button>
                    </div>
                </div>
                
                <p style="padding: 20px; color: #718096;">
                    Configure global system settings and parameters:
                    <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
                        <li>Institution details and branding</li>
                        <li>Academic calendar settings</li>
                        <li>User roles and permissions</li>
                        <li>Email and notification templates</li>
                        <li>Payment gateway configuration</li>
                        <li>Backup and security settings</li>
                    </ul>
                </p>
            </div>
            
            <div class="card">
                <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">Institution Details</h3>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                    <div>
                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 8px;">Institution Name</label>
                        <input type="text" class="search-input" style="width: 100%;" value="College Name">
                    </div>
                    <div>
                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 8px;">Institution Code</label>
                        <input type="text" class="search-input" style="width: 100%;" value="INST-2024-001">
                    </div>
                    <div>
                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 8px;">Email</label>
                        <input type="email" class="search-input" style="width: 100%;" value="admin@college.edu">
                    </div>
                    <div>
                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 8px;">Phone</label>
                        <input type="tel" class="search-input" style="width: 100%;" value="+91 123 456 7890">
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">Academic Settings</h3>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                    <div>
                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 8px;">Current Academic Year</label>
                        <select class="filter-select" style="width: 100%;">
                            <option>2024 - 2025</option>
                            <option>2023 - 2024</option>
                        </select>
                    </div>
                    <div>
                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 8px;">Current Term</label>
                        <select class="filter-select" style="width: 100%;">
                            <option>Fall Semester</option>
                            <option>Spring Semester</option>
                            <option>Summer Term</option>
                        </select>
                    </div>
                    <div>
                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 8px;">Minimum Attendance %</label>
                        <input type="number" class="search-input" style="width: 100%;" value="75">
                    </div>
                    <div>
                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 8px;">Passing Grade</label>
                        <input type="text" class="search-input" style="width: 100%;" value="40%">
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">System Preferences</h3>
                <div style="display: flex; flex-direction: column; gap: 16px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 4px;">Email Notifications</div>
                            <div style="font-size: 12px; color: #718096;">Send automated email notifications to users</div>
                        </div>
                        <label style="position: relative; display: inline-block; width: 44px; height: 24px;">
                            <input type="checkbox" checked style="opacity: 0; width: 0; height: 0;">
                            <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #4a90e2; transition: .4s; border-radius: 24px;"></span>
                        </label>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 4px;">SMS Notifications</div>
                            <div style="font-size: 12px; color: #718096;">Send SMS for critical updates</div>
                        </div>
                        <label style="position: relative; display: inline-block; width: 44px; height: 24px;">
                            <input type="checkbox" checked style="opacity: 0; width: 0; height: 0;">
                            <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #4a90e2; transition: .4s; border-radius: 24px;"></span>
                        </label>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 4px;">Two-Factor Authentication</div>
                            <div style="font-size: 12px; color: #718096;">Require 2FA for admin accounts</div>
                        </div>
                        <label style="position: relative; display: inline-block; width: 44px; height: 24px;">
                            <input type="checkbox" style="opacity: 0; width: 0; height: 0;">
                            <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #cbd5e0; transition: .4s; border-radius: 24px;"></span>
                        </label>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 4px;">Auto Backup</div>
                            <div style="font-size: 12px; color: #718096;">Automatic daily database backup at 2:00 AM</div>
                        </div>
                        <label style="position: relative; display: inline-block; width: 44px; height: 24px;">
                            <input type="checkbox" checked style="opacity: 0; width: 0; height: 0;">
                            <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #4a90e2; transition: .4s; border-radius: 24px;"></span>
                        </label>
                    </div>
                </div>
            </div>
        `;
    }
    
    // Profile Screen
    function getProfileScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">My Profile</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="showNotification('Opening profile settings...', 'info')">Change Password</button>
                        <button class="btn btn-primary btn-sm" onclick="showNotification('Profile updated successfully!', 'success')">Save Changes</button>
                    </div>
                </div>
            </div>

            <div class="grid-2" style="margin-top: 20px;">
                <div class="card">
                    <div class="profile-avatar-lg">AD</div>
                    <h2 class="profile-name">Admin User</h2>
                    <p class="profile-role">System Administrator</p>
                    <div style="display: flex; gap: 10px; justify-content: center; margin-bottom: 20px;">
                        <button class="btn btn-primary btn-sm" onclick="showNotification('Edit mode enabled', 'info')">Edit Profile</button>
                        <button class="btn btn-secondary btn-sm" onclick="showNotification('Opening password change dialog...', 'info')">Change Password</button>
                    </div>
                    <div class="profile-stats">
                        <div class="profile-stat">
                            <h4>156</h4>
                            <span>Actions Today</span>
                        </div>
                        <div class="profile-stat">
                            <h4>2.5k</h4>
                            <span>Total Actions</span>
                        </div>
                        <div class="profile-stat">
                            <h4>98%</h4>
                            <span>Efficiency</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title" style="font-size: 16px; font-weight: 700;">Profile Information</h3>
                    </div>
                    <div style="padding: 20px; display: flex; flex-direction: column; gap: 16px;">
                        <div class="form-field">
                            <label class="form-label">Full Name</label>
                            <input type="text" class="form-input" value="Admin User">
                        </div>
                        <div class="form-field">
                            <label class="form-label">Email Address</label>
                            <input type="email" class="form-input" value="admin@kalnet.edu">
                        </div>
                        <div class="form-field">
                            <label class="form-label">Phone Number</label>
                            <input type="tel" class="form-input" value="+91 9876543210">
                        </div>
                        <div class="form-field">
                            <label class="form-label">Role</label>
                            <input type="text" class="form-input" value="System Administrator" readonly>
                        </div>
                        <div class="form-field">
                            <label class="form-label">Department</label>
                            <input type="text" class="form-input" value="Administration" readonly>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 20px;">
                <div class="card-header">
                    <h3 class="card-title" style="font-size: 16px; font-weight: 700;">Activity Log</h3>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Action</th>
                                <th>Module</th>
                                <th>Date & Time</th>
                                <th>IP Address</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Added new student</td>
                                <td>Student Management</td>
                                <td>Feb 03, 2026 14:23</td>
                                <td>192.168.1.101</td>
                                <td><span class="badge success">Success</span></td>
                            </tr>
                            <tr>
                                <td>Updated fee structure</td>
                                <td>Finance</td>
                                <td>Feb 03, 2026 13:15</td>
                                <td>192.168.1.101</td>
                                <td><span class="badge success">Success</span></td>
                            </tr>
                            <tr>
                                <td>Published exam schedule</td>
                                <td>Examinations</td>
                                <td>Feb 03, 2026 11:45</td>
                                <td>192.168.1.101</td>
                                <td><span class="badge success">Success</span></td>
                            </tr>
                            <tr>
                                <td>Login to system</td>
                                <td>Authentication</td>
                                <td>Feb 03, 2026 09:00</td>
                                <td>192.168.1.101</td>
                                <td><span class="badge success">Success</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // Settings Screen
    function getSettingsScreen() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Settings</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="showNotification('Settings reset to default', 'info')">Reset to Default</button>
                        <button class="btn btn-primary btn-sm" onclick="showNotification('Settings saved successfully!', 'success')">Save Settings</button>
                    </div>
                </div>
                <p style="padding: 20px; color: #718096;">
                    Manage system settings and preferences
                </p>
            </div>

            <div class="grid-2" style="margin-top: 20px;">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title" style="font-size: 16px; font-weight: 700;">Appearance Settings</h3>
                    </div>
                    <div style="padding: 20px;">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Dark Mode</h4>
                                <p>Switch between light and dark theme</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Compact View</h4>
                                <p>Use a more compact layout for tables</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Animations</h4>
                                <p>Enable smooth animations and transitions</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title" style="font-size: 16px; font-weight: 700;">Notification Settings</h3>
                    </div>
                    <div style="padding: 20px;">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Email Notifications</h4>
                                <p>Receive email notifications for important updates</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>SMS Notifications</h4>
                                <p>Receive SMS alerts for urgent matters</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Push Notifications</h4>
                                <p>Receive browser push notifications</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 20px;">
                <div class="card-header">
                    <h3 class="card-title" style="font-size: 16px; font-weight: 700;">General Settings</h3>
                </div>
                <div style="padding: 20px;">
                    <div class="form-grid">
                        <div class="form-field full-width">
                            <label class="form-label">College Name</label>
                            <input type="text" class="form-input" value="KALNET College of Engineering">
                        </div>
                        <div class="form-field">
                            <label class="form-label">Academic Year</label>
                            <select class="form-input">
                                <option>2025-2026</option>
                                <option selected>2024-2025</option>
                                <option>2023-2024</option>
                            </select>
                        </div>
                        <div class="form-field">
                            <label class="form-label">Current Semester</label>
                            <select class="form-input">
                                <option selected>Even Semester</option>
                                <option>Odd Semester</option>
                            </select>
                        </div>
                        <div class="form-field">
                            <label class="form-label">Default Language</label>
                            <select class="form-input">
                                <option selected>English</option>
                                <option>Hindi</option>
                                <option>Regional</option>
                            </select>
                        </div>
                        <div class="form-field">
                            <label class="form-label">Timezone</label>
                            <select class="form-input">
                                <option selected>IST (UTC+5:30)</option>
                                <option>UTC</option>
                                <option>EST</option>
                            </select>
                        </div>
                        <div class="form-field">
                            <label class="form-label">Date Format</label>
                            <select class="form-input">
                                <option selected>DD/MM/YYYY</option>
                                <option>MM/DD/YYYY</option>
                                <option>YYYY-MM-DD</option>
                            </select>
                        </div>
                        <div class="form-field">
                            <label class="form-label">Time Format</label>
                            <select class="form-input">
                                <option>12 Hour</option>
                                <option selected>24 Hour</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid-2" style="margin-top: 20px;">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title" style="font-size: 16px; font-weight: 700;">Security Settings</h3>
                    </div>
                    <div style="padding: 20px;">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Two-Factor Authentication</h4>
                                <p>Require 2FA for admin accounts</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Session Timeout</h4>
                                <p>Auto logout after 30 minutes of inactivity</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Login Alerts</h4>
                                <p>Get notified of new login attempts</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title" style="font-size: 16px; font-weight: 700;">Backup & Data</h3>
                    </div>
                    <div style="padding: 20px;">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Auto Backup</h4>
                                <p>Automatic daily database backup at 2:00 AM</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Data Retention</h4>
                                <p>Keep logs for 90 days</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div style="margin-top: 16px;">
                            <button class="btn btn-secondary btn-sm" style="width: 100%;" onclick="showNotification('Backup initiated...', 'info')">Backup Now</button>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }
    
    // Modal Functions
    function openModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
    }
    
    function closeModal(modalId) {
        if (modalId) {
            // For static modals with IDs
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        } else {
            // For dynamic modals without IDs
            const modals = document.querySelectorAll('.modal-overlay.active');
            modals.forEach(modal => {
                if (!modal.id) {
                    modal.remove();
                } else {
                    modal.classList.remove('active');
                }
            });
            document.body.style.overflow = '';
        }
    }
    
    // Edit Functions with Modals
    function editUser(userId) {
        openModal('editUserModal');
        // Pre-populate form with user data
        document.getElementById('editUserId').value = userId;
    }
    
    function editStudent(studentId) {
        openModal('editStudentModal');
        document.getElementById('editStudentId').value = studentId;
    }
    
    function editCourse(courseId) {
        openModal('editCourseModal');
        document.getElementById('editCourseId').value = courseId;
    }
    
    function editDepartment(deptId) {
        openModal('editDepartmentModal');
    }
    
    function editAsset(assetId) {
        openModal('editAssetModal');
    }
    
    function editFeeStructure(feeId) {
        openModal('editFeeModal');
    }
    
    // Add Functions with Modals
    function addUser() {
        openModal('addUserModal');
    }
    
    function addStudent() {
        openModal('addStudentModal');
    }
    
    function addCourse() {
        openModal('addCourseModal');
    }
    
    function addDepartment() {
        openModal('addDepartmentModal');
    }
    
    function addAsset() {
        openModal('addAssetModal');
    }
    
    function addFeeStructure() {
        openModal('addFeeModal');
    }
    
    function allocateRoom() {
        openModal('allocateRoomModal');
    }
    
    function newBooking() {
        openModal('newBookingModal');
    }
    
    function createTicket() {
        openModal('createTicketModal');
    }
    
    function markAttendance() {
        openModal('markAttendanceModal');
    }
    
    // View Details Functions
    function viewDepartmentDetails(deptId) {
        const contentArea = document.getElementById('contentArea');
        document.getElementById('pageTitle').textContent = 'Department Details';
        
        contentArea.innerHTML = `
            <button class="back-btn" onclick="goBack()">
                 Back
            </button>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Department of Computer Science</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="editDepartment('${deptId}')">Edit Department</button>
                        <button class="btn btn-primary btn-sm" onclick="navigateToScreen('users')">View Faculty</button>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px;">
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Department Code</label>
                        <div style="font-size: 14px; font-weight: 500;">CSE</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Head of Department</label>
                        <div style="font-size: 14px; font-weight: 500;">Dr. Sarah Johnson</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Status</label>
                        <div><span class="badge success">Active</span></div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Faculty Count</label>
                        <div style="font-size: 14px; font-weight: 500;">25</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Student Count</label>
                        <div style="font-size: 14px; font-weight: 500;">450</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Programs</label>
                        <div style="font-size: 14px; font-weight: 500;">3</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">Department Statistics</h3>
                <div class="kpi-grid" style="grid-template-columns: repeat(4, 1fr);">
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Active Courses</span>
                            <div class="kpi-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg></div>
                        </div>
                        <div class="kpi-value">42</div>
                        <div class="kpi-change positive">This semester</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Avg. Class Size</span>
                            <div class="kpi-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/></svg></div>
                        </div>
                        <div class="kpi-value">28</div>
                        <div class="kpi-change neutral">Students</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Pass Rate</span>
                            <div class="kpi-icon purple"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg></div>
                        </div>
                        <div class="kpi-value">94%</div>
                        <div class="kpi-change positive">Last semester</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <span class="kpi-label">Research Papers</span>
                            <div class="kpi-icon orange"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg></div>
                        </div>
                        <div class="kpi-value">38</div>
                        <div class="kpi-change positive">This year</div>
                    </div>
                </div>
            </div>
        `;
    }
    
    function viewAssetDetails(assetId) {
        const contentArea = document.getElementById('contentArea');
        document.getElementById('pageTitle').textContent = 'Asset Details';
        
        contentArea.innerHTML = `
            <button class="back-btn" onclick="goBack()">
                 Back
            </button>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Dell Latitude 5420 Laptop</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="editAsset('${assetId}')">Edit Asset</button>
                        <button class="btn btn-primary btn-sm" onclick="showNotification('Asset transfer initiated', 'success')">Transfer Asset</button>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px;">
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Asset ID</label>
                        <div style="font-size: 14px; font-weight: 500;">AST-2024-001</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Category</label>
                        <div style="font-size: 14px; font-weight: 500;">Electronics</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Status</label>
                        <div><span class="badge success">In Use</span></div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Purchase Date</label>
                        <div style="font-size: 14px; font-weight: 500;">Jan 15, 2024</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Value</label>
                        <div style="font-size: 14px; font-weight: 500;">45,000</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Location</label>
                        <div style="font-size: 14px; font-weight: 500;">Lab 301</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">Maintenance History</h3>
                <div style="display: flex; flex-direction: column; gap: 12px;">
                    <div style="padding: 12px; border-left: 3px solid #4a90e2; background: #f8f9fc; border-radius: 4px;">
                        <div style="font-weight: 600; font-size: 13px; margin-bottom: 4px;">Routine Checkup</div>
                        <div style="font-size: 12px; color: #718096;">Completed on Dec 15, 2024</div>
                    </div>
                    <div style="padding: 12px; border-left: 3px solid #27ae60; background: #f8f9fc; border-radius: 4px;">
                        <div style="font-weight: 600; font-size: 13px; margin-bottom: 4px;">RAM Upgrade</div>
                        <div style="font-size: 12px; color: #718096;">Completed on Sep 10, 2024</div>
                    </div>
                </div>
            </div>
        `;
    }
    
    function viewTicketDetails(ticketId) {
        const contentArea = document.getElementById('contentArea');
        document.getElementById('pageTitle').textContent = 'Ticket Details';
        
        contentArea.innerHTML = `
            <button class="back-btn" onclick="goBack()">
                 Back
            </button>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">AC Not Working - Room 301</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="showNotification('Technician assigned successfully', 'success')">Assign Technician</button>
                        <button class="btn btn-primary btn-sm" onclick="showNotification('Ticket marked as resolved', 'success')">Mark Resolved</button>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px;">
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Ticket ID</label>
                        <div style="font-size: 14px; font-weight: 500;">TKT-001</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Priority</label>
                        <div><span class="badge warning">High</span></div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Status</label>
                        <div><span class="badge info">In Progress</span></div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Location</label>
                        <div style="font-size: 14px; font-weight: 500;">Room 301, Building A</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Created Date</label>
                        <div style="font-size: 14px; font-weight: 500;">Dec 08, 2024</div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Assigned To</label>
                        <div style="font-size: 14px; font-weight: 500;">John Martinez</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3 style="font-size: 16px; font-weight: 700; margin-bottom: 16px;">Description</h3>
                <p style="line-height: 1.6; color: #4a5568;">
                    The air conditioning unit in Room 301 has stopped working. Multiple faculty members have reported that the room temperature is uncomfortably high. This is affecting class schedules and needs immediate attention.
                </p>
            </div>
        `;
    }

    // Faculty Handlers
    function addFaculty() {
        openModal('addFacultyModal');
    }

    function editFaculty(id) {
        openModal('editFacultyModal');
        console.log('Editing faculty:', id);
    }

    function viewFacultyDetails(id) {
        const detailModal = document.createElement('div');
        detailModal.className = 'modal-overlay active';
        detailModal.innerHTML = `
            <div class="modal-content" style="max-width: 800px;">
                <div class="modal-header">
                    <h2 class="modal-title">Faculty Details - ${id}</h2>
                    <button class="modal-close" onclick="this.closest('.modal-overlay').remove()"></button>
                </div>
                <div class="modal-body">
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px;">
                        <div>
                            <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Faculty ID</label>
                            <div style="font-size: 14px; font-weight: 500;">${id}</div>
                        </div>
                        <div>
                            <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Name</label>
                            <div style="font-size: 14px; font-weight: 500;">Dr. Rajesh Gupta</div>
                        </div>
                        <div>
                            <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Designation</label>
                            <div style="font-size: 14px; font-weight: 500;">Professor</div>
                        </div>
                        <div>
                            <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Department</label>
                            <div style="font-size: 14px; font-weight: 500;">Computer Science</div>
                        </div>
                        <div>
                            <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Email</label>
                            <div style="font-size: 14px; font-weight: 500;">rajesh.gupta@college.edu</div>
                        </div>
                        <div>
                            <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Phone</label>
                            <div style="font-size: 14px; font-weight: 500;">+91 9876543210</div>
                        </div>
                        <div>
                            <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Qualification</label>
                            <div style="font-size: 14px; font-weight: 500;">Ph.D. Computer Science</div>
                        </div>
                        <div>
                            <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Experience</label>
                            <div style="font-size: 14px; font-weight: 500;">15 Years</div>
                        </div>
                        <div>
                            <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 4px; font-weight: 600; text-transform: uppercase;">Status</label>
                            <div><span class="badge success">Active</span></div>
                        </div>
                    </div>
                    <div>
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 8px; font-weight: 600; text-transform: uppercase;">Specialization</label>
                        <div style="font-size: 14px; line-height: 1.6; color: #4a5568;">Database Management Systems, Machine Learning, Data Mining, Artificial Intelligence</div>
                    </div>
                    <div style="margin-top: 20px;">
                        <label style="display: block; font-size: 12px; color: #718096; margin-bottom: 8px; font-weight: 600; text-transform: uppercase;">Courses Teaching</label>
                        <div style="display: flex; flex-wrap: gap; gap: 8px;">
                            <span class="badge info">DBMS</span>
                            <span class="badge info">Machine Learning</span>
                            <span class="badge info">Data Structures</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="this.closest('.modal-overlay').remove()">Close</button>
                    <button class="btn btn-primary" onclick="editFaculty('${id}'); this.closest('.modal-overlay').remove();">Edit Faculty</button>
                </div>
            </div>
        `;
        document.body.appendChild(detailModal);
    }

    // Timetable Handlers
    function addSchedule() {
        openModal('addScheduleModal');
    }

    // Results Handlers
    function publishResults() {
        showNotification('Results published successfully!', 'success');
    }

    // Library Handlers
    function addBook() {
        openModal('addBookModal');
    }

    function issueBook(bookId) {
        openModal('issueBookModal');
        console.log('Issuing book:', bookId);
    }

    function returnBook(transactionId) {
        showNotification(`Book return processed for ${transactionId}`, 'success');
    }

    function viewBookDetails(bookId) {
        showNotification(`Viewing details for book ${bookId}`, 'info');
    }

    // Exam Handlers
    function editExam(examId) {
        openModal('editExamModal');
        console.log('Editing exam:', examId);
    }

    // Sidebar Toggle
    function toggleSidebar() {
        const sidebar = document.querySelector('.sidebar');
        sidebar.classList.toggle('collapsed');
        
        // Save state to localStorage
        const isCollapsed = sidebar.classList.contains('collapsed');
        localStorage.setItem('sidebarCollapsed', isCollapsed);
    }

    // Restore sidebar state on page load
    window.addEventListener('DOMContentLoaded', function() {
        const sidebar = document.querySelector('.sidebar');
        const isCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
        if (isCollapsed) {
            sidebar.classList.add('collapsed');
        }
    });
</script>

<!-- Modal Templates -->
<div id="addUserModal" class="modal-overlay" onclick="if(event.target === this) closeModal('addUserModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Add New User</h3>
            <button class="modal-close" onclick="closeModal('addUserModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-input" placeholder="Enter full name">
                </div>
                <div class="form-field">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" placeholder="user@college.edu">
                </div>
                <div class="form-field">
                    <label class="form-label">Role</label>
                    <select class="form-input">
                        <option>Faculty</option>
                        <option>Admin</option>
                        <option>Staff</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Department</label>
                    <select class="form-input">
                        <option>Computer Science</option>
                        <option>Mathematics</option>
                        <option>Physics</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Phone</label>
                    <input type="tel" class="form-input" placeholder="+91 12345 67890">
                </div>
                <div class="form-field">
                    <label class="form-label">Employee ID</label>
                    <input type="text" class="form-input" placeholder="EMP-001">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('addUserModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('addUserModal'); alert('User added successfully!')">Add User</button>
        </div>
    </div>
</div>

<div id="editUserModal" class="modal-overlay" onclick="if(event.target === this) closeModal('editUserModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Edit User</h3>
            <button class="modal-close" onclick="closeModal('editUserModal')"></button>
        </div>
        <div class="modal-body">
            <input type="hidden" id="editUserId">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-input" value="Dr. Sarah Johnson">
                </div>
                <div class="form-field">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" value="sarah.j@college.edu">
                </div>
                <div class="form-field">
                    <label class="form-label">Role</label>
                    <select class="form-input">
                        <option selected>Faculty</option>
                        <option>Admin</option>
                        <option>Staff</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Department</label>
                    <select class="form-input">
                        <option selected>Computer Science</option>
                        <option>Mathematics</option>
                        <option>Physics</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('editUserModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('editUserModal'); alert('User updated successfully!')">Save Changes</button>
        </div>
    </div>
</div>

<div id="addStudentModal" class="modal-overlay" onclick="if(event.target === this) closeModal('addStudentModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Add New Student</h3>
            <button class="modal-close" onclick="closeModal('addStudentModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Student Name</label>
                    <input type="text" class="form-input" placeholder="Enter student name">
                </div>
                <div class="form-field">
                    <label class="form-label">Enrollment ID</label>
                    <input type="text" class="form-input" placeholder="2024-CSE-001">
                </div>
                <div class="form-field">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" placeholder="student@college.edu">
                </div>
                <div class="form-field">
                    <label class="form-label">Phone</label>
                    <input type="tel" class="form-input" placeholder="+91 12345 67890">
                </div>
                <div class="form-field">
                    <label class="form-label">Program</label>
                    <select class="form-input">
                        <option>B.Tech CSE</option>
                        <option>B.Tech EEE</option>
                        <option>B.Tech MECH</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Year</label>
                    <select class="form-input">
                        <option>1st Year</option>
                        <option>2nd Year</option>
                        <option>3rd Year</option>
                        <option>4th Year</option>
                    </select>
                </div>
                <div class="form-field full-width">
                    <label class="form-label">Address</label>
                    <textarea class="form-input" placeholder="Enter complete address"></textarea>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('addStudentModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('addStudentModal'); alert('Student added successfully!')">Add Student</button>
        </div>
    </div>
</div>

<div id="editStudentModal" class="modal-overlay" onclick="if(event.target === this) closeModal('editStudentModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Edit Student</h3>
            <button class="modal-close" onclick="closeModal('editStudentModal')"></button>
        </div>
        <div class="modal-body">
            <input type="hidden" id="editStudentId">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Student Name</label>
                    <input type="text" class="form-input" value="John Smith">
                </div>
                <div class="form-field">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" value="john.smith@student.college.edu">
                </div>
                <div class="form-field">
                    <label class="form-label">Phone</label>
                    <input type="tel" class="form-input" value="+91 98765 43210">
                </div>
                <div class="form-field">
                    <label class="form-label">Year</label>
                    <select class="form-input">
                        <option>1st Year</option>
                        <option>2nd Year</option>
                        <option selected>3rd Year</option>
                        <option>4th Year</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('editStudentModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('editStudentModal'); alert('Student updated successfully!')">Save Changes</button>
        </div>
    </div>
</div>

<div id="addCourseModal" class="modal-overlay" onclick="if(event.target === this) closeModal('addCourseModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Add New Course</h3>
            <button class="modal-close" onclick="closeModal('addCourseModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Course Code</label>
                    <input type="text" class="form-input" placeholder="CS101">
                </div>
                <div class="form-field">
                    <label class="form-label">Credits</label>
                    <input type="number" class="form-input" placeholder="4.0">
                </div>
                <div class="form-field full-width">
                    <label class="form-label">Course Name</label>
                    <input type="text" class="form-input" placeholder="Enter course name">
                </div>
                <div class="form-field">
                    <label class="form-label">Department</label>
                    <select class="form-input">
                        <option>Computer Science</option>
                        <option>Mathematics</option>
                        <option>Physics</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Type</label>
                    <select class="form-input">
                        <option>Core</option>
                        <option>Elective</option>
                        <option>Lab</option>
                    </select>
                </div>
                <div class="form-field full-width">
                    <label class="form-label">Description</label>
                    <textarea class="form-input" placeholder="Enter course description"></textarea>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('addCourseModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('addCourseModal'); alert('Course added successfully!')">Add Course</button>
        </div>
    </div>
</div>

<div id="editCourseModal" class="modal-overlay" onclick="if(event.target === this) closeModal('editCourseModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Edit Course</h3>
            <button class="modal-close" onclick="closeModal('editCourseModal')"></button>
        </div>
        <div class="modal-body">
            <input type="hidden" id="editCourseId">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Course Code</label>
                    <input type="text" class="form-input" value="CS101">
                </div>
                <div class="form-field">
                    <label class="form-label">Credits</label>
                    <input type="number" class="form-input" value="4.0">
                </div>
                <div class="form-field full-width">
                    <label class="form-label">Course Name</label>
                    <input type="text" class="form-input" value="Introduction to Computer Science">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('editCourseModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('editCourseModal'); alert('Course updated successfully!')">Save Changes</button>
        </div>
    </div>
</div>

<div id="addDepartmentModal" class="modal-overlay" onclick="if(event.target === this) closeModal('addDepartmentModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Add New Department</h3>
            <button class="modal-close" onclick="closeModal('addDepartmentModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Department Name</label>
                    <input type="text" class="form-input" placeholder="Enter department name">
                </div>
                <div class="form-field">
                    <label class="form-label">Department Code</label>
                    <input type="text" class="form-input" placeholder="CSE">
                </div>
                <div class="form-field">
                    <label class="form-label">Head of Department</label>
                    <select class="form-input">
                        <option>Dr. Sarah Johnson</option>
                        <option>Prof. Michael Chen</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Building</label>
                    <input type="text" class="form-input" placeholder="Building A">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('addDepartmentModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('addDepartmentModal'); alert('Department added successfully!')">Add Department</button>
        </div>
    </div>
</div>

<div id="editDepartmentModal" class="modal-overlay" onclick="if(event.target === this) closeModal('editDepartmentModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Edit Department</h3>
            <button class="modal-close" onclick="closeModal('editDepartmentModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Department Name</label>
                    <input type="text" class="form-input" value="Computer Science">
                </div>
                <div class="form-field">
                    <label class="form-label">Department Code</label>
                    <input type="text" class="form-input" value="CSE">
                </div>
                <div class="form-field">
                    <label class="form-label">Head of Department</label>
                    <select class="form-input">
                        <option selected>Dr. Sarah Johnson</option>
                        <option>Prof. Michael Chen</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Building</label>
                    <input type="text" class="form-input" value="Building A">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('editDepartmentModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('editDepartmentModal'); alert('Department updated successfully!')">Save Changes</button>
        </div>
    </div>
</div>

<div id="addAssetModal" class="modal-overlay" onclick="if(event.target === this) closeModal('addAssetModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Add New Asset</h3>
            <button class="modal-close" onclick="closeModal('addAssetModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Asset Name</label>
                    <input type="text" class="form-input" placeholder="Enter asset name">
                </div>
                <div class="form-field">
                    <label class="form-label">Asset ID</label>
                    <input type="text" class="form-input" placeholder="AST-2024-001">
                </div>
                <div class="form-field">
                    <label class="form-label">Category</label>
                    <select class="form-input">
                        <option>Electronics</option>
                        <option>Furniture</option>
                        <option>Equipment</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Value</label>
                    <input type="number" class="form-input" placeholder="45000">
                </div>
                <div class="form-field">
                    <label class="form-label">Purchase Date</label>
                    <input type="date" class="form-input">
                </div>
                <div class="form-field">
                    <label class="form-label">Location</label>
                    <input type="text" class="form-input" placeholder="Lab 301">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('addAssetModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('addAssetModal'); alert('Asset added successfully!')">Add Asset</button>
        </div>
    </div>
</div>

<div id="editAssetModal" class="modal-overlay" onclick="if(event.target === this) closeModal('editAssetModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Edit Asset</h3>
            <button class="modal-close" onclick="closeModal('editAssetModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Asset Name</label>
                    <input type="text" class="form-input" value="Dell Latitude 5420 Laptop">
                </div>
                <div class="form-field">
                    <label class="form-label">Status</label>
                    <select class="form-input">
                        <option selected>In Use</option>
                        <option>Available</option>
                        <option>Under Maintenance</option>
                        <option>Disposed</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Value</label>
                    <input type="number" class="form-input" value="45000">
                </div>
                <div class="form-field">
                    <label class="form-label">Location</label>
                    <input type="text" class="form-input" value="Lab 301">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('editAssetModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('editAssetModal'); alert('Asset updated successfully!')">Save Changes</button>
        </div>
    </div>
</div>

<div id="createTicketModal" class="modal-overlay" onclick="if(event.target === this) closeModal('createTicketModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Create Maintenance Request</h3>
            <button class="modal-close" onclick="closeModal('createTicketModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field full-width">
                    <label class="form-label">Issue Title</label>
                    <input type="text" class="form-input" placeholder="Brief description of the issue">
                </div>
                <div class="form-field">
                    <label class="form-label">Location</label>
                    <input type="text" class="form-input" placeholder="Room 301, Building A">
                </div>
                <div class="form-field">
                    <label class="form-label">Priority</label>
                    <select class="form-input">
                        <option>Low</option>
                        <option>Medium</option>
                        <option>High</option>
                        <option>Critical</option>
                    </select>
                </div>
                <div class="form-field full-width">
                    <label class="form-label">Description</label>
                    <textarea class="form-input" placeholder="Provide detailed description of the issue"></textarea>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('createTicketModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('createTicketModal'); alert('Ticket created successfully!')">Create Ticket</button>
        </div>
    </div>
</div>

<div id="allocateRoomModal" class="modal-overlay" onclick="if(event.target === this) closeModal('allocateRoomModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Allocate Hostel Room</h3>
            <button class="modal-close" onclick="closeModal('allocateRoomModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Student</label>
                    <select class="form-input">
                        <option>John Smith</option>
                        <option>Emily Davis</option>
                        <option>Michael Brown</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Hostel</label>
                    <select class="form-input">
                        <option>Boys Hostel A</option>
                        <option>Boys Hostel B</option>
                        <option>Girls Hostel A</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Room Number</label>
                    <select class="form-input">
                        <option>101</option>
                        <option>102</option>
                        <option>103</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Bed Number</label>
                    <select class="form-input">
                        <option>Bed 1</option>
                        <option>Bed 2</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('allocateRoomModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('allocateRoomModal'); alert('Room allocated successfully!')">Allocate Room</button>
        </div>
    </div>
</div>

<div id="newBookingModal" class="modal-overlay" onclick="if(event.target === this) closeModal('newBookingModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">New Facility Booking</h3>
            <button class="modal-close" onclick="closeModal('newBookingModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Facility</label>
                    <select class="form-input">
                        <option>Auditorium</option>
                        <option>Conference Room A</option>
                        <option>Sports Complex</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Event Type</label>
                    <input type="text" class="form-input" placeholder="Seminar, Workshop, etc">
                </div>
                <div class="form-field">
                    <label class="form-label">Date</label>
                    <input type="date" class="form-input">
                </div>
                <div class="form-field">
                    <label class="form-label">Time Slot</label>
                    <select class="form-input">
                        <option>09:00 AM - 12:00 PM</option>
                        <option>02:00 PM - 05:00 PM</option>
                        <option>Full Day</option>
                    </select>
                </div>
                <div class="form-field full-width">
                    <label class="form-label">Purpose</label>
                    <textarea class="form-input" placeholder="Describe the purpose of booking"></textarea>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('newBookingModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('newBookingModal'); alert('Booking created successfully!')">Submit Booking</button>
        </div>
    </div>
</div>

<div id="markAttendanceModal" class="modal-overlay" onclick="if(event.target === this) closeModal('markAttendanceModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Mark Attendance</h3>
            <button class="modal-close" onclick="closeModal('markAttendanceModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid single">
                <div class="form-field">
                    <label class="form-label">Course</label>
                    <select class="form-input">
                        <option>CS101 - Introduction to Computer Science</option>
                        <option>CS201 - Data Structures</option>
                        <option>CS301 - Algorithms</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Date</label>
                    <input type="date" class="form-input" value="2024-12-08">
                </div>
                <div class="form-field">
                    <label class="form-label">Session</label>
                    <select class="form-input">
                        <option>Morning (9:00 AM - 12:00 PM)</option>
                        <option>Afternoon (2:00 PM - 5:00 PM)</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('markAttendanceModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('markAttendanceModal'); alert('Opening attendance sheet...')">Continue</button>
        </div>
    </div>
</div>

<div id="addFeeModal" class="modal-overlay" onclick="if(event.target === this) closeModal('addFeeModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Add Fee Structure</h3>
            <button class="modal-close" onclick="closeModal('addFeeModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Program</label>
                    <select class="form-input">
                        <option>B.Tech CSE</option>
                        <option>B.Tech EEE</option>
                        <option>B.Tech MECH</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Year</label>
                    <select class="form-input">
                        <option>1st Year</option>
                        <option>2nd Year</option>
                        <option>3rd Year</option>
                        <option>4th Year</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Tuition Fee</label>
                    <input type="number" class="form-input" placeholder=" 120000">
                </div>
                <div class="form-field">
                    <label class="form-label">Hostel Fee</label>
                    <input type="number" class="form-input" placeholder=" 50000">
                </div>
                <div class="form-field">
                    <label class="form-label">Transport Fee</label>
                    <input type="number" class="form-input" placeholder=" 15000">
                </div>
                <div class="form-field">
                    <label class="form-label">Other Charges</label>
                    <input type="number" class="form-input" placeholder=" 5000">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('addFeeModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('addFeeModal'); alert('Fee structure added successfully!')">Add Fee Structure</button>
        </div>
    </div>
</div>

<div id="editFeeModal" class="modal-overlay" onclick="if(event.target === this) closeModal('editFeeModal')">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Edit Fee Structure</h3>
            <button class="modal-close" onclick="closeModal('editFeeModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Program</label>
                    <select class="form-input">
                        <option selected>B.Tech CSE</option>
                        <option>B.Tech EEE</option>
                        <option>B.Tech MECH</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Year</label>
                    <select class="form-input">
                        <option selected>1st Year</option>
                        <option>2nd Year</option>
                        <option>3rd Year</option>
                        <option>4th Year</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Tuition Fee</label>
                    <input type="number" class="form-input" value="120000">
                </div>
                <div class="form-field">
                    <label class="form-label">Hostel Fee</label>
                    <input type="number" class="form-input" value="50000">
                </div>
                <div class="form-field">
                    <label class="form-label">Transport Fee</label>
                    <input type="number" class="form-input" value="15000">
                </div>
                <div class="form-field">
                    <label class="form-label">Other Charges</label>
                    <input type="number" class="form-input" value="5000">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('editFeeModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('editFeeModal'); alert('Fee structure updated successfully!')">Save Changes</button>
        </div>
    </div>
</div>

<!-- Add Faculty Modal -->
<div id="addFacultyModal" class="modal-overlay" onclick="if(event.target === this) closeModal('addFacultyModal')">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Add New Faculty</h2>
            <button class="modal-close" onclick="closeModal('addFacultyModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Faculty ID</label>
                    <input type="text" class="form-input" placeholder="FAC001" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-input" placeholder="Dr. John Doe" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Department</label>
                    <select class="form-input" required>
                        <option value="">Select Department</option>
                        <option>Computer Science</option>
                        <option>Electronics</option>
                        <option>Mechanical</option>
                        <option>Mathematics</option>
                        <option>Physics</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Designation</label>
                    <select class="form-input" required>
                        <option value="">Select Designation</option>
                        <option>Professor</option>
                        <option>Associate Professor</option>
                        <option>Assistant Professor</option>
                        <option>Lecturer</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" placeholder="faculty@college.edu" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Phone Number</label>
                    <input type="tel" class="form-input" placeholder="+91 9876543210" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Joining Date</label>
                    <input type="date" class="form-input" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Qualification</label>
                    <input type="text" class="form-input" placeholder="Ph.D. Computer Science" required>
                </div>
                <div class="form-field full-width">
                    <label class="form-label">Specialization</label>
                    <textarea class="form-input" rows="2" placeholder="Machine Learning, Data Mining"></textarea>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('addFacultyModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('addFacultyModal'); showNotification('Faculty added successfully!', 'success')">Add Faculty</button>
        </div>
    </div>
</div>

<!-- Edit Faculty Modal -->
<div id="editFacultyModal" class="modal-overlay" onclick="if(event.target === this) closeModal('editFacultyModal')">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Edit Faculty</h2>
            <button class="modal-close" onclick="closeModal('editFacultyModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Faculty ID</label>
                    <input type="text" class="form-input" value="FAC001" readonly>
                </div>
                <div class="form-field">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-input" value="Dr. Rajesh Gupta" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Department</label>
                    <select class="form-input" required>
                        <option>Computer Science</option>
                        <option>Electronics</option>
                        <option>Mechanical</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Designation</label>
                    <select class="form-input" required>
                        <option>Professor</option>
                        <option>Associate Professor</option>
                        <option>Assistant Professor</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" value="rajesh.gupta@college.edu" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Phone Number</label>
                    <input type="tel" class="form-input" value="+91 9876543210" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Status</label>
                    <select class="form-input">
                        <option>Active</option>
                        <option>On Leave</option>
                        <option>Inactive</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('editFacultyModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('editFacultyModal'); showNotification('Faculty updated successfully!', 'success')">Save Changes</button>
        </div>
    </div>
</div>

<!-- Add Schedule Modal -->
<div id="addScheduleModal" class="modal-overlay" onclick="if(event.target === this) closeModal('addScheduleModal')">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Add Schedule</h2>
            <button class="modal-close" onclick="closeModal('addScheduleModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Class</label>
                    <select class="form-input" required>
                        <option value="">Select Class</option>
                        <option>CSE - 3rd Year - Section A</option>
                        <option>CSE - 3rd Year - Section B</option>
                        <option>ECE - 2nd Year - Section A</option>
                        <option>MECH - 4th Year - Section A</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Semester</label>
                    <select class="form-input" required>
                        <option value="">Select Semester</option>
                        <option>Fall 2024</option>
                        <option>Spring 2025</option>
                        <option>Summer 2024</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Day</label>
                    <select class="form-input" required>
                        <option value="">Select Day</option>
                        <option>Monday</option>
                        <option>Tuesday</option>
                        <option>Wednesday</option>
                        <option>Thursday</option>
                        <option>Friday</option>
                        <option>Saturday</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Time Slot</label>
                    <select class="form-input" required>
                        <option value="">Select Time Slot</option>
                        <option>9:00 - 10:00</option>
                        <option>10:00 - 11:00</option>
                        <option>11:15 - 12:15</option>
                        <option>13:00 - 14:00</option>
                        <option>14:00 - 15:00</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Subject</label>
                    <select class="form-input" required>
                        <option value="">Select Subject</option>
                        <option>Database Management Systems</option>
                        <option>Operating Systems</option>
                        <option>Computer Networks</option>
                        <option>Software Engineering</option>
                        <option>Web Technologies</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Faculty</label>
                    <select class="form-input" required>
                        <option value="">Select Faculty</option>
                        <option>Dr. Rajesh Gupta</option>
                        <option>Dr. Sunita Mehta</option>
                        <option>Mr. Anil Kumar</option>
                        <option>Dr. Priya Sharma</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Room</label>
                    <input type="text" class="form-input" placeholder="Room 301" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Type</label>
                    <select class="form-input" required>
                        <option value="">Select Type</option>
                        <option>Lecture</option>
                        <option>Lab</option>
                        <option>Tutorial</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('addScheduleModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('addScheduleModal'); showNotification('Schedule added successfully!', 'success')">Add Schedule</button>
        </div>
    </div>
</div>

<!-- Add Book Modal -->
<div id="addBookModal" class="modal-overlay" onclick="if(event.target === this) closeModal('addBookModal')">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Add New Book</h2>
            <button class="modal-close" onclick="closeModal('addBookModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Book ID</label>
                    <input type="text" class="form-input" placeholder="BK001" required>
                </div>
                <div class="form-field">
                    <label class="form-label">ISBN</label>
                    <input type="text" class="form-input" placeholder="978-0262033848" required>
                </div>
                <div class="form-field full-width">
                    <label class="form-label">Title</label>
                    <input type="text" class="form-input" placeholder="Data Structures & Algorithms" required>
                </div>
                <div class="form-field full-width">
                    <label class="form-label">Author(s)</label>
                    <input type="text" class="form-input" placeholder="Thomas H. Cormen, Charles E. Leiserson" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Publisher</label>
                    <input type="text" class="form-input" placeholder="MIT Press" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Publication Year</label>
                    <input type="number" class="form-input" placeholder="2009" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Category</label>
                    <select class="form-input" required>
                        <option value="">Select Category</option>
                        <option>Computer Science</option>
                        <option>Mathematics</option>
                        <option>Physics</option>
                        <option>Electronics</option>
                        <option>General</option>
                    </select>
                </div>
                <div class="form-field">
                    <label class="form-label">Total Copies</label>
                    <input type="number" class="form-input" placeholder="5" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Available Copies</label>
                    <input type="number" class="form-input" placeholder="5" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Shelf Location</label>
                    <input type="text" class="form-input" placeholder="A-101" required>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('addBookModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('addBookModal'); showNotification('Book added successfully!', 'success')">Add Book</button>
        </div>
    </div>
</div>

<!-- Issue Book Modal -->
<div id="issueBookModal" class="modal-overlay" onclick="if(event.target === this) closeModal('issueBookModal')">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Issue Book</h2>
            <button class="modal-close" onclick="closeModal('issueBookModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Student ID</label>
                    <input type="text" class="form-input" placeholder="STU001" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Student Name</label>
                    <input type="text" class="form-input" placeholder="Search by name or ID" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Book ID</label>
                    <input type="text" class="form-input" value="BK001" readonly>
                </div>
                <div class="form-field">
                    <label class="form-label">Issue Date</label>
                    <input type="date" class="form-input" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Due Date</label>
                    <input type="date" class="form-input" required>
                </div>
                <div class="form-field full-width">
                    <label class="form-label">Notes</label>
                    <textarea class="form-input" rows="2" placeholder="Optional notes"></textarea>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('issueBookModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('issueBookModal'); showNotification('Book issued successfully!', 'success')">Issue Book</button>
        </div>
    </div>
</div>

<!-- Edit Exam Modal -->
<div id="editExamModal" class="modal-overlay" onclick="if(event.target === this) closeModal('editExamModal')">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Edit Exam Schedule</h2>
            <button class="modal-close" onclick="closeModal('editExamModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-field">
                    <label class="form-label">Course Code</label>
                    <input type="text" class="form-input" value="CS101" readonly>
                </div>
                <div class="form-field">
                    <label class="form-label">Course Name</label>
                    <input type="text" class="form-input" value="Intro to Programming" readonly>
                </div>
                <div class="form-field">
                    <label class="form-label">Exam Date</label>
                    <input type="date" class="form-input" value="2024-12-10" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Start Time</label>
                    <input type="time" class="form-input" value="09:00" required>
                </div>
                <div class="form-field">
                    <label class="form-label">End Time</label>
                    <input type="time" class="form-input" value="12:00" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Exam Type</label>
                    <select class="form-input" required>
                        <option selected>Written</option>
                        <option>Lab</option>
                        <option>Online</option>
                        <option>Practical</option>
                    </select>
                </div>
                <div class="form-field full-width">
                    <label class="form-label">Venue</label>
                    <input type="text" class="form-input" value="Hall A" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Capacity</label>
                    <input type="number" class="form-input" value="200" required>
                </div>
                <div class="form-field">
                    <label class="form-label">Enrolled Students</label>
                    <input type="number" class="form-input" value="185" readonly>
                </div>
                <div class="form-field full-width">
                    <label class="form-label">Special Instructions</label>
                    <textarea class="form-input" rows="2" placeholder="Any special instructions for invigilators or students"></textarea>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('editExamModal')">Cancel</button>
            <button class="btn btn-primary" onclick="closeModal('editExamModal'); showNotification('Exam schedule updated successfully!', 'success')">Save Changes</button>
        </div>
    </div>
</div>

<script>
    // Faculty Application State and Data
    const facultyAppState = {
        currentPage: 'dashboard',
        facultyName: 'Dr. Rajesh Kumar',
        authority_level: 'professor',
        courses: [
            { code: 'CS201', name: 'Data Structures', semester: 'III', section: 'A', students: 45 },
            { code: 'CS202', name: 'Database Management Systems', semester: 'III', section: 'B', students: 42 },
            { code: 'CS203', name: 'Operating Systems', semester: 'IV', section: 'A', students: 48 },
            { code: 'CS204', name: 'Computer Networks', semester: 'IV', section: 'B', students: 45 }
        ],
        students: [
            { rollNo: 'CS21001', name: 'Aarav Patel', program: 'B.Tech', year: 'III', attendance: 88, marks: 76, status: 'Good' },
            { rollNo: 'CS21002', name: 'Bhavna Singh', program: 'B.Tech', year: 'III', attendance: 75, marks: 65, status: 'At Risk' },
            { rollNo: 'CS21003', name: 'Chirag Verma', program: 'B.Tech', year: 'III', attendance: 92, marks: 88, status: 'Excellent' },
            { rollNo: 'CS21004', name: 'Divya Sharma', program: 'B.Tech', year: 'III', attendance: 68, marks: 58, status: 'At Risk' },
            { rollNo: 'CS21005', name: 'Eshan Kumar', program: 'B.Tech', year: 'III', attendance: 85, marks: 82, status: 'Good' }
        ]
    };

    // Faculty Application Initialization
    function initFacultyApp() {
        const facultyPortal = document.getElementById('facultyPortal');
        
        if (!facultyPortal) {
            return;
        }
        
        // Initialize dark mode from localStorage
        const savedDarkMode = localStorage.getItem('facultyDarkMode');
        if (savedDarkMode !== null) {
            const isDark = savedDarkMode === 'true';
            if (isDark) {
                document.body.classList.add('dark-mode');
            } else {
                document.body.classList.remove('dark-mode');
            }
            // Update icon after DOM is ready
            setTimeout(() => updateFacultyDarkModeIcon(isDark), 100);
        }
        
        facultyPortal.style.display = 'flex';
        
        facultyPortal.innerHTML = `
            <div class="sidebar" id="facultySidebar">
                <div class="sidebar-header">
                    <div class="sidebar-header-content">
                        <div class="sidebar-header-info">
                            <div class="sidebar-logo">KALNET</div>
                            <div class="sidebar-title" id="facultyName">Dr. Rajesh Kumar</div>
                            <div class="sidebar-user" id="authorityBadge">Professor</div>
                        </div>
                        <button class="sidebar-toggle" onclick="toggleFacultySidebar()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                                <line x1="3" y1="12" x2="21" y2="12"/>
                                <polyline points="15 6 21 12 15 18"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="sidebar-menu">
                    <div class="menu-section">
                        <div class="menu-section-title">Core</div>
                        <div class="menu-item active" data-page="dashboard" onclick="navigateFacultyTo('dashboard')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg></span> Dashboard
                        </div>
                        <div class="menu-item" data-page="my-courses" onclick="navigateFacultyTo('my-courses')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"/></svg></span> My Courses
                        </div>
                    </div>
                    <div class="menu-section">
                        <div class="menu-section-title">Academics</div>
                        <div class="menu-item" data-page="attendance" onclick="navigateFacultyTo('attendance')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10zM5 7V5h14v2H5zm11.56 7.38l-4.03 4.03-2.37-2.37-1.41 1.41 3.78 3.78 5.44-5.44z"/></svg></span> Attendance
                        </div>
                        <div class="menu-item" data-page="internal-marks" onclick="navigateFacultyTo('internal-marks')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg></span> Internal Marks
                        </div>
                        <div class="menu-item" data-page="exams" onclick="navigateFacultyTo('exams')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg></span> Exams
                        </div>
                        <div class="menu-item" data-page="course-materials" onclick="navigateFacultyTo('course-materials')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"/></svg></span> Course Materials
                        </div>
                    </div>
                    <div class="menu-section">
                        <div class="menu-section-title">Students</div>
                        <div class="menu-item" data-page="my-course-students" onclick="navigateFacultyTo('my-course-students')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg></span> My Course Students
                        </div>
                        <div class="menu-item locked" data-page="department-students" id="menuDeptStudents" onclick="navigateFacultyTo('department-students')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg></span> Department Students
                        </div>
                        <div class="menu-item locked" data-page="academic-cohort" id="menuAcademicCohort" onclick="navigateFacultyTo('academic-cohort')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/></svg></span> Academic Cohort
                        </div>
                        <div class="menu-item" data-page="student-performance" onclick="navigateFacultyTo('student-performance')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/></svg></span> Student Performance
                        </div>
                    </div>
                    <div class="menu-section">
                        <div class="menu-section-title">Requests</div>
                        <div class="menu-item" data-page="leave-requests" onclick="navigateFacultyTo('leave-requests')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"/></svg></span> Leave Requests
                        </div>
                        <div class="menu-item" data-page="grade-change-requests" onclick="navigateFacultyTo('grade-change-requests')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg></span> Grade Changes
                        </div>
                        <div class="menu-item" data-page="resource-requests" onclick="navigateFacultyTo('resource-requests')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/></svg></span> Resource Requests
                        </div>
                        <div class="menu-item" data-page="document-signatures" onclick="navigateFacultyTo('document-signatures')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zm-9.18-6.95L7.4 14.46 10.94 18l5.66-5.66-1.41-1.41-4.24 4.24-2.13-2.12z"/></svg></span> Document Signatures
                        </div>
                    </div>
                    <div class="menu-section">
                        <div class="menu-section-title">Communication</div>
                        <div class="menu-item" data-page="notices" onclick="navigateFacultyTo('notices')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M18 11v2h4v-2h-4zm-2 6.61c.96.71 2.21 1.65 3.2 2.39.4-.53.8-1.07 1.2-1.6-.99-.74-2.24-1.68-3.2-2.4-.4.54-.8 1.08-1.2 1.61zM20.4 5.6c-.4-.53-.8-1.07-1.2-1.6-.99.74-2.24 1.68-3.2 2.4.4.53.8 1.07 1.2 1.6.96-.72 2.21-1.65 3.2-2.4zM4 9c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h1v4h2v-4h1l5 3V6L8 9H4zm11.5 3c0-1.33-.58-2.53-1.5-3.35v6.69c.92-.81 1.5-2.01 1.5-3.34z"/></svg></span> Notices
                        </div>
                        <div class="menu-item" data-page="messages" onclick="navigateFacultyTo('messages')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"/></svg></span> Messages
                        </div>
                    </div>
                    
                    <div class="menu-section" id="hodSection" style="display: none;">
                        <div class="menu-section-title">HOD Functions</div>
                        <div class="menu-item" data-page="department-overview" onclick="navigateFacultyTo('department-overview')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"/></svg></span> Department Overview
                        </div>
                        <div class="menu-item" data-page="attendance-approval" onclick="navigateFacultyTo('attendance-approval')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"/></svg></span> Attendance Approval
                        </div>
                        <div class="menu-item" data-page="marks-approval" onclick="navigateFacultyTo('marks-approval')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM10 17H5v-2h5v2zm0-4H5v-2h5v2zm0-4H5V7h5v2zm8.5 8.5L13 12l1.5-1.5L17 13l4.5-4.5L23 10l-6.5 6.5z"/></svg></span> Marks Approval
                        </div>
                        <div class="menu-item" data-page="faculty-workload" onclick="navigateFacultyTo('faculty-workload')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/></svg></span> Faculty Workload
                        </div>
                        <div class="menu-item" data-page="student-issues" onclick="navigateFacultyTo('student-issues')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg></span> Student Issues
                        </div>
                    </div>

                    <div class="menu-section" id="deanSection" style="display: none;">
                        <div class="menu-section-title">Dean Functions</div>
                        <div class="menu-item" data-page="academic-overview" onclick="navigateFacultyTo('academic-overview')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M21 8c-1.45 0-2.26 1.44-1.93 2.51l-3.55 3.56c-.3-.09-.74-.09-1.04 0l-2.55-2.55C12.27 10.45 11.46 9 10 9c-1.45 0-2.27 1.44-1.93 2.52l-4.56 4.55C2.44 15.74 1 16.55 1 18c0 1.1.9 2 2 2 1.45 0 2.26-1.44 1.93-2.51l4.55-4.56c.3.09.74.09 1.04 0l2.55 2.55C12.73 16.55 13.54 18 15 18c1.45 0 2.27-1.44 1.93-2.52l3.56-3.55c1.07.33 2.51-.48 2.51-1.93 0-1.1-.9-2-2-2z"/></svg></span> Academic Overview
                        </div>
                        <div class="menu-item" data-page="policy-deadlines" onclick="navigateFacultyTo('policy-deadlines')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg></span> Policy & Deadlines
                        </div>
                        <div class="menu-item" data-page="inter-dept-reports" onclick="navigateFacultyTo('inter-dept-reports')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/></svg></span> Inter-Dept Reports
                        </div>
                        <div class="menu-item" data-page="approvals-dashboard" onclick="navigateFacultyTo('approvals-dashboard')">
                            <span class="menu-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"/></svg></span> Approvals Dashboard
                        </div>
                    </div>
                </div>

                <div class="sidebar-footer">
                    <button class="logout-btn" onclick="handleFacultyLogout()">Logout</button>
                </div>
            </div>

            <div class="main-content">
                <div class="topbar">
                    <div class="topbar-left">
                        <div class="page-title" id="facultyPageTitle">Dashboard</div>
                        <div class="page-breadcrumb" id="facultyPageBreadcrumb">Home / Dashboard</div>
                    </div>
                    <div class="topbar-right">
                        <a href="#" class="topbar-action" onclick="handleFacultyBackToPortal()" title="Back to Main Portal" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: rgba(74, 144, 226, 0.1); border-radius: 8px; font-size: 12px; font-weight: 500;">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                            </svg>
                            <span>Portal</span>
                        </a>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <label style="font-size: 12px; color: #a0aec0; font-weight: 500;">Role:</label>
                            <select class="topbar-action" id="roleSelector" onchange="switchFacultyRole()" title="Switch Role" style="padding: 10px 16px; font-size: 13px; background: rgba(74, 144, 226, 0.1); border: 1px solid #2a3041; color: #a0aec0; border-radius: 8px; cursor: pointer; min-width: 140px;">
                                <option value="professor">Professor</option>
                                <option value="hod">HOD</option>
                                <option value="dean">Dean</option>
                            </select>
                        </div>
                        <div class="topbar-action" onclick="toggleFacultyDarkMode()" title="Toggle Dark Mode">
                            <svg id="facultyDarkModeIcon" viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                                <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/>
                            </svg>
                        </div>
                        <div class="topbar-action" onclick="showFacultyNotifications()" title="Notifications">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
                            </svg>
                        </div>
                        <div class="topbar-action" onclick="showFacultyHelp()" title="Help">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                                <path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/>
                            </svg>
                        </div>
                        <div class="user-menu" onclick="navigateFacultyTo('my-profile')" title="My Profile" style="cursor: pointer; display: flex; align-items: center; gap: 10px; padding: 6px 12px; background: rgba(74, 144, 226, 0.1); border-radius: 8px;">
                            <div class="user-avatar" style="width: 32px; height: 32px; border-radius: 50%; background: linear-gradient(135deg, #4a90e2, #357abd); display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 600; color: white;">RK</div>
                            <div class="user-info">
                                <div class="user-name" style="font-size: 13px; font-weight: 600;" id="topbarFacultyName">Dr. Rajesh Kumar</div>
                                <div class="user-role" id="authorityBadge" style="font-size: 11px; color: #718096;">Professor</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-area" id="facultyContentArea">
                    <!-- Faculty page content will be injected here -->
                </div>
            </div>
        `;
        
        facultyAppState.facultyName = currentUser.name || 'Dr. Rajesh Kumar';
        document.getElementById('facultyName').textContent = facultyAppState.facultyName;
        navigateFacultyTo('dashboard');
    }

    function navigateFacultyTo(page) {
        facultyAppState.currentPage = page;
        
        // Update active menu item
        document.querySelectorAll('#facultySidebar .menu-item').forEach(item => {
            item.classList.remove('active');
            if (item.getAttribute('data-page') === page) {
                item.classList.add('active');
            }
        });
        
        // Update page title and breadcrumb
        const titles = {
            'dashboard': { title: 'Dashboard', breadcrumb: 'Home / Dashboard' },
            'my-profile': { title: 'My Profile', breadcrumb: 'Home / My Profile' },
            'my-courses': { title: 'My Courses', breadcrumb: 'Academics / My Courses' },
            'attendance': { title: 'Attendance Management', breadcrumb: 'Academics / Attendance' },
            'internal-marks': { title: 'Internal Marks Entry', breadcrumb: 'Academics / Internal Marks' },
            'exams': { title: 'Exams & Evaluation', breadcrumb: 'Academics / Exams' },
            'course-materials': { title: 'Course Materials', breadcrumb: 'Academics / Course Materials' },
            'my-course-students': { title: 'My Course Students', breadcrumb: 'Students / My Course Students' },
            'department-students': { title: 'Department Students', breadcrumb: 'Students / Department Students' },
            'academic-cohort': { title: 'Academic Cohort', breadcrumb: 'Students / Academic Cohort' },
            'student-performance': { title: 'Student Performance', breadcrumb: 'Students / Performance' },
            'leave-requests': { title: 'Leave Requests', breadcrumb: 'Requests / Leave' },
            'grade-change-requests': { title: 'Grade Change Requests', breadcrumb: 'Requests / Grade Changes' },
            'resource-requests': { title: 'Resource Requests', breadcrumb: 'Requests / Resources' },
            'document-signatures': { title: 'Document Signatures', breadcrumb: 'Requests / Signatures' },
            'notices': { title: 'Notices & Announcements', breadcrumb: 'Communication / Notices' },
            'messages': { title: 'Messages', breadcrumb: 'Communication / Messages' },
            'department-overview': { title: 'Department Overview', breadcrumb: 'HOD / Department Overview' },
            'attendance-approval': { title: 'Attendance Approval', breadcrumb: 'HOD / Attendance Approval' },
            'marks-approval': { title: 'Marks Approval', breadcrumb: 'HOD / Marks Approval' },
            'faculty-workload': { title: 'Faculty Workload', breadcrumb: 'HOD / Faculty Workload' },
            'student-issues': { title: 'Student Issues', breadcrumb: 'HOD / Student Issues' },
            'academic-overview': { title: 'Academic Overview', breadcrumb: 'Dean / Academic Overview' },
            'policy-deadlines': { title: 'Policy & Deadlines', breadcrumb: 'Dean / Policy & Deadlines' },
            'inter-dept-reports': { title: 'Inter-Department Reports', breadcrumb: 'Dean / Inter-Dept Reports' },
            'approvals-dashboard': { title: 'Approvals Dashboard', breadcrumb: 'Dean / Approvals Dashboard' }
        };
        
        const pageInfo = titles[page] || { title: 'Page', breadcrumb: 'Home / ' + page };
        document.getElementById('facultyPageTitle').textContent = pageInfo.title;
        document.getElementById('facultyPageBreadcrumb').textContent = pageInfo.breadcrumb;
        
        // Render page content
        const contentArea = document.getElementById('facultyContentArea');
        if (page === 'dashboard') contentArea.innerHTML = getFacultyDashboard();
        else if (page === 'my-profile') contentArea.innerHTML = getFacultyMyProfile();
        else if (page === 'my-courses') contentArea.innerHTML = getFacultyCourses();
        else if (page === 'attendance') contentArea.innerHTML = getFacultyAttendance();
        else if (page === 'internal-marks') contentArea.innerHTML = getFacultyMarks();
        else if (page === 'exams') contentArea.innerHTML = getFacultyExams();
        else if (page === 'course-materials') contentArea.innerHTML = getFacultyMaterials();
        else if (page === 'my-course-students') contentArea.innerHTML = getFacultyStudents();
        else if (page === 'department-students') contentArea.innerHTML = getFacultyDepartmentStudents();
        else if (page === 'academic-cohort') contentArea.innerHTML = getFacultyAcademicCohort();
        else if (page === 'student-performance') contentArea.innerHTML = getFacultyPerformance();
        else if (page === 'leave-requests') contentArea.innerHTML = getFacultyLeaveRequests();
        else if (page === 'grade-change-requests') contentArea.innerHTML = getFacultyGradeChanges();
        else if (page === 'resource-requests') contentArea.innerHTML = getFacultyResourceRequests();
        else if (page === 'document-signatures') contentArea.innerHTML = getFacultyDocumentSignatures();
        else if (page === 'notices') contentArea.innerHTML = getFacultyNotices();
        else if (page === 'messages') contentArea.innerHTML = getFacultyMessages();
        // HOD Pages
        else if (page === 'department-overview') contentArea.innerHTML = getFacultyDepartmentOverview();
        else if (page === 'attendance-approval') contentArea.innerHTML = getFacultyAttendanceApproval();
        else if (page === 'marks-approval') contentArea.innerHTML = getFacultyMarksApproval();
        else if (page === 'faculty-workload') contentArea.innerHTML = getFacultyWorkload();
        else if (page === 'student-issues') contentArea.innerHTML = getFacultyStudentIssues();
        // Dean Pages
        else if (page === 'academic-overview') contentArea.innerHTML = getFacultyAcademicOverview();
        else if (page === 'policy-deadlines') contentArea.innerHTML = getFacultyPolicyDeadlines();
        else if (page === 'inter-dept-reports') contentArea.innerHTML = getFacultyInterDeptReports();
        else if (page === 'approvals-dashboard') contentArea.innerHTML = getFacultyApprovalsDashboard();
        else contentArea.innerHTML = '<div class="card"><p>Page content coming soon...</p></div>';
    }

    function getFacultyMyProfile() {
        return `
            <div class="page-header" style="margin-bottom: 20px;">
                <h2 style="font-size: 24px; font-weight: 700; margin-bottom: 4px;">My Profile</h2>
                <p style="color: #666; font-size: 14px;">View and manage your profile information</p>
            </div>

            <div class="dashboard-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                <div class="card" style="grid-column: span 2;">
                    <div class="card-header">
                        <h3 style="font-size: 16px; font-weight: 700;">Personal Information</h3>
                        <button class="btn" onclick="showNotification('Edit mode enabled', 'info')" style="padding: 8px 16px; font-size: 13px;">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                            </svg>
                            Edit Profile
                        </button>
                    </div>
                    <div class="card-body" style="padding: 20px;">
                        <div style="display: grid; grid-template-columns: 120px auto; gap: 20px; align-items: start;">
                            <div style="text-align: center;">
                                <div style="width: 100px; height: 100px; border-radius: 50%; background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%); display: flex; align-items: center; justify-content: center; font-size: 36px; font-weight: 600; color: white; margin: 0 auto 12px;">
                                    ${facultyAppState.facultyName.split(' ').map(n => n[0]).join('').substring(0,2)}
                                </div>
                                <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="showNotification('Photo upload feature coming soon!', 'info')">Change Photo</button>
                            </div>
                            <div style="flex: 1;">
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                                    <div>
                                        <div style="font-size: 12px; color: #718096; margin-bottom: 4px;">Full Name</div>
                                        <div style="font-size: 15px; font-weight: 500;">${facultyAppState.facultyName}</div>
                                    </div>
                                    <div>
                                        <div style="font-size: 12px; color: #718096; margin-bottom: 4px;">Faculty ID</div>
                                        <div style="font-size: 15px; font-weight: 500;">${facultyAppState.facultyId}</div>
                                    </div>
                                    <div>
                                        <div style="font-size: 12px; color: #718096; margin-bottom: 4px;">Department</div>
                                        <div style="font-size: 15px; font-weight: 500;">${facultyAppState.department}</div>
                                    </div>
                                    <div>
                                        <div style="font-size: 12px; color: #718096; margin-bottom: 4px;">Designation</div>
                                        <div style="font-size: 15px; font-weight: 500;">${facultyAppState.authority_level === 'professor' ? 'Professor' : facultyAppState.authority_level === 'hod' ? 'HOD - Department Head' : 'Dean - Academic Affairs'}</div>
                                    </div>
                                    <div>
                                        <div style="font-size: 12px; color: #718096; margin-bottom: 4px;">Email</div>
                                        <div style="font-size: 15px; font-weight: 500;">rajesh.kumar@college.edu</div>
                                    </div>
                                    <div>
                                        <div style="font-size: 12px; color: #718096; margin-bottom: 4px;">Phone</div>
                                        <div style="font-size: 15px; font-weight: 500;">+91 98765 43210</div>
                                    </div>
                                    <div>
                                        <div style="font-size: 12px; color: #718096; margin-bottom: 4px;">Date of Joining</div>
                                        <div style="font-size: 15px; font-weight: 500;">15 August 2018</div>
                                    </div>
                                    <div>
                                        <div style="font-size: 12px; color: #718096; margin-bottom: 4px;">Office Room</div>
                                        <div style="font-size: 15px; font-weight: 500;">CS-Block, Room 305</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 style="font-size: 16px; font-weight: 700;">Academic Qualifications</h3>
                    </div>
                    <div class="card-body" style="padding: 20px;">
                        <div style="display: flex; flex-direction: column; gap: 16px;">
                            <div style="padding: 12px; background: rgba(74, 144, 226, 0.1); border-radius: 8px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Ph.D. in Computer Science</div>
                                <div style="font-size: 13px; color: #718096;">IIT Delhi  2015</div>
                            </div>
                            <div style="padding: 12px; background: rgba(74, 144, 226, 0.1); border-radius: 8px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">M.Tech in Computer Science</div>
                                <div style="font-size: 13px; color: #718096;">IIT Bombay  2010</div>
                            </div>
                            <div style="padding: 12px; background: rgba(74, 144, 226, 0.1); border-radius: 8px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">B.Tech in Computer Engineering</div>
                                <div style="font-size: 13px; color: #718096;">NIT Trichy  2008</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 style="font-size: 16px; font-weight: 700;">Specializations</h3>
                    </div>
                    <div class="card-body" style="padding: 20px;">
                        <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                            <span style="padding: 6px 12px; background: rgba(74, 144, 226, 0.1); border-radius: 16px; font-size: 13px;">Data Structures</span>
                            <span style="padding: 6px 12px; background: rgba(74, 144, 226, 0.1); border-radius: 16px; font-size: 13px;">Algorithms</span>
                            <span style="padding: 6px 12px; background: rgba(74, 144, 226, 0.1); border-radius: 16px; font-size: 13px;">Database Systems</span>
                            <span style="padding: 6px 12px; background: rgba(74, 144, 226, 0.1); border-radius: 16px; font-size: 13px;">Machine Learning</span>
                            <span style="padding: 6px 12px; background: rgba(74, 144, 226, 0.1); border-radius: 16px; font-size: 13px;">Distributed Systems</span>
                        </div>
                    </div>
                </div>

                <div class="card" style="grid-column: span 2;">
                    <div class="card-header">
                        <h3 style="font-size: 16px; font-weight: 700;">Current Courses</h3>
                    </div>
                    <div class="card-body">
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Course Code</th>
                                        <th>Course Name</th>
                                        <th>Semester</th>
                                        <th>Section</th>
                                        <th>Students</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${facultyAppState.courses.map(course => `
                                        <tr>
                                            <td><span style="font-weight: 500; color: #4a90e2;">${course.code}</span></td>
                                            <td>${course.name}</td>
                                            <td>${course.semester}</td>
                                            <td>${course.section}</td>
                                            <td>${course.students}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 style="font-size: 16px; font-weight: 700;">Account Settings</h3>
                    </div>
                    <div class="card-body" style="padding: 20px;">
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <button class="btn btn-secondary" style="justify-content: flex-start; display: flex; align-items: center;" onclick="showNotification('Password change dialog opening...', 'info')">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16" style="margin-right: 8px;">
                                    <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                                </svg>
                                Change Password
                            </button>
                            <button class="btn btn-secondary" style="justify-content: flex-start; display: flex; align-items: center;" onclick="showNotification('Email preferences...', 'info')">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16" style="margin-right: 8px;">
                                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                                </svg>
                                Email Preferences
                            </button>
                            <button class="btn btn-secondary" style="justify-content: flex-start; display: flex; align-items: center;" onclick="showNotification('Privacy settings...', 'info')">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16" style="margin-right: 8px;">
                                    <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
                                </svg>
                                Privacy Settings
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 style="font-size: 16px; font-weight: 700;">Quick Stats</h3>
                    </div>
                    <div class="card-body" style="padding: 20px;">
                        <div style="display: flex; flex-direction: column; gap: 16px;">
                            <div>
                                <div style="font-size: 12px; color: #718096; margin-bottom: 4px;">Total Courses</div>
                                <div style="font-size: 24px; font-weight: 600; color: #4a90e2;">${facultyAppState.courses.length}</div>
                            </div>
                            <div>
                                <div style="font-size: 12px; color: #718096; margin-bottom: 4px;">Total Students</div>
                                <div style="font-size: 24px; font-weight: 600; color: #4a90e2;">${facultyAppState.courses.reduce((sum, c) => sum + c.students, 0)}</div>
                            </div>
                            <div>
                                <div style="font-size: 12px; color: #718096; margin-bottom: 4px;">Years of Experience</div>
                                <div style="font-size: 24px; font-weight: 600; color: #4a90e2;">6</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    function getFacultyDashboard() {
        return `
            <div class="page-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Today's Schedule</div>
                    </div>
                    <div class="task-list">
                        <div class="task-item" onclick="navigateFacultyTo('attendance')">
                            <div style="width: 16px; height: 16px; background-color: #4dd0e1; border-radius: 50%; flex-shrink: 0;"></div>
                            <div class="task-content">
                                <div class="task-title">CS201 - Data Structures (L4-5)</div>
                                <div class="task-time">09:00 AM - 10:30 AM | Lab A</div>
                            </div>
                        </div>
                        <div class="task-item" onclick="navigateFacultyTo('attendance')">
                            <div style="width: 16px; height: 16px; background-color: #ffb74d; border-radius: 50%; flex-shrink: 0;"></div>
                            <div class="task-content">
                                <div class="task-title">CS202 - DBMS (L1-2)</div>
                                <div class="task-time">11:00 AM - 12:30 PM | Lecture Hall C</div>
                            </div>
                        </div>
                        <div class="task-item">
                            <div style="width: 16px; height: 16px; background-color: #81c784; border-radius: 50%; flex-shrink: 0;"></div>
                            <div class="task-content">
                                <div class="task-title">Department Meeting</div>
                                <div class="task-time">02:00 PM - 03:30 PM | Conference Room 1</div>
                            </div>
                        </div>
                        <div class="task-item" onclick="navigateFacultyTo('exams')">
                            <div style="width: 16px; height: 16px; background-color: #ef5350; border-radius: 50%; flex-shrink: 0;"></div>
                            <div class="task-content">
                                <div class="task-title">Exam Invigilation - CS203</div>
                                <div class="task-time">04:00 PM - 06:00 PM | Exam Hall 2</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Pending Tasks</div>
                        <div class="card-meta">7 items</div>
                    </div>
                    <div class="task-list">
                        <div class="task-item" onclick="navigateFacultyTo('attendance')">
                            <div class="task-checkbox"></div>
                            <div class="task-content">
                                <div class="task-title">Attendance: CS201 (Sec A) - Pending</div>
                                <div class="task-time">Due: Today 5 PM</div>
                            </div>
                        </div>
                        <div class="task-item" onclick="navigateFacultyTo('internal-marks')">
                            <div class="task-checkbox"></div>
                            <div class="task-content">
                                <div class="task-title">Internal Marks: CS202 - Quiz 2</div>
                                <div class="task-time">Due: 2 days</div>
                            </div>
                        </div>
                        <div class="task-item" onclick="navigateFacultyTo('course-materials')">
                            <div class="task-checkbox"></div>
                            <div class="task-content">
                                <div class="task-title">Course Material Upload: CS203</div>
                                <div class="task-time">Due: 5 days</div>
                            </div>
                        </div>
                        <div class="task-item" onclick="navigateFacultyTo('grade-change-requests')">
                            <div class="task-checkbox"></div>
                            <div class="task-content">
                                <div class="task-title">Grade Change Request Review</div>
                                <div class="task-time">3 pending</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="page-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Key Performance Indicators</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="data-card" onclick="navigateFacultyTo('my-courses')">
                            <div class="data-card-label">Total Students</div>
                            <div class="data-card-value">180</div>
                            <div class="kpi-trend">Across 4 courses</div>
                        </div>
                        <div class="data-card" onclick="navigateFacultyTo('attendance')">
                            <div class="data-card-label">Avg Attendance</div>
                            <div class="data-card-value">83%</div>
                            <div class="kpi-trend"> 2% from last week</div>
                        </div>
                        <div class="data-card" onclick="navigateFacultyTo('my-course-students')">
                            <div class="data-card-label">At-Risk Students</div>
                            <div class="data-card-value">12</div>
                            <div class="kpi-trend"> 3 students improved</div>
                        </div>
                        <div class="data-card" onclick="navigateFacultyTo('internal-marks')">
                            <div class="data-card-label">Avg Internal Marks</div>
                            <div class="data-card-value">74%</div>
                            <div class="kpi-trend">Out of 100</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">My Courses</div>
                        <div class="card-meta">4 active</div>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        ${facultyAppState.courses.map(course => `
                            <div class="course-card-mini" onclick="navigateFacultyTo('my-courses')">
                                <div style="font-size: 11px; color: #4a90e2; text-transform: uppercase;">${course.code}</div>
                                <div style="font-size: 12px; color: #333; margin: 4px 0;">${course.name}</div>
                                <div style="font-size: 11px; color: #666;">Section ${course.section} | ${course.students} Students</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Alerts & Notifications</div>
                </div>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <div class="alert alert-warning">
                        <strong>Attendance Alert:</strong> CS202 Section B has 3 students below 75% attendance threshold
                    </div>
                    <div class="alert alert-danger">
                        <strong>Marks Pending:</strong> Internal marks for CS203 (Quiz 2) not submitted yet
                    </div>
                    <div class="alert alert-info">
                        <strong>Request Pending:</strong> 2 leave requests awaiting your approval
                    </div>
                </div>
            </div>
        `;
    }

    function getFacultyCourses() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Assigned Courses</div>
                    <div class="card-meta">${facultyAppState.courses.length} courses</div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px;">
                    ${facultyAppState.courses.map(c => `
                        <div class="course-item" style="padding: 20px; background: rgba(74, 144, 226, 0.05); border: 1px solid rgba(74, 144, 226, 0.2); border-radius: 8px; cursor: pointer;">
                            <div class="course-code" style="font-size: 11px; color: #4a90e2; font-weight: 600; margin-bottom: 4px;">${c.code}</div>
                            <div class="course-name" style="font-weight: 600; margin-bottom: 8px; font-size: 16px;">${c.name}</div>
                            <div class="course-info" style="font-size: 13px; color: #718096; margin-bottom: 12px;">
                                <span>Sem: ${c.semester}</span>
                                <span style="margin: 0 8px;">|</span>
                                <span>Sec: ${c.section}</span>
                                <span style="margin: 0 8px;">|</span>
                                <span>${c.students} Students</span>
                            </div>
                            <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #e0e0e0; display: flex; gap: 8px; flex-wrap: wrap;">
                                <button class="btn btn-primary" style="font-size: 11px; padding: 8px 12px;" onclick="navigateFacultyTo('attendance'); event.stopPropagation();">Mark Attendance</button>
                                <button class="btn btn-secondary" style="font-size: 11px; padding: 8px 12px;" onclick="navigateFacultyTo('internal-marks'); event.stopPropagation();">Enter Marks</button>
                                <button class="btn btn-secondary" style="font-size: 11px; padding: 8px 12px;" onclick="navigateFacultyTo('course-materials'); event.stopPropagation();">Materials</button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Course Statistics</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Course</th>
                                <th>Section</th>
                                <th>Students</th>
                                <th>Avg Attendance</th>
                                <th>Avg Marks</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Data Structures</td>
                                <td>A</td>
                                <td>45</td>
                                <td>85%</td>
                                <td>76%</td>
                            </tr>
                            <tr>
                                <td>DBMS</td>
                                <td>B</td>
                                <td>42</td>
                                <td>81%</td>
                                <td>73%</td>
                            </tr>
                            <tr>
                                <td>Operating Systems</td>
                                <td>A</td>
                                <td>48</td>
                                <td>88%</td>
                                <td>78%</td>
                            </tr>
                            <tr>
                                <td>Computer Networks</td>
                                <td>B</td>
                                <td>45</td>
                                <td>82%</td>
                                <td>75%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyAttendance() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Mark Attendance</div>
                    <div class="card-meta">Select course and date to begin</div>
                </div>
                <div class="filter-bar" style="display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap;">
                    <div class="filter-group" style="flex: 1; min-width: 200px;">
                        <label class="filter-label" style="display: block; font-size: 11px; color: #666; margin-bottom: 4px;">Course:</label>
                        <select class="filter-select" id="attendanceCourse" onchange="updateFacultyAttendanceStudents()" style="width: 100%;">
                            <option value="">Select Course</option>
                            ${facultyAppState.courses.map(c => `<option value="${c.code}">${c.code} - ${c.name}</option>`).join('')}
                        </select>
                    </div>
                    <div class="filter-group" style="flex: 1; min-width: 150px;">
                        <label class="filter-label" style="display: block; font-size: 11px; color: #666; margin-bottom: 4px;">Date:</label>
                        <input type="date" class="filter-input" id="attendanceDate" value="${new Date().toISOString().split('T')[0]}" style="width: 100%;">
                    </div>
                    <div class="filter-group" style="flex: 1; min-width: 150px;">
                        <label class="filter-label" style="display: block; font-size: 11px; color: #666; margin-bottom: 4px;">Session:</label>
                        <select class="filter-select" style="width: 100%;">
                            <option>Forenoon (L1-2)</option>
                            <option>Afternoon (L3-4)</option>
                        </select>
                    </div>
                </div>
                <div class="table-container">
                    <table id="attendanceTable">
                        <thead>
                            <tr>
                                <th style="width: 40px;"><input type="checkbox" onchange="toggleAllFacultyAttendance(this)"></th>
                                <th>Roll No</th>
                                <th>Name</th>
                                <th>Status</th>
                                <th>Remarks</th>
                            </tr>
                        </thead>
                        <tbody id="facultyAttendanceBody">
                            <tr><td colspan="5" style="text-align: center; color: #666; padding: 30px;">Select a course to view students</td></tr>
                        </tbody>
                    </table>
                </div>
                <div style="display: flex; gap: 10px; margin-top: 20px; flex-wrap: wrap; align-items: center;">
                    <button class="btn btn-primary" onclick="submitFacultyAttendance()">Submit Attendance</button>
                    <button class="btn btn-secondary" onclick="clearFacultyAttendance()">Clear Form</button>
                    <span style="margin-left: auto; color: #666; font-size: 11px;">Status: <span style="color: #4a90e2;">Not Submitted</span></span>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Submission History</div>
                    <div class="card-meta">Last 10 submissions</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Course</th>
                                <th>Section</th>
                                <th>Session</th>
                                <th>Students</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2024-01-15</td>
                                <td>CS201</td>
                                <td>A</td>
                                <td>L1-2</td>
                                <td>44/45</td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewAttendanceDetail('CS201', 'A', '2024-01-15')">View</button></td>
                            </tr>
                            <tr>
                                <td>2024-01-14</td>
                                <td>CS202</td>
                                <td>B</td>
                                <td>L3-4</td>
                                <td>41/42</td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewAttendanceDetail('CS202', 'B', '2024-01-14')">View</button></td>
                            </tr>
                            <tr>
                                <td>2024-01-12</td>
                                <td>CS203</td>
                                <td>A</td>
                                <td>L1-2</td>
                                <td>47/48</td>
                                <td><span class="status-badge status-submitted">Submitted</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewAttendanceDetail('CS203', 'A', '2024-01-12')">View</button></td>
                            </tr>
                            <tr>
                                <td>2024-01-11</td>
                                <td>CS204</td>
                                <td>B</td>
                                <td>L3-4</td>
                                <td>44/45</td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewAttendanceDetail('CS204', 'B', '2024-01-11')">View</button></td>
                            </tr>
                            <tr>
                                <td>2024-01-10</td>
                                <td>CS201</td>
                                <td>A</td>
                                <td>L3-4</td>
                                <td>43/45</td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewAttendanceRecord('2024-01-10', 'CS201')">View</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyMarks() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Internal Marks Entry</div>
                    <div class="card-meta">Enter and submit marks for continuous evaluation</div>
                </div>
                <div class="filter-bar" style="display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap;">
                    <div class="filter-group" style="flex: 1; min-width: 200px;">
                        <label class="filter-label" style="display: block; font-size: 11px; color: #666; margin-bottom: 4px;">Course:</label>
                        <select class="filter-select" id="marksCourse" onchange="updateFacultyMarksStudents()" style="width: 100%;">
                            <option value="">Select Course</option>
                            ${facultyAppState.courses.map(c => `<option value="${c.code}">${c.code} - ${c.name}</option>`).join('')}
                        </select>
                    </div>
                    <div class="filter-group" style="flex: 1; min-width: 150px;">
                        <label class="filter-label" style="display: block; font-size: 11px; color: #666; margin-bottom: 4px;">Assessment:</label>
                        <select class="filter-select" style="width: 100%;">
                            <option>Quiz 1</option>
                            <option>Quiz 2</option>
                            <option>Assignment 1</option>
                            <option>Mid Exam</option>
                        </select>
                    </div>
                    <div class="filter-group" style="min-width: 100px;">
                        <label class="filter-label" style="display: block; font-size: 11px; color: #666; margin-bottom: 4px;">Max Marks:</label>
                        <input type="number" class="filter-input" value="20" style="width: 80px;">
                    </div>
                </div>
                <div class="alert alert-info">
                    Marks are saved in draft mode until submitted. After submission, only HOD can unlock for modifications.
                </div>
                <div class="table-container">
                    <table id="marksTable">
                        <thead>
                            <tr>
                                <th>Roll No</th>
                                <th>Name</th>
                                <th>Marks</th>
                                <th>Out of</th>
                                <th>%</th>
                                <th>Grade</th>
                            </tr>
                        </thead>
                        <tbody id="facultyMarksBody">
                            <tr><td colspan="6" style="text-align: center; color: #666; padding: 30px;">Select a course to view students</td></tr>
                        </tbody>
                    </table>
                </div>
                <div style="display: flex; gap: 10px; margin-top: 20px; flex-wrap: wrap; align-items: center;">
                    <button class="btn btn-primary" onclick="submitFacultyMarks()">Submit Marks</button>
                    <button class="btn btn-secondary" onclick="saveFacultyMarksDraft()">Save as Draft</button>
                    <span style="margin-left: auto; color: #666; font-size: 11px;">Status: <span style="color: #ffb74d;">Draft</span></span>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Marks Submission History</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Course</th>
                                <th>Assessment</th>
                                <th>Date Submitted</th>
                                <th>Total Marks</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>CS201</td>
                                <td>Quiz 2</td>
                                <td>2024-01-12</td>
                                <td>20</td>
                                <td><span class="status-badge status-approved">Approved by HOD</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewMarksDetail('CS201', 'Quiz 2')">View</button></td>
                            </tr>
                            <tr>
                                <td>CS202</td>
                                <td>Assignment 1</td>
                                <td>2024-01-10</td>
                                <td>15</td>
                                <td><span class="status-badge status-submitted">Submitted</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewMarksDetail('CS202', 'Assignment 1')">View</button></td>
                            </tr>
                            <tr>
                                <td>CS203</td>
                                <td>Quiz 1</td>
                                <td>2024-01-08</td>
                                <td>20</td>
                                <td><span class="status-badge status-pending">Pending HOD Review</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewMarksDetail('CS203', 'Quiz 1')">View</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyExams() {
        return `
            <div class="page-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Exam Schedule</div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Course</th>
                                    <th>Exam Type</th>
                                    <th>Date</th>
                                    <th>Time</th>
                                    <th>Venue</th>
                                    <th>Role</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>CS201</td>
                                    <td>Mid Semester</td>
                                    <td>2024-02-10</td>
                                    <td>10:00 AM</td>
                                    <td>Hall 1</td>
                                    <td><span class="badge">Invigilator</span></td>
                                </tr>
                                <tr>
                                    <td>CS202</td>
                                    <td>Mid Semester</td>
                                    <td>2024-02-12</td>
                                    <td>2:00 PM</td>
                                    <td>Hall 2</td>
                                    <td><span class="badge">Setter</span></td>
                                </tr>
                                <tr>
                                    <td>CS203</td>
                                    <td>Practical</td>
                                    <td>2024-02-15</td>
                                    <td>9:00 AM</td>
                                    <td>Lab A</td>
                                    <td><span class="badge">Examiner</span></td>
                                </tr>
                                <tr>
                                    <td>CS204</td>
                                    <td>End Semester</td>
                                    <td>2024-04-20</td>
                                    <td>2:00 PM</td>
                                    <td>Hall 3</td>
                                    <td><span class="badge">Coordinator</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="page-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Evaluation Status</div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Course</th>
                                    <th>Exam</th>
                                    <th>Status</th>
                                    <th>Submitted</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>CS201</td>
                                    <td>Quiz 1</td>
                                    <td><span class="status-badge status-approved">Evaluated</span></td>
                                    <td>2024-01-16</td>
                                    <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="downloadEvaluationReport()">Download</button></td>
                                </tr>
                                <tr>
                                    <td>CS202</td>
                                    <td>Quiz 2</td>
                                    <td><span class="status-badge status-pending">Pending</span></td>
                                    <td>-</td>
                                    <td><button class="btn btn-primary" style="padding: 4px 8px; font-size: 10px;" onclick="navigateFacultyTo('internal-marks')">Evaluate</button></td>
                                </tr>
                                <tr>
                                    <td>CS203</td>
                                    <td>Assignment</td>
                                    <td><span class="status-badge status-approved">Evaluated</span></td>
                                    <td>2024-01-14</td>
                                    <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="downloadEvaluationReport()">Download</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        `;
    }

    function getFacultyMaterials() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Course Materials Upload</div>
                    <div class="card-meta">4 courses managed</div>
                </div>
                <div class="filter-bar" style="display: flex; gap: 12px; margin-bottom: 20px;">
                    <div class="filter-group" style="flex: 1; min-width: 200px;">
                        <label class="filter-label" style="display: block; font-size: 11px; color: #666; margin-bottom: 4px;">Course:</label>
                        <select class="filter-select" style="width: 100%;">
                            <option>Select Course</option>
                            ${facultyAppState.courses.map(c => `<option>${c.code} - ${c.name}</option>`).join('')}
                        </select>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div style="border: 2px dashed #4a90e2; border-radius: 8px; padding: 40px; text-align: center; cursor: pointer;">
                        <div style="font-size: 32px; margin-bottom: 10px;"></div>
                        <div style="color: #718096; margin-bottom: 5px;">Drag and drop files here</div>
                        <div style="font-size: 11px; color: #999;">or click to browse</div>
                    </div>
                    <div>
                        <div style="font-size: 12px; color: #666; margin-bottom: 10px; text-transform: uppercase;">Supported Formats</div>
                        <div style="display: flex; flex-direction: column; gap: 6px; font-size: 12px; color: #718096;">
                            <div> PDF, DOC, DOCX</div>
                            <div> PPT, PPTX, XLS</div>
                            <div> MP4, AVI (max 500MB)</div>
                            <div> JPG, PNG</div>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 30px; border-top: 1px solid #e0e0e0; padding-top: 20px;">
                    <div style="font-size: 12px; color: #666; margin-bottom: 15px; text-transform: uppercase;">Recently Uploaded</div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>File Name</th>
                                    <th>Course</th>
                                    <th>Type</th>
                                    <th>Size</th>
                                    <th>Uploaded</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Chapter 5 - Data Structures.pdf</td>
                                    <td>CS201</td>
                                    <td>PDF</td>
                                    <td>2.3 MB</td>
                                    <td>2024-01-15</td>
                                    <td><button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="if(confirm('Delete this file?')) showNotification('File deleted', 'success')">Delete</button></td>
                                </tr>
                                <tr>
                                    <td>Database Design Lecture.pptx</td>
                                    <td>CS202</td>
                                    <td>PPTX</td>
                                    <td>5.1 MB</td>
                                    <td>2024-01-14</td>
                                    <td><button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="if(confirm('Delete this file?')) showNotification('File deleted', 'success')">Delete</button></td>
                                </tr>
                                <tr>
                                    <td>OS Concepts Tutorial Video.mp4</td>
                                    <td>CS203</td>
                                    <td>MP4</td>
                                    <td>128 MB</td>
                                    <td>2024-01-13</td>
                                    <td><button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="if(confirm('Delete this file?')) showNotification('File deleted', 'success')">Delete</button></td>
                                </tr>
                                <tr>
                                    <td>Network Architecture Diagram.png</td>
                                    <td>CS204</td>
                                    <td>PNG</td>
                                    <td>0.8 MB</td>
                                    <td>2024-01-12</td>
                                    <td><button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="if(confirm('Delete this file?')) showNotification('File deleted', 'success')">Delete</button></td>
                                </tr>
                                <tr>
                                    <td>Assignment 1 Template.docx</td>
                                    <td>CS201</td>
                                    <td>DOCX</td>
                                    <td>0.5 MB</td>
                                    <td>2024-01-11</td>
                                    <td><button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="if(confirm('Delete this file?')) showNotification('File deleted', 'success')">Delete</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        `;
    }

    function getFacultyStudents() {
        return `
            <div class="alert alert-info" style="margin-bottom: 20px; padding: 12px; background: rgba(74, 144, 226, 0.1); border-left: 3px solid #4a90e2; border-radius: 4px;">
                Showing students from all your courses. Click on a student to view their profile.
            </div>
            <div class="card">
                <div class="card-header">
                    <div class="card-title">My Course Students</div>
                    <div class="card-meta">${facultyAppState.students.length} students across ${facultyAppState.courses.length} courses</div>
                </div>
                <div style="display: flex; gap: 12px; margin-bottom: 20px;">
                    <select class="filter-select" style="flex: 1;">
                        <option>All Courses</option>
                        ${facultyAppState.courses.map(c => `<option>${c.code} - ${c.name}</option>`).join('')}
                    </select>
                    <select class="filter-select" style="flex: 1;">
                        <option>All Status</option>
                        <option>Excellent</option>
                        <option>Good</option>
                        <option>At Risk</option>
                    </select>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Roll No</th>
                                <th>Name</th>
                                <th>Program</th>
                                <th>Year</th>
                                <th>Attendance %</th>
                                <th>Internal Marks %</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${facultyAppState.students.map(s => `
                                <tr>
                                    <td>${s.rollNo}</td>
                                    <td>${s.name}</td>
                                    <td>${s.program}</td>
                                    <td>${s.year}</td>
                                    <td>${s.attendance}%</td>
                                    <td>${s.marks}%</td>
                                    <td><span class="status-badge status-${s.status === 'Excellent' ? 'excellent' : s.status === 'Good' ? 'approved' : 'at-risk'}">${s.status}</span></td>
                                    <td><button class="btn" style="padding: 6px 12px; font-size: 11px;" onclick="showStudentProfile('${s.rollNo}')">View</button></td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="section-separator"></div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">At-Risk Students Summary</div>
                    <div class="card-meta">${facultyAppState.students.filter(s => s.status === 'At Risk').length} students require attention</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Roll No</th>
                                <th>Name</th>
                                <th>Issue</th>
                                <th>Attendance</th>
                                <th>Marks</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${facultyAppState.students.filter(s => s.status === 'At Risk').map(s => `
                                <tr>
                                    <td>${s.rollNo}</td>
                                    <td>${s.name}</td>
                                    <td>${s.attendance < 75 ? 'Low attendance' : 'Low marks'}</td>
                                    <td>${s.attendance}%</td>
                                    <td>${s.marks}%</td>
                                    <td><button class="btn-danger" style="padding: 6px 12px; font-size: 11px;" onclick="flagConcern('${s.rollNo}')">Flag to HOD</button></td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyDepartmentStudents() {
        if (facultyAppState.authority_level !== 'hod') {
            return '<div style="padding: 20px; color: #ef5350;">Access Denied: This feature is only available to HOD.</div>';
        }
        return `
            <div class="alert alert-info" style="margin-bottom: 20px; padding: 12px; background: rgba(74, 144, 226, 0.1); border-left: 3px solid #4a90e2; border-radius: 4px;">
                View and manage all students in your department across all batches and programs.
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Department Students Overview</div>
                    <button class="btn btn-primary" onclick="showNotification('Export started...', 'info')">Export List</button>
                </div>
                <div class="data-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 24px;">
                    <div class="data-card">
                        <div class="data-card-label">Total Students</div>
                        <div class="data-card-value">350</div>
                    </div>
                    <div class="data-card">
                        <div class="data-card-label">1st Year</div>
                        <div class="data-card-value">95</div>
                    </div>
                    <div class="data-card">
                        <div class="data-card-label">2nd Year</div>
                        <div class="data-card-value">88</div>
                    </div>
                    <div class="data-card">
                        <div class="data-card-label">3rd Year</div>
                        <div class="data-card-value">92</div>
                    </div>
                    <div class="data-card">
                        <div class="data-card-label">4th Year</div>
                        <div class="data-card-value">75</div>
                    </div>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">All Department Students</div>
                    <div class="card-meta">350 students in Computer Science Department</div>
                </div>
                <div style="display: flex; gap: 12px; margin-bottom: 20px;">
                    <select class="filter-select" style="flex: 1;">
                        <option>All Years</option>
                        <option>1st Year</option>
                        <option>2nd Year</option>
                        <option>3rd Year</option>
                        <option>4th Year</option>
                    </select>
                    <select class="filter-select" style="flex: 1;">
                        <option>All Programs</option>
                        <option>B.Tech CSE</option>
                        <option>B.Tech AI/ML</option>
                        <option>M.Tech CSE</option>
                    </select>
                    <select class="filter-select" style="flex: 1;">
                        <option>All Status</option>
                        <option>Excellent</option>
                        <option>Good</option>
                        <option>At Risk</option>
                    </select>
                    <input type="text" placeholder="Search by name or roll no..." style="flex: 2; padding: 8px 12px; border: 1px solid #e0e0e0; border-radius: 4px;">
                </div>
                <div class="table-container scrollable">
                    <table>
                        <thead>
                            <tr>
                                <th>Roll No</th>
                                <th>Name</th>
                                <th>Program</th>
                                <th>Year</th>
                                <th>Section</th>
                                <th>CGPA</th>
                                <th>Attendance</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>CS2024001</td>
                                <td>Rahul Sharma</td>
                                <td>B.Tech CSE</td>
                                <td>1st</td>
                                <td>A</td>
                                <td>8.9</td>
                                <td>92%</td>
                                <td><span class="status-badge status-excellent">Excellent</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="showStudentProfile('CS2024001')">View</button></td>
                            </tr>
                            <tr>
                                <td>CS2024002</td>
                                <td>Priya Singh</td>
                                <td>B.Tech CSE</td>
                                <td>1st</td>
                                <td>A</td>
                                <td>9.2</td>
                                <td>95%</td>
                                <td><span class="status-badge status-excellent">Excellent</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="showStudentProfile('CS2024002')">View</button></td>
                            </tr>
                            <tr>
                                <td>CS2023015</td>
                                <td>Amit Kumar</td>
                                <td>B.Tech CSE</td>
                                <td>2nd</td>
                                <td>B</td>
                                <td>7.5</td>
                                <td>78%</td>
                                <td><span class="status-badge status-approved">Good</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="showStudentProfile('CS2023015')">View</button></td>
                            </tr>
                            <tr>
                                <td>CS2023022</td>
                                <td>Sneha Patel</td>
                                <td>B.Tech AI/ML</td>
                                <td>2nd</td>
                                <td>A</td>
                                <td>6.2</td>
                                <td>68%</td>
                                <td><span class="status-badge status-at-risk">At Risk</span></td>
                                <td>
                                    <button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="showStudentProfile('CS2023022')">View</button>
                                    <button class="btn btn-danger" style="padding: 4px 8px; font-size: 10px; margin-left: 4px;" onclick="showInterventionModal('CS2023022', 'Sneha Patel')">Intervene</button>
                                </td>
                            </tr>
                            <tr>
                                <td>CS2022008</td>
                                <td>Vikram Reddy</td>
                                <td>B.Tech CSE</td>
                                <td>3rd</td>
                                <td>A</td>
                                <td>8.1</td>
                                <td>88%</td>
                                <td><span class="status-badge status-approved">Good</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="showStudentProfile('CS2022008')">View</button></td>
                            </tr>
                            <tr>
                                <td>CS2021045</td>
                                <td>Ananya Gupta</td>
                                <td>B.Tech CSE</td>
                                <td>4th</td>
                                <td>B</td>
                                <td>9.0</td>
                                <td>94%</td>
                                <td><span class="status-badge status-excellent">Excellent</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="showStudentProfile('CS2021045')">View</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid rgba(74, 144, 226, 0.1);">
                    <div style="font-size: 13px; color: #666;">Showing 1-6 of 350 students</div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-secondary" style="padding: 6px 12px;" onclick="showNotification('Already on first page', 'info')">Previous</button>
                        <button class="btn btn-primary" style="padding: 6px 12px;" onclick="showNotification('Loading next page...', 'info')">Next</button>
                    </div>
                </div>
            </div>
        `;
    }

    function getFacultyAcademicCohort() {
        if (facultyAppState.authority_level !== 'hod') {
            return '<div style="padding: 20px; color: #ef5350;">Access Denied: This feature is only available to HOD.</div>';
        }
        return `
            <div class="alert alert-info" style="margin-bottom: 20px; padding: 12px; background: rgba(74, 144, 226, 0.1); border-left: 3px solid #4a90e2; border-radius: 4px;">
                Analyze batch-wise performance, cohort statistics, and year-over-year trends.
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Cohort Analytics</div>
                    <select class="filter-select" style="min-width: 150px;">
                        <option>2024-25 Batch</option>
                        <option>2023-24 Batch</option>
                        <option>2022-23 Batch</option>
                        <option>2021-22 Batch</option>
                    </select>
                </div>
                <div class="data-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 24px;">
                    <div class="data-card">
                        <div class="data-card-label">Cohort Size</div>
                        <div class="data-card-value">95</div>
                    </div>
                    <div class="data-card">
                        <div class="data-card-label">Avg CGPA</div>
                        <div class="data-card-value">7.8</div>
                    </div>
                    <div class="data-card">
                        <div class="data-card-label">Avg Attendance</div>
                        <div class="data-card-value">84%</div>
                    </div>
                    <div class="data-card">
                        <div class="data-card-label">Pass Rate</div>
                        <div class="data-card-value" style="color: #4caf50;">96%</div>
                    </div>
                    <div class="data-card">
                        <div class="data-card-label">At Risk</div>
                        <div class="data-card-value" style="color: #ef5350;">8</div>
                    </div>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="page-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">CGPA Distribution</div>
                    </div>
                    <div style="padding: 20px;">
                        <div style="display: flex; align-items: flex-end; gap: 8px; height: 150px; margin-bottom: 10px;">
                            <div style="flex: 1; background: #4a90e2; height: 20%; border-radius: 4px 4px 0 0;" title="< 5.0: 3 students"></div>
                            <div style="flex: 1; background: #4a90e2; height: 35%; border-radius: 4px 4px 0 0;" title="5.0-6.0: 8 students"></div>
                            <div style="flex: 1; background: #4a90e2; height: 60%; border-radius: 4px 4px 0 0;" title="6.0-7.0: 18 students"></div>
                            <div style="flex: 1; background: #4a90e2; height: 85%; border-radius: 4px 4px 0 0;" title="7.0-8.0: 32 students"></div>
                            <div style="flex: 1; background: #4a90e2; height: 70%; border-radius: 4px 4px 0 0;" title="8.0-9.0: 25 students"></div>
                            <div style="flex: 1; background: #4caf50; height: 30%; border-radius: 4px 4px 0 0;" title="9.0+: 9 students"></div>
                        </div>
                        <div style="display: flex; gap: 8px; font-size: 10px; color: #666;">
                            <div style="flex: 1; text-align: center;">< 5</div>
                            <div style="flex: 1; text-align: center;">5-6</div>
                            <div style="flex: 1; text-align: center;">6-7</div>
                            <div style="flex: 1; text-align: center;">7-8</div>
                            <div style="flex: 1; text-align: center;">8-9</div>
                            <div style="flex: 1; text-align: center;">9+</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Year-over-Year Comparison</div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Metric</th>
                                    <th>2023-24</th>
                                    <th>2024-25</th>
                                    <th>Change</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Avg CGPA</td>
                                    <td>7.5</td>
                                    <td>7.8</td>
                                    <td style="color: #4caf50;">+0.3 </td>
                                </tr>
                                <tr>
                                    <td>Pass Rate</td>
                                    <td>94%</td>
                                    <td>96%</td>
                                    <td style="color: #4caf50;">+2% </td>
                                </tr>
                                <tr>
                                    <td>Attendance</td>
                                    <td>82%</td>
                                    <td>84%</td>
                                    <td style="color: #4caf50;">+2% </td>
                                </tr>
                                <tr>
                                    <td>At Risk %</td>
                                    <td>10%</td>
                                    <td>8%</td>
                                    <td style="color: #4caf50;">-2% </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Top Performers - 2024-25 Batch</div>
                    <button class="btn" onclick="showNotification('Generating certificates...', 'info')">Generate Merit Certificates</button>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Roll No</th>
                                <th>Name</th>
                                <th>CGPA</th>
                                <th>Attendance</th>
                                <th>Achievements</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span style="background: #ffd700; color: #333; padding: 2px 8px; border-radius: 4px; font-weight: 600;">1</span></td>
                                <td>CS2024002</td>
                                <td>Priya Singh</td>
                                <td>9.5</td>
                                <td>98%</td>
                                <td>Gold Medalist, Dean's List</td>
                            </tr>
                            <tr>
                                <td><span style="background: #c0c0c0; color: #333; padding: 2px 8px; border-radius: 4px; font-weight: 600;">2</span></td>
                                <td>CS2024008</td>
                                <td>Arjun Nair</td>
                                <td>9.3</td>
                                <td>96%</td>
                                <td>Dean's List</td>
                            </tr>
                            <tr>
                                <td><span style="background: #cd7f32; color: #fff; padding: 2px 8px; border-radius: 4px; font-weight: 600;">3</span></td>
                                <td>CS2024015</td>
                                <td>Neha Verma</td>
                                <td>9.1</td>
                                <td>94%</td>
                                <td>Dean's List</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>CS2024021</td>
                                <td>Rohit Mehta</td>
                                <td>9.0</td>
                                <td>92%</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>CS2024033</td>
                                <td>Kavya Iyer</td>
                                <td>8.9</td>
                                <td>95%</td>
                                <td>-</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">At-Risk Students - Requires Intervention</div>
                    <div class="card-meta">8 students below academic threshold</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Roll No</th>
                                <th>Name</th>
                                <th>CGPA</th>
                                <th>Attendance</th>
                                <th>Risk Factor</th>
                                <th>Previous Intervention</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>CS2024045</td>
                                <td>Arun Kumar</td>
                                <td style="color: #ef5350;">4.8</td>
                                <td style="color: #ef5350;">62%</td>
                                <td><span class="status-badge status-rejected">High</span></td>
                                <td>None</td>
                                <td><button class="btn btn-danger" style="padding: 4px 8px; font-size: 10px;" onclick="showInterventionModal('CS2024045', 'Arun Kumar')">Intervene</button></td>
                            </tr>
                            <tr>
                                <td>CS2024052</td>
                                <td>Meera Devi</td>
                                <td style="color: #ef5350;">5.2</td>
                                <td style="color: #ff9800;">71%</td>
                                <td><span class="status-badge status-rejected">High</span></td>
                                <td>Warning Issued (Feb 10)</td>
                                <td><button class="btn btn-danger" style="padding: 4px 8px; font-size: 10px;" onclick="showInterventionModal('CS2024052', 'Meera Devi')">Intervene</button></td>
                            </tr>
                            <tr>
                                <td>CS2024018</td>
                                <td>Rajan Pillai</td>
                                <td style="color: #ff9800;">5.8</td>
                                <td style="color: #ef5350;">65%</td>
                                <td><span class="status-badge status-pending">Medium</span></td>
                                <td>Counseling (Jan 25)</td>
                                <td><button class="btn btn-danger" style="padding: 4px 8px; font-size: 10px;" onclick="showInterventionModal('CS2024018', 'Rajan Pillai')">Intervene</button></td>
                            </tr>
                            <tr>
                                <td>CS2024067</td>
                                <td>Sita Reddy</td>
                                <td style="color: #ff9800;">5.5</td>
                                <td style="color: #ef5350;">58%</td>
                                <td><span class="status-badge status-rejected">High</span></td>
                                <td>Parent Meeting (Feb 5)</td>
                                <td><button class="btn btn-danger" style="padding: 4px 8px; font-size: 10px;" onclick="showInterventionModal('CS2024067', 'Sita Reddy')">Intervene</button></td>
                            </tr>
                            <tr>
                                <td>CS2024033</td>
                                <td>Vijay Menon</td>
                                <td style="color: #ff9800;">5.9</td>
                                <td style="color: #ff9800;">73%</td>
                                <td><span class="status-badge status-pending">Medium</span></td>
                                <td>None</td>
                                <td><button class="btn btn-danger" style="padding: 4px 8px; font-size: 10px;" onclick="showInterventionModal('CS2024033', 'Vijay Menon')">Intervene</button></td>
                            </tr>
                            <tr>
                                <td>CS2024078</td>
                                <td>Lakshmi Nair</td>
                                <td style="color: #ff9800;">5.7</td>
                                <td>76%</td>
                                <td><span class="status-badge status-pending">Medium</span></td>
                                <td>Academic Probation</td>
                                <td><button class="btn btn-danger" style="padding: 4px 8px; font-size: 10px;" onclick="showInterventionModal('CS2024078', 'Lakshmi Nair')">Intervene</button></td>
                            </tr>
                            <tr>
                                <td>CS2024091</td>
                                <td>Karthik Iyer</td>
                                <td>6.2</td>
                                <td style="color: #ef5350;">60%</td>
                                <td><span class="status-badge status-pending">Medium</span></td>
                                <td>Warning Issued (Jan 15)</td>
                                <td><button class="btn btn-danger" style="padding: 4px 8px; font-size: 10px;" onclick="showInterventionModal('CS2024091', 'Karthik Iyer')">Intervene</button></td>
                            </tr>
                            <tr>
                                <td>CS2024044</td>
                                <td>Deepa Sharma</td>
                                <td style="color: #ff9800;">5.4</td>
                                <td style="color: #ff9800;">70%</td>
                                <td><span class="status-badge status-pending">Medium</span></td>
                                <td>None</td>
                                <td><button class="btn btn-danger" style="padding: 4px 8px; font-size: 10px;" onclick="showInterventionModal('CS2024044', 'Deepa Sharma')">Intervene</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyPerformance() {
        return `
            <div class="page-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Performance Trends</div>
                    </div>
                    <div class="chart-placeholder" style="height: 200px; display: flex; align-items: center; justify-content: center; background: rgba(74, 144, 226, 0.05); border-radius: 4px;">
                        Assessment-wise Performance Trend Chart
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Score Distribution</div>
                    </div>
                    <div class="chart-placeholder" style="height: 200px; display: flex; align-items: center; justify-content: center; background: rgba(76, 175, 80, 0.05); border-radius: 4px;">
                        Score Distribution Histogram
                    </div>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Student Performance Details</div>
                    <div class="card-meta">Detailed assessment records</div>
                </div>
                <div class="filter-bar" style="display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap;">
                    <div class="filter-group" style="flex: 1; min-width: 150px;">
                        <label class="filter-label" style="display: block; font-size: 11px; color: #666; margin-bottom: 4px;">Course:</label>
                        <select class="filter-select" style="width: 100%;">
                            <option>All Courses</option>
                            ${facultyAppState.courses.map(c => `<option>${c.code}</option>`).join('')}
                        </select>
                    </div>
                    <div class="filter-group" style="flex: 1; min-width: 150px;">
                        <label class="filter-label" style="display: block; font-size: 11px; color: #666; margin-bottom: 4px;">Assessment:</label>
                        <select class="filter-select" style="width: 100%;">
                            <option>All Assessments</option>
                            <option>Quiz 1</option>
                            <option>Quiz 2</option>
                            <option>Assignment</option>
                        </select>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Roll No</th>
                                <th>Name</th>
                                <th>Quiz 1</th>
                                <th>Quiz 2</th>
                                <th>Assignment</th>
                                <th>Avg %</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${facultyAppState.students.slice(0, 10).map(s => {
                                const q1 = Math.floor(Math.random() * 21);
                                const q2 = Math.floor(Math.random() * 21);
                                const assign = Math.floor(Math.random() * 31);
                                const avg = Math.round((q1 + q2 + assign) / 7);
                                const statusClass = avg >= 75 ? 'status-excellent' : avg >= 60 ? 'status-approved' : 'status-at-risk';
                                const statusText = avg >= 75 ? 'Excellent' : avg >= 60 ? 'Good' : 'Needs Improvement';
                                return `
                                    <tr>
                                        <td>${s.rollNo}</td>
                                        <td>${s.name}</td>
                                        <td>${q1}/20</td>
                                        <td>${q2}/20</td>
                                        <td>${assign}/30</td>
                                        <td><strong>${avg}%</strong></td>
                                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                                    </tr>
                                `;
                            }).join('')}
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyLeaveRequests() {
        return `
            <div class="alert alert-info" style="margin-bottom: 20px; padding: 12px; background: rgba(74, 144, 226, 0.1); border-left: 3px solid #4a90e2; border-radius: 4px;">
                As a Professor, you can raise leave requests. HOD will review and approve/reject. Dean provides final authority on escalations.
            </div>
            <div class="page-grid" style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 20px;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Raise New Leave Request</div>
                    </div>
                    <div class="form-field" style="margin-bottom: 15px;">
                        <label style="display: block; font-size: 13px; margin-bottom: 6px;">Leave Type <span class="label-required">*</span></label>
                        <select style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                            <option>Casual Leave</option>
                            <option>Medical Leave</option>
                            <option>Earned Leave</option>
                            <option>Academic Leave</option>
                        </select>
                    </div>
                    <div class="row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 15px;">
                        <div class="form-field">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">From Date <span class="label-required">*</span></label>
                            <input type="date" style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                        </div>
                        <div class="form-field">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">To Date <span class="label-required">*</span></label>
                            <input type="date" style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                        </div>
                    </div>
                    <div class="form-field" style="margin-bottom: 15px;">
                        <label style="display: block; font-size: 13px; margin-bottom: 6px;">Reason <span class="label-required">*</span></label>
                        <textarea style="width: 100%; padding: 10px; border-radius: 4px; min-height: 80px; border: 1px solid #e0e0e0;"></textarea>
                    </div>
                    <div class="form-field" style="margin-bottom: 15px;">
                        <label style="display: block; font-size: 13px; margin-bottom: 6px;">Course Coverage Arrangements</label>
                        <textarea style="width: 100%; padding: 10px; border-radius: 4px; min-height: 80px; border: 1px solid #e0e0e0;" placeholder="Specify how your courses will be covered during your absence"></textarea>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-primary" onclick="showNotification('Leave request submitted successfully!', 'success')">Submit Request</button>
                        <button class="btn btn-secondary" onclick="showNotification('Form cleared', 'info')">Cancel</button>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Your Leave Balance</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <div class="data-card">
                            <div class="data-card-label">Casual Leave</div>
                            <div class="data-card-value">8/12</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Medical Leave</div>
                            <div class="data-card-value">5/10</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Earned Leave</div>
                            <div class="data-card-value">12/20</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Academic Leave</div>
                            <div class="data-card-value">2/5</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Leave Request History</div>
                    <div class="card-meta">All your requests with status</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>From Date</th>
                                <th>To Date</th>
                                <th>Days</th>
                                <th>Raised On</th>
                                <th>HOD Status</th>
                                <th>Dean Status</th>
                                <th>Final Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Medical Leave</td>
                                <td>2024-01-10</td>
                                <td>2024-01-12</td>
                                <td>3</td>
                                <td>2024-01-09</td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                                <td>-</td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                            </tr>
                            <tr>
                                <td>Casual Leave</td>
                                <td>2024-02-01</td>
                                <td>2024-02-02</td>
                                <td>2</td>
                                <td>2024-01-28</td>
                                <td><span class="status-badge status-submitted">Submitted</span></td>
                                <td>-</td>
                                <td><span class="status-badge status-pending">Pending</span></td>
                            </tr>
                            <tr>
                                <td>Academic Leave</td>
                                <td>2024-03-15</td>
                                <td>2024-03-20</td>
                                <td>6</td>
                                <td>2024-03-10</td>
                                <td><span class="status-badge status-rejected">Rejected</span></td>
                                <td><span class="status-badge status-submitted">Submitted</span></td>
                                <td><span class="status-badge status-pending">Escalated to Dean</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyGradeChanges() {
        return `
            <div class="alert alert-warning" style="margin-bottom: 20px; padding: 12px; background: rgba(255, 183, 77, 0.1); border-left: 3px solid #ffb74d; border-radius: 4px;">
                Grade change requests are routed through a strict approval process: Professor  HOD  Dean. All changes are logged.
            </div>
            <div class="page-grid" style="display: grid; grid-template-columns: 1fr; gap: 20px;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Raise Grade Change Request</div>
                    </div>
                    <div class="form-field" style="margin-bottom: 15px;">
                        <label style="display: block; font-size: 13px; margin-bottom: 6px;">Course <span class="label-required">*</span></label>
                        <select style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                            <option>Select Course</option>
                            ${facultyAppState.courses.map(c => `<option>${c.code} - ${c.name}</option>`).join('')}
                        </select>
                    </div>
                    <div class="form-field" style="margin-bottom: 15px;">
                        <label style="display: block; font-size: 13px; margin-bottom: 6px;">Student Roll No <span class="label-required">*</span></label>
                        <input type="text" placeholder="Enter roll number" style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                    </div>
                    <div class="row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 15px;">
                        <div class="form-field">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Assessment <span class="label-required">*</span></label>
                            <select style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                                <option>Quiz 1</option>
                                <option>Quiz 2</option>
                                <option>Assignment</option>
                            </select>
                        </div>
                        <div class="form-field">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Original Mark</label>
                            <input type="number" placeholder="Mark" disabled style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0; background: #f5f5f5;">
                        </div>
                    </div>
                    <div class="row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 15px;">
                        <div class="form-field">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Proposed Mark <span class="label-required">*</span></label>
                            <input type="number" placeholder="New mark" style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                        </div>
                        <div class="form-field">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Difference</label>
                            <input type="number" placeholder="Auto-calculated" disabled style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0; background: #f5f5f5;">
                        </div>
                    </div>
                    <div class="form-field" style="margin-bottom: 15px;">
                        <label style="display: block; font-size: 13px; margin-bottom: 6px;">Reason for Change <span class="label-required">*</span></label>
                        <textarea placeholder="Provide detailed justification for the mark change" style="width: 100%; padding: 10px; border-radius: 4px; min-height: 80px; border: 1px solid #e0e0e0;"></textarea>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-primary" onclick="showNotification('Grade change request submitted', 'success')">Submit Request</button>
                        <button class="btn btn-secondary" onclick="showNotification('Form cleared', 'info')">Cancel</button>
                    </div>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Your Grade Change Requests</div>
                    <div class="card-meta">Tracking & approval workflow</div>
                </div>
                <div class="table-container scrollable">
                    <table>
                        <thead>
                            <tr>
                                <th>Roll No</th>
                                <th>Name</th>
                                <th>Course</th>
                                <th>Assessment</th>
                                <th>Original  Proposed</th>
                                <th>Raised On</th>
                                <th>HOD Status</th>
                                <th>Dean Status</th>
                                <th>Final</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>CS21001</td>
                                <td>Aarav Patel</td>
                                <td>CS201</td>
                                <td>Quiz 1</td>
                                <td>16  18</td>
                                <td>2024-01-12</td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                            </tr>
                            <tr>
                                <td>CS21003</td>
                                <td>Chirag Verma</td>
                                <td>CS202</td>
                                <td>Assignment</td>
                                <td>28  30</td>
                                <td>2024-01-15</td>
                                <td><span class="status-badge status-submitted">Submitted</span></td>
                                <td>-</td>
                                <td><span class="status-badge status-pending">Pending</span></td>
                            </tr>
                            <tr>
                                <td>CS21005</td>
                                <td>Eshan Kumar</td>
                                <td>CS203</td>
                                <td>Quiz 2</td>
                                <td>14  16</td>
                                <td>2024-01-10</td>
                                <td><span class="status-badge status-rejected">Rejected</span></td>
                                <td>-</td>
                                <td><span class="status-badge status-rejected">Rejected</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyResourceRequests() {
        return `
            <div class="page-grid" style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">New Resource Request</div>
                    </div>
                    <div class="form-field" style="margin-bottom: 15px;">
                        <label style="display: block; font-size: 13px; margin-bottom: 6px;">Resource Type <span class="label-required">*</span></label>
                        <select style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                            <option>Lab Equipment</option>
                            <option>Software License</option>
                            <option>Books/Materials</option>
                            <option>IT Infrastructure</option>
                            <option>Other</option>
                        </select>
                    </div>
                    <div class="form-field" style="margin-bottom: 15px;">
                        <label style="display: block; font-size: 13px; margin-bottom: 6px;">Description <span class="label-required">*</span></label>
                        <textarea style="width: 100%; padding: 10px; border-radius: 4px; min-height: 100px; border: 1px solid #e0e0e0;"></textarea>
                    </div>
                    <div class="form-field" style="margin-bottom: 15px;">
                        <label style="display: block; font-size: 13px; margin-bottom: 6px;">Justification <span class="label-required">*</span></label>
                        <textarea style="width: 100%; padding: 10px; border-radius: 4px; min-height: 80px; border: 1px solid #e0e0e0;" placeholder="How will this resource benefit students and academic activities?"></textarea>
                    </div>
                    <div class="row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 15px;">
                        <div class="form-field">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Estimated Cost</label>
                            <input type="number" placeholder="0" style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                        </div>
                        <div class="form-field">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Required By</label>
                            <input type="date" style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-primary" onclick="showNotification('Resource request submitted', 'success')">Submit Request</button>
                        <button class="btn btn-secondary" onclick="showNotification('Form cleared', 'info')">Cancel</button>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Resource Availability</div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Resource</th>
                                    <th>Available</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>High-spec Laptops</td>
                                    <td>4/10</td>
                                    <td><span class="status-badge status-pending">Limited</span></td>
                                </tr>
                                <tr>
                                    <td>MATLAB Licenses</td>
                                    <td></td>
                                    <td><span class="status-badge status-approved">Available</span></td>
                                </tr>
                                <tr>
                                    <td>Oscilloscopes</td>
                                    <td>2/5</td>
                                    <td><span class="status-badge status-pending">Limited</span></td>
                                </tr>
                                <tr>
                                    <td>3D Printers</td>
                                    <td>1/3</td>
                                    <td><span class="status-badge status-pending">Limited</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Your Resource Requests</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Resource</th>
                                <th>Type</th>
                                <th>Requested</th>
                                <th>Cost ()</th>
                                <th>HOD Status</th>
                                <th>Dean Status</th>
                                <th>Final Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Arduino Microcontroller Kits</td>
                                <td>Lab Equipment</td>
                                <td>2024-01-10</td>
                                <td>25,000</td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                            </tr>
                            <tr>
                                <td>Digital Multimeters</td>
                                <td>Lab Equipment</td>
                                <td>2024-01-12</td>
                                <td>40,000</td>
                                <td><span class="status-badge status-submitted">Submitted</span></td>
                                <td>-</td>
                                <td><span class="status-badge status-pending">Pending</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyDocumentSignatures() {
        const activeTab = window.docSignaturesTab || 'all';
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Document Signature Workflow</div>
                    <button class="btn btn-primary" onclick="initiateSignatureRequest()">+ Initiate New Document</button>
                </div>
                <div class="data-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 24px;">
                    <div class="data-card" style="cursor: pointer; text-align: center;" onclick="switchDocSignTab('assigned')">
                        <div class="data-card-label">Assigned to Me</div>
                        <div class="data-card-value" style="color: #ffb74d;">5</div>
                    </div>
                    <div class="data-card" style="cursor: pointer; text-align: center;" onclick="switchDocSignTab('sent')">
                        <div class="data-card-label">Sent by Me</div>
                        <div class="data-card-value">8</div>
                    </div>
                    <div class="data-card" style="cursor: pointer; text-align: center;" onclick="switchDocSignTab('completed')">
                        <div class="data-card-label">Completed</div>
                        <div class="data-card-value" style="color: #4caf50;">12</div>
                    </div>
                    <div class="data-card" style="cursor: pointer; text-align: center;" onclick="switchDocSignTab('archived')">
                        <div class="data-card-label">Archived</div>
                        <div class="data-card-value">24</div>
                    </div>
                </div>

                <!-- Tab Navigation -->
                <div style="display: flex; gap: 8px; margin-bottom: 20px; border-bottom: 2px solid rgba(74, 144, 226, 0.1); padding-bottom: 0;">
                    <button class="tab-btn ${activeTab === 'all' ? 'active' : ''}" onclick="switchDocSignTab('all')" style="padding: 12px 24px; background: none; border: none; border-bottom: 3px solid ${activeTab === 'all' ? '#4a90e2' : 'transparent'}; color: ${activeTab === 'all' ? '#4a90e2' : '#999'}; font-weight: ${activeTab === 'all' ? '600' : '400'}; cursor: pointer; transition: all 0.2s;">All Documents</button>
                    <button class="tab-btn ${activeTab === 'assigned' ? 'active' : ''}" onclick="switchDocSignTab('assigned')" style="padding: 12px 24px; background: none; border: none; border-bottom: 3px solid ${activeTab === 'assigned' ? '#4a90e2' : 'transparent'}; color: ${activeTab === 'assigned' ? '#4a90e2' : '#999'}; font-weight: ${activeTab === 'assigned' ? '600' : '400'}; cursor: pointer; transition: all 0.2s;">Assigned to Me <span style="background: #ffb74d; color: white; padding: 2px 8px; border-radius: 10px; font-size: 11px; margin-left: 6px;">5</span></button>
                    <button class="tab-btn ${activeTab === 'sent' ? 'active' : ''}" onclick="switchDocSignTab('sent')" style="padding: 12px 24px; background: none; border: none; border-bottom: 3px solid ${activeTab === 'sent' ? '#4a90e2' : 'transparent'}; color: ${activeTab === 'sent' ? '#4a90e2' : '#999'}; font-weight: ${activeTab === 'sent' ? '600' : '400'}; cursor: pointer; transition: all 0.2s;">Sent by Me</button>
                    <button class="tab-btn ${activeTab === 'completed' ? 'active' : ''}" onclick="switchDocSignTab('completed')" style="padding: 12px 24px; background: none; border: none; border-bottom: 3px solid ${activeTab === 'completed' ? '#4a90e2' : 'transparent'}; color: ${activeTab === 'completed' ? '#4a90e2' : '#999'}; font-weight: ${activeTab === 'completed' ? '600' : '400'}; cursor: pointer; transition: all 0.2s;">Completed</button>
                </div>
            </div>

            <div class="section-separator"></div>

            <!-- Tab Content -->
            ${activeTab === 'all' || activeTab === 'assigned' ? `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">${activeTab === 'all' ? 'All Documents' : 'Documents Assigned to You'}</div>
                    <div class="card-meta">${activeTab === 'assigned' ? 'Action required' : ''}</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Document</th>
                                <th>Type</th>
                                <th>From</th>
                                <th>Initiated</th>
                                <th>Priority</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Annual Examination Schedule - 2024</strong></td>
                                <td><span class="badge">Academic</span></td>
                                <td>Dr. Amit Singh (HOD)</td>
                                <td>2024-02-01</td>
                                <td><span class="status-badge" style="background-color: rgba(255, 152, 0, 0.15); color: #ffb74d; border: 1px solid rgba(255, 152, 0, 0.3);">High</span></td>
                                <td><span class="status-badge status-pending">Awaiting Your Signature</span></td>
                                <td><div class="action-cell"><button class="action-btn" style="background: #4a90e2; color: white; border-color: #4a90e2;" onclick="viewDocumentToSign('exam-schedule-2024')">Sign</button><button class="action-btn" onclick="viewSignatureHistory('exam-schedule-2024')">History</button></div></td>
                            </tr>
                            <tr>
                                <td><strong>Laboratory Equipment Purchase Order</strong></td>
                                <td><span class="badge">Finance</span></td>
                                <td>Prof. Sunita Mehta</td>
                                <td>2024-02-02</td>
                                <td><span class="status-badge" style="background-color: rgba(76, 175, 80, 0.15); color: #81c784; border: 1px solid rgba(76, 175, 80, 0.3);">Normal</span></td>
                                <td><span class="status-badge status-pending">Awaiting Your Signature</span></td>
                                <td><div class="action-cell"><button class="action-btn" style="background: #4a90e2; color: white; border-color: #4a90e2;" onclick="viewDocumentToSign('lab-equipment-po')">Sign</button><button class="action-btn" onclick="viewSignatureHistory('lab-equipment-po')">History</button></div></td>
                            </tr>
                            <tr>
                                <td><strong>Student Attendance Verification - CS201</strong></td>
                                <td><span class="badge">Academic</span></td>
                                <td>Dr. Rajesh Kumar</td>
                                <td>2024-02-03</td>
                                <td><span class="status-badge" style="background-color: rgba(76, 175, 80, 0.15); color: #81c784; border: 1px solid rgba(76, 175, 80, 0.3);">Normal</span></td>
                                <td><span class="status-badge status-pending">Awaiting Your Signature</span></td>
                                <td><div class="action-cell"><button class="action-btn" style="background: #4a90e2; color: white; border-color: #4a90e2;" onclick="viewDocumentToSign('attendance-cs201')">Sign</button><button class="action-btn" onclick="viewSignatureHistory('attendance-cs201')">History</button></div></td>
                            </tr>
                            <tr>
                                <td><strong>Conference Approval Request</strong></td>
                                <td><span class="badge">Administrative</span></td>
                                <td>Dr. Priya Sharma</td>
                                <td>2024-01-31</td>
                                <td><span class="status-badge" style="background-color: rgba(255, 152, 0, 0.15); color: #ffb74d; border: 1px solid rgba(255, 152, 0, 0.3);">High</span></td>
                                <td><span class="status-badge status-pending">Awaiting Your Signature</span></td>
                                <td><div class="action-cell"><button class="action-btn" style="background: #4a90e2; color: white; border-color: #4a90e2;" onclick="viewDocumentToSign('conference-approval')">Sign</button><button class="action-btn" onclick="viewSignatureHistory('conference-approval')">History</button></div></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            ` : ''}

            ${activeTab === 'all' || activeTab === 'sent' ? `
            <div class="section-separator" style="${activeTab === 'sent' ? 'display: none;' : ''}"></div>
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Documents Sent by You</div>
                    <div class="card-meta">Tracking signature status</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Document</th>
                                <th>Type</th>
                                <th>Sent To</th>
                                <th>Initiated</th>
                                <th>Current Status</th>
                                <th>Progress</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Grade Sheet Submission - CS202</strong></td>
                                <td><span class="badge">Academic</span></td>
                                <td>Dr. Amit Singh (HOD)  Dean</td>
                                <td>2024-01-28</td>
                                <td><span class="status-badge status-approved">Signed by HOD</span></td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="flex: 1; background-color: rgba(74, 144, 226, 0.1); height: 6px; border-radius: 3px; overflow: hidden;">
                                            <div style="width: 66%; background-color: #4a90e2; height: 100%;"></div>
                                        </div>
                                        <span style="font-size: 11px; color: #999;">2/3</span>
                                    </div>
                                </td>
                                <td>
                                    <button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewSignatureHistory('gradesheet-cs202')">Track</button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Research Paper Submission NOC</strong></td>
                                <td><span class="badge">Research</span></td>
                                <td>Dr. Amit Singh (HOD)</td>
                                <td>2024-02-01</td>
                                <td><span class="status-badge status-pending">Pending HOD Signature</span></td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="flex: 1; background-color: rgba(74, 144, 226, 0.1); height: 6px; border-radius: 3px; overflow: hidden;">
                                            <div style="width: 33%; background-color: #4a90e2; height: 100%;"></div>
                                        </div>
                                        <span style="font-size: 11px; color: #999;">1/3</span>
                                    </div>
                                </td>
                                <td>
                                    <button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewSignatureHistory('research-noc')">Track</button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Internship Recommendation Letter</strong></td>
                                <td><span class="badge">Student</span></td>
                                <td>Dr. Amit Singh (HOD)</td>
                                <td>2024-02-02</td>
                                <td><span class="status-badge status-approved">Completed</span></td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="flex: 1; background-color: rgba(74, 144, 226, 0.1); height: 6px; border-radius: 3px; overflow: hidden;">
                                            <div style="width: 100%; background-color: #4caf50; height: 100%;"></div>
                                        </div>
                                        <span style="font-size: 11px; color: #4caf50;"></span>
                                    </div>
                                </td>
                                <td>
                                    <button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="downloadSignedDocument('internship-letter')">Download</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            ` : ''}

            ${activeTab === 'completed' ? `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Completed Documents</div>
                    <div class="card-meta">All signatures collected</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Document</th>
                                <th>Type</th>
                                <th>Completed On</th>
                                <th>Signatures</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Mid-Semester Examination Schedule</strong></td>
                                <td><span class="badge">Academic</span></td>
                                <td>2024-01-25</td>
                                <td>3/3</td>
                                <td>
                                    <button class="btn" style="padding: 4px 8px; font-size: 10px; margin-right: 4px;" onclick="downloadSignedDocument('mid-sem-schedule')">Download</button>
                                    <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="viewSignatureHistory('mid-sem-schedule')">View History</button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Lab Equipment Maintenance Request</strong></td>
                                <td><span class="badge">Administrative</span></td>
                                <td>2024-01-20</td>
                                <td>2/2</td>
                                <td>
                                    <button class="btn" style="padding: 4px 8px; font-size: 10px; margin-right: 4px;" onclick="downloadSignedDocument('equipment-maintenance')">Download</button>
                                    <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="viewSignatureHistory('equipment-maintenance')">View History</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            ` : ''}
        `;
    }

    function switchDocSignTab(tab) {
        window.docSignaturesTab = tab;
        document.getElementById('facultyContentArea').innerHTML = getFacultyDocumentSignatures();
    }

    // Document signature helper functions
    function initiateSignatureRequest() {
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <h3>Initiate New Document</h3>
                        <button class="modal-close" onclick="closeModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div class="form-field" style="margin-bottom: 15px;">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Document Title <span class="label-required">*</span></label>
                            <input type="text" placeholder="Enter document title" style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                        </div>
                        <div class="form-field" style="margin-bottom: 15px;">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Document Type</label>
                            <select style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                                <option>Academic</option>
                                <option>Administrative</option>
                                <option>Finance</option>
                                <option>Research</option>
                                <option>Student</option>
                            </select>
                        </div>
                        <div class="form-field" style="margin-bottom: 15px;">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Send To</label>
                            <select style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #e0e0e0;">
                                <option>HOD</option>
                                <option>HOD  Dean</option>
                                <option>Dean</option>
                                <option>Admin</option>
                            </select>
                        </div>
                        <div class="form-field" style="margin-bottom: 15px;">
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Upload Document</label>
                            <div style="border: 2px dashed #e0e0e0; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer;">
                                <div style="font-size: 24px; margin-bottom: 5px;"></div>
                                <div style="font-size: 12px; color: #718096;">Click to upload or drag and drop</div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                        <button class="btn btn-primary" onclick="closeModal(); showNotification('Document initiated for signature', 'success')">Send for Signature</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function downloadOriginalDocument(docId) {
        showNotification('Downloading original document...', 'info');
    }

    function viewDepartmentDrillDown(deptName) {
        const html = `
            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">Department Analytics</div>
                        <div class="card-meta">${deptName} - Detailed Report</div>
                    </div>
                    <button class="btn" onclick="navigateFacultyTo('hod-dashboard')"> Back</button>
                </div>

                <div class="data-grid" style="margin-bottom: 24px;">
                    <div class="data-card">
                        <div class="data-card-label">Total Students</div>
                        <div class="data-card-value">350</div>
                    </div>
                    <div class="data-card">
                        <div class="data-card-label">Total Faculty</div>
                        <div class="data-card-value">24</div>
                    </div>
                    <div class="data-card">
                        <div class="data-card-label">At-Risk Students</div>
                        <div class="data-card-value" style="color: #ef5350;">28</div>
                    </div>
                    <div class="data-card">
                        <div class="data-card-label">Overall Performance</div>
                        <div class="data-card-value" style="color: #81c784;">74%</div>
                    </div>
                </div>

                <div class="page-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Year-wise Breakdown</div>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Year</th>
                                        <th>Students</th>
                                        <th>Avg Attendance</th>
                                        <th>Avg Marks</th>
                                        <th>At-Risk</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td>Year I</td><td>90</td><td>83%</td><td>76%</td><td>5</td></tr>
                                    <tr><td>Year II</td><td>88</td><td>81%</td><td>74%</td><td>7</td></tr>
                                    <tr><td>Year III</td><td>85</td><td>80%</td><td>73%</td><td>9</td></tr>
                                    <tr><td>Year IV</td><td>87</td><td>82%</td><td>75%</td><td>7</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Top Performers</div>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr><th>Rank</th><th>Roll No</th><th>Name</th><th>CGPA</th></tr>
                                </thead>
                                <tbody>
                                    ${facultyAppState.students.slice(0, 5).map((s, i) => `
                                        <tr><td>${i + 1}</td><td>${s.rollNo}</td><td>${s.name}</td><td><strong>${(9.2 - i * 0.2).toFixed(2)}</strong></td></tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 24px;">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Faculty Performance</div>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr><th>Faculty Name</th><th>Courses</th><th>Students</th><th>Avg Attendance</th><th>Avg Marks</th><th>Feedback Score</th></tr>
                                </thead>
                                <tbody>
                                    <tr><td>Dr. Rajesh Kumar</td><td>4</td><td>180</td><td>83%</td><td>74%</td><td><strong>4.5/5.0</strong></td></tr>
                                    <tr><td>Prof. Sumit Patel</td><td>3</td><td>135</td><td>81%</td><td>72%</td><td><strong>4.3/5.0</strong></td></tr>
                                    <tr><td>Dr. Priya Sharma</td><td>4</td><td>170</td><td>85%</td><td>76%</td><td><strong>4.7/5.0</strong></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 24px; display: flex; gap: 12px;">
                    <button class="btn btn-primary" onclick="downloadDepartmentReport()">Download Full Report</button>
                    <button class="btn btn-secondary" onclick="exportDepartmentData()">Export Data</button>
                </div>
            </div>
        `;
        document.getElementById('facultyContentArea').innerHTML = html;
    }

    function viewMarksAnalytics() {
        const modalHtml = `
            <div id="analyticsModal" class="modal-overlay" onclick="if(event.target === this) closeAnalyticsModal()">
                <div class="modal-content" style="max-width: 900px;">
                    <div class="modal-header">
                        <h3>Marks Analytics Dashboard</h3>
                        <button class="modal-close" onclick="closeAnalyticsModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div class="data-grid" style="margin-bottom: 24px;">
                            <div class="data-card">
                                <div class="data-card-label">Average Score</div>
                                <div class="data-card-value">76.5%</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">Highest Score</div>
                                <div class="data-card-value" style="color: #81c784;">95%</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">Lowest Score</div>
                                <div class="data-card-value" style="color: #ff6b6b;">42%</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">Pass Rate</div>
                                <div class="data-card-value">87%</div>
                            </div>
                        </div>

                        <div class="card" style="margin-bottom: 20px;">
                            <div class="card-header">
                                <div class="card-title">Grade Distribution</div>
                            </div>
                            <div style="padding: 20px;">
                                <div style="display: flex; align-items: end; gap: 12px; height: 200px;">
                                    <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                                        <div style="width: 100%; background: linear-gradient(to top, #4caf50, #81c784); border-radius: 4px 4px 0 0; height: 80%;"></div>
                                        <div style="margin-top: 8px; font-size: 12px; font-weight: 600;">A (12)</div>
                                    </div>
                                    <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                                        <div style="width: 100%; background: linear-gradient(to top, #4a90e2, #64b5f6); border-radius: 4px 4px 0 0; height: 65%;"></div>
                                        <div style="margin-top: 8px; font-size: 12px; font-weight: 600;">B (18)</div>
                                    </div>
                                    <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                                        <div style="width: 100%; background: linear-gradient(to top, #ffb74d, #ffd54f); border-radius: 4px 4px 0 0; height: 45%;"></div>
                                        <div style="margin-top: 8px; font-size: 12px; font-weight: 600;">C (10)</div>
                                    </div>
                                    <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                                        <div style="width: 100%; background: linear-gradient(to top, #ff9800, #ffb74d); border-radius: 4px 4px 0 0; height: 25%;"></div>
                                        <div style="margin-top: 8px; font-size: 12px; font-weight: 600;">D (3)</div>
                                    </div>
                                    <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                                        <div style="width: 100%; background: linear-gradient(to top, #f44336, #ff6b6b); border-radius: 4px 4px 0 0; height: 15%;"></div>
                                        <div style="margin-top: 8px; font-size: 12px; font-weight: 600;">F (2)</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Performance Insights</div>
                            </div>
                            <div style="padding: 20px;">
                                <div style="margin-bottom: 16px; padding: 12px; background: rgba(76, 175, 80, 0.1); border-left: 4px solid #4caf50; border-radius: 4px;">
                                    <div style="font-weight: 600; color: #4caf50; margin-bottom: 4px;"> Strong Performance</div>
                                    <div style="font-size: 13px; color: #666;">Class average is 6.5% above college benchmark</div>
                                </div>
                                <div style="margin-bottom: 16px; padding: 12px; background: rgba(255, 152, 0, 0.1); border-left: 4px solid #ffb74d; border-radius: 4px;">
                                    <div style="font-weight: 600; color: #ffb74d; margin-bottom: 4px;"> Attention Required</div>
                                    <div style="font-size: 13px; color: #666;">5 students scoring below 50% - Consider remedial sessions</div>
                                </div>
                                <div style="padding: 12px; background: rgba(74, 144, 226, 0.1); border-left: 4px solid #4a90e2; border-radius: 4px;">
                                    <div style="font-weight: 600; color: #4a90e2; margin-bottom: 4px;"> Recommendation</div>
                                    <div style="font-size: 13px; color: #666;">Schedule doubt-clearing session for mid-range students (60-75%)</div>
                                </div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px;">
                            <button class="btn btn-secondary" onclick="downloadMarksReport()">Download Report</button>
                            <button class="btn" onclick="closeAnalyticsModal()">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function closeAnalyticsModal() {
        const modal = document.getElementById('analyticsModal');
        if (modal) modal.remove();
    }

    function downloadDepartmentReport() {
        showNotification('Generating comprehensive department report...', 'info');
        setTimeout(() => {
            showNotification(' Department report downloaded!', 'success');
        }, 1500);
    }

    function exportDepartmentData() {
        showNotification('Exporting department data to Excel...', 'info');
        setTimeout(() => {
            showNotification(' Data exported successfully!', 'success');
        }, 1500);
    }

    function downloadMarksReport() {
        showNotification('Generating marks report...', 'info');
        setTimeout(() => {
            showNotification(' Marks report downloaded!', 'success');
        }, 1500);
    }

    function getFacultyNotices() {
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Create New Notice</div>
                </div>
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div>
                        <label style="display: block; font-size: 13px; margin-bottom: 6px;">Title</label>
                        <input type="text" placeholder="Notice title" style="width: 100%; padding: 10px; border-radius: 4px;">
                    </div>
                    <div>
                        <label style="display: block; font-size: 13px; margin-bottom: 6px;">Content</label>
                        <textarea style="width: 100%; padding: 10px; border-radius: 4px; min-height: 100px;"></textarea>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <div>
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Audience</label>
                            <select style="width: 100%; padding: 10px; border-radius: 4px;">
                                <option>My Courses</option>
                                <option>Department</option>
                                <option>Institute-wide</option>
                            </select>
                        </div>
                        <div>
                            <label style="display: block; font-size: 13px; margin-bottom: 6px;">Priority</label>
                            <select style="width: 100%; padding: 10px; border-radius: 4px;">
                                <option>Normal</option>
                                <option>High</option>
                                <option>Urgent</option>
                            </select>
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-primary" onclick="showNotification('Notice published successfully!', 'success')">Publish Notice</button>
                        <button class="btn btn-secondary" onclick="showNotification('Draft saved', 'success')">Save as Draft</button>
                    </div>
                </div>
            </div>
            <div class="card" style="margin-top: 20px;">
                <div class="card-header">
                    <div class="card-title">Published Notices</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Date</th>
                                <th>Audience</th>
                                <th>Views</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>CS201 Lab Session Rescheduled</td>
                                <td>2024-01-15</td>
                                <td>CS201 Students</td>
                                <td>42</td>
                                <td><button class="btn btn-secondary" style="padding: 6px 12px; font-size: 11px;" onclick="showNotification('Opening notice editor...', 'info')">Edit</button></td>
                            </tr>
                            <tr>
                                <td>Project Deadline Extended</td>
                                <td>2024-01-14</td>
                                <td>CS202 Students</td>
                                <td>38</td>
                                <td><button class="btn btn-secondary" style="padding: 6px 12px; font-size: 11px;" onclick="showNotification('Opening notice editor...', 'info')">Edit</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyMessages() {
        return `
            <div style="display: grid; grid-template-columns: 250px 1fr; gap: 20px; height: 600px;">
                <div class="card" style="padding: 0; display: flex; flex-direction: column;">
                    <div style="padding: 15px; border-bottom: 1px solid rgba(74, 144, 226, 0.2);">
                        <input type="text" placeholder="Search conversations..." style="width: 100%; padding: 8px; border-radius: 4px;">
                    </div>
                    <div style="flex: 1; overflow-y: auto;">
                        <div style="padding: 12px; border-bottom: 1px solid rgba(74, 144, 226, 0.1); cursor: pointer; background: rgba(74, 144, 226, 0.1);">
                            <div style="font-weight: 600; font-size: 13px; margin-bottom: 4px;">HOD - Dr. Amit Singh</div>
                            <div style="font-size: 11px; color: #718096;">Marks approval pending...</div>
                        </div>
                        <div style="padding: 12px; border-bottom: 1px solid rgba(74, 144, 226, 0.1); cursor: pointer;">
                            <div style="font-weight: 600; font-size: 13px; margin-bottom: 4px;">Dean Office</div>
                            <div style="font-size: 11px; color: #718096;">Please review policy...</div>
                        </div>
                        <div style="padding: 12px; border-bottom: 1px solid rgba(74, 144, 226, 0.1); cursor: pointer;">
                            <div style="font-weight: 600; font-size: 13px; margin-bottom: 4px;">Library Admin</div>
                            <div style="font-size: 11px; color: #718096;">Resource request status</div>
                        </div>
                    </div>
                </div>
                <div class="card" style="padding: 0; display: flex; flex-direction: column;">
                    <div style="padding: 15px; border-bottom: 1px solid rgba(74, 144, 226, 0.2); font-weight: 600;">
                        HOD - Dr. Amit Singh
                    </div>
                    <div style="flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 12px;">
                        <div style="max-width: 70%; padding: 12px; background: rgba(74, 144, 226, 0.1); border-radius: 8px; border-left: 3px solid #4a90e2;">
                            <div style="font-size: 11px; color: #718096; margin-bottom: 4px;">10:30 AM</div>
                            <div style="font-size: 13px;">Hi, can you check the marks for CS202 Quiz 2?</div>
                        </div>
                        <div style="max-width: 70%; padding: 12px; background: rgba(76, 175, 80, 0.1); border-radius: 8px; border-left: 3px solid #4caf50; align-self: flex-end;">
                            <div style="font-size: 11px; color: #718096; margin-bottom: 4px;">10:45 AM</div>
                            <div style="font-size: 13px;">Sure, I'll review and get back to you.</div>
                        </div>
                    </div>
                    <div style="padding: 15px; border-top: 1px solid rgba(74, 144, 226, 0.2); display: flex; gap: 10px;">
                        <input type="text" placeholder="Type your message..." style="flex: 1; padding: 10px; border-radius: 4px;">
                        <button class="btn btn-primary" onclick="showNotification('Message sent!', 'success')">Send</button>
                    </div>
                </div>
            </div>
        `;
    }

    function toggleFacultySidebar() {
        const sidebar = document.getElementById('facultySidebar');
        sidebar.classList.toggle('collapsed');
        localStorage.setItem('facultySidebarCollapsed', sidebar.classList.contains('collapsed'));
    }

    function toggleFacultyDarkMode() {
        document.body.classList.toggle('dark-mode');
        const isDarkMode = document.body.classList.contains('dark-mode');
        localStorage.setItem('facultyDarkMode', isDarkMode);
        updateFacultyDarkModeIcon(isDarkMode);
    }

    function updateFacultyDarkModeIcon(isDark) {
        const icon = document.getElementById('facultyDarkModeIcon');
        if (icon) {
            if (isDark) {
                // Moon icon for dark mode
                icon.innerHTML = '<path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/>';
            } else {
                // Sun icon for light mode
                icon.innerHTML = '<path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/>';
            }
        }
    }

    function handleFacultyBackToPortal() {
        document.getElementById('facultyPortal').style.display = 'none';
        document.getElementById('mainApp').style.display = 'block';
    }

    function showFacultyNotifications() {
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
                <div class="modal-content" style="max-width: 450px;">
                    <div class="modal-header">
                        <h3>Notifications</h3>
                        <button class="modal-close" onclick="closeModal()"></button>
                    </div>
                    <div class="modal-body" style="max-height: 400px; overflow-y: auto;">
                        <div style="padding: 12px; background: rgba(74, 144, 226, 0.1); border-radius: 8px; margin-bottom: 12px;">
                            <div style="font-weight: 600; margin-bottom: 4px;"> Attendance Pending</div>
                            <div style="font-size: 13px; color: #666;">CS201 - Section A attendance for today is not submitted</div>
                            <div style="font-size: 11px; color: #999; margin-top: 4px;">2 hours ago</div>
                        </div>
                        <div style="padding: 12px; background: rgba(255, 152, 0, 0.1); border-radius: 8px; margin-bottom: 12px;">
                            <div style="font-weight: 600; margin-bottom: 4px;"> Marks Submission Deadline</div>
                            <div style="font-size: 13px; color: #666;">Internal marks submission deadline is approaching (3 days left)</div>
                            <div style="font-size: 11px; color: #999; margin-top: 4px;">Yesterday</div>
                        </div>
                        <div style="padding: 12px; background: rgba(76, 175, 80, 0.1); border-radius: 8px; margin-bottom: 12px;">
                            <div style="font-weight: 600; margin-bottom: 4px;"> Leave Approved</div>
                            <div style="font-size: 13px; color: #666;">Your leave request for Feb 15-16 has been approved by HOD</div>
                            <div style="font-size: 11px; color: #999; margin-top: 4px;">2 days ago</div>
                        </div>
                        <div style="padding: 12px; background: rgba(74, 144, 226, 0.05); border-radius: 8px; margin-bottom: 12px;">
                            <div style="font-weight: 600; margin-bottom: 4px;"> Document Signature Required</div>
                            <div style="font-size: 13px; color: #666;">Annual Exam Schedule requires your signature</div>
                            <div style="font-size: 11px; color: #999; margin-top: 4px;">3 days ago</div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal()">Close</button>
                        <button class="btn btn-primary" onclick="closeModal(); showNotification('All notifications marked as read', 'success')">Mark All Read</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function showFacultyHelp() {
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
                <div class="modal-content" style="max-width: 550px;">
                    <div class="modal-header">
                        <h3>Help & Support</h3>
                        <button class="modal-close" onclick="closeModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div style="margin-bottom: 20px;">
                            <div style="font-weight: 600; margin-bottom: 8px; color: #4a90e2;"> Quick Guide</div>
                            <div style="font-size: 13px; color: #666; line-height: 1.8;">
                                <p> <strong>Dashboard:</strong> View your daily tasks, upcoming deadlines, and quick stats</p>
                                <p> <strong>Attendance:</strong> Mark and manage student attendance</p>
                                <p> <strong>Internal Marks:</strong> Enter and submit continuous evaluation marks</p>
                                <p> <strong>Course Materials:</strong> Upload lecture notes, slides, and resources</p>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <div style="font-weight: 600; margin-bottom: 8px; color: #4a90e2;"> Keyboard Shortcuts</div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 13px;">
                                <div><code style="background: #f0f0f0; padding: 2px 6px; border-radius: 4px;">D</code> Dashboard</div>
                                <div><code style="background: #f0f0f0; padding: 2px 6px; border-radius: 4px;">A</code> Attendance</div>
                                <div><code style="background: #f0f0f0; padding: 2px 6px; border-radius: 4px;">M</code> Marks</div>
                                <div><code style="background: #f0f0f0; padding: 2px 6px; border-radius: 4px;">S</code> Students</div>
                            </div>
                        </div>
                        
                        <div style="padding: 16px; background: rgba(74, 144, 226, 0.05); border-radius: 8px;">
                            <div style="font-weight: 600; margin-bottom: 8px;"> Contact Support</div>
                            <div style="font-size: 13px; color: #666;">
                                <p>Email: support@kalnetcollege.edu</p>
                                <p>Phone: +91 1234-567890</p>
                                <p>Available: Mon-Sat, 9 AM - 5 PM</p>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal()">Close</button>
                        <button class="btn btn-primary" onclick="closeModal(); showNotification('Opening documentation...', 'info')">View Full Documentation</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function showFacultyProfile() {
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
                <div class="modal-content" style="max-width: 600px;">
                    <div class="modal-header">
                        <h3>Faculty Profile</h3>
                        <button class="modal-close" onclick="closeModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div style="display: flex; gap: 24px; margin-bottom: 24px;">
                            <div style="width: 100px; height: 100px; border-radius: 50%; background: linear-gradient(135deg, #4a90e2, #357abd); display: flex; align-items: center; justify-content: center; font-size: 36px; font-weight: 600; color: white;">RK</div>
                            <div style="flex: 1;">
                                <div style="font-size: 20px; font-weight: 600; margin-bottom: 4px;">${facultyAppState.facultyName}</div>
                                <div style="font-size: 14px; color: #666; margin-bottom: 8px;">Assistant Professor</div>
                                <div style="display: flex; gap: 8px;">
                                    <span class="badge" style="background: rgba(74, 144, 226, 0.1); color: #4a90e2; padding: 4px 12px; border-radius: 20px; font-size: 12px;">Computer Science</span>
                                    <span class="badge" style="background: rgba(76, 175, 80, 0.1); color: #4caf50; padding: 4px 12px; border-radius: 20px; font-size: 12px;">Active</span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px;">
                            <div style="padding: 16px; background: rgba(74, 144, 226, 0.05); border-radius: 8px;">
                                <div style="font-size: 11px; color: #666; margin-bottom: 4px;">Employee ID</div>
                                <div style="font-weight: 600;">FAC-2018-CS-042</div>
                            </div>
                            <div style="padding: 16px; background: rgba(74, 144, 226, 0.05); border-radius: 8px;">
                                <div style="font-size: 11px; color: #666; margin-bottom: 4px;">Email</div>
                                <div style="font-weight: 600;">rajesh.kumar@college.edu</div>
                            </div>
                            <div style="padding: 16px; background: rgba(74, 144, 226, 0.05); border-radius: 8px;">
                                <div style="font-size: 11px; color: #666; margin-bottom: 4px;">Phone</div>
                                <div style="font-weight: 600;">+91 98765 43210</div>
                            </div>
                            <div style="padding: 16px; background: rgba(74, 144, 226, 0.05); border-radius: 8px;">
                                <div style="font-size: 11px; color: #666; margin-bottom: 4px;">Office</div>
                                <div style="font-weight: 600;">Room 305, CS Block</div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <div style="font-weight: 600; margin-bottom: 12px; color: #4a90e2;">Qualifications</div>
                            <div style="font-size: 13px; color: #666; line-height: 1.8;">
                                <p> Ph.D. in Computer Science - IIT Delhi (2018)</p>
                                <p> M.Tech in Computer Science - IIT Bombay (2014)</p>
                                <p> B.Tech in Computer Science - NIT Trichy (2012)</p>
                            </div>
                        </div>
                        
                        <div>
                            <div style="font-weight: 600; margin-bottom: 12px; color: #4a90e2;">Research Interests</div>
                            <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                                <span style="background: #f0f0f0; padding: 4px 12px; border-radius: 4px; font-size: 12px;">Machine Learning</span>
                                <span style="background: #f0f0f0; padding: 4px 12px; border-radius: 4px; font-size: 12px;">Data Mining</span>
                                <span style="background: #f0f0f0; padding: 4px 12px; border-radius: 4px; font-size: 12px;">Algorithm Design</span>
                                <span style="background: #f0f0f0; padding: 4px 12px; border-radius: 4px; font-size: 12px;">Computer Vision</span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal()">Close</button>
                        <button class="btn btn-primary" onclick="closeModal(); showNotification('Edit profile feature coming soon!', 'info')">Edit Profile</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    // Attendance helper functions
    function updateFacultyAttendanceStudents() {
        const course = document.getElementById('attendanceCourse').value;
        if (!course) return;
        
        const courseData = facultyAppState.courses.find(c => c.code === course);
        const students = facultyAppState.students.slice(0, courseData ? courseData.students : 10);
        
        const tbody = document.getElementById('facultyAttendanceBody');
        if (tbody) {
            tbody.innerHTML = students.map(s => `
                <tr>
                    <td><input type="checkbox" class="attendance-check" checked></td>
                    <td>${s.rollNo}</td>
                    <td>${s.name}</td>
                    <td>
                        <select style="width: 100%; padding: 6px; border: 1px solid #e0e0e0; border-radius: 2px;">
                            <option value="present">Present</option>
                            <option value="absent">Absent</option>
                            <option value="medical">Medical Leave</option>
                            <option value="other">Other</option>
                        </select>
                    </td>
                    <td><input type="text" placeholder="Add remark" style="width: 100%; padding: 6px; border: 1px solid #e0e0e0; border-radius: 2px;"></td>
                </tr>
            `).join('');
        }
    }

    function toggleAllFacultyAttendance(checkbox) {
        const checks = document.querySelectorAll('.attendance-check');
        checks.forEach(c => c.checked = checkbox.checked);
    }

    function submitFacultyAttendance() {
        showNotification('Attendance submitted successfully!', 'success');
    }

    function clearFacultyAttendance() {
        const courseSelect = document.getElementById('attendanceCourse');
        if (courseSelect) courseSelect.value = '';
        const tbody = document.getElementById('facultyAttendanceBody');
        if (tbody) {
            tbody.innerHTML = '<tr><td colspan="5" style="text-align: center; color: #666; padding: 30px;">Select a course to view students</td></tr>';
        }
    }

    // Marks helper functions
    function updateFacultyMarksStudents() {
        const course = document.getElementById('marksCourse').value;
        if (!course) return;
        
        const courseData = facultyAppState.courses.find(c => c.code === course);
        const students = facultyAppState.students.slice(0, courseData ? courseData.students : 10);
        
        const tbody = document.getElementById('facultyMarksBody');
        if (tbody) {
            tbody.innerHTML = students.map(s => {
                const marks = Math.floor(Math.random() * 21);
                const percent = Math.round((marks / 20) * 100);
                const grade = percent >= 80 ? 'A' : percent >= 70 ? 'B' : percent >= 60 ? 'C' : 'D';
                return `
                    <tr>
                        <td>${s.rollNo}</td>
                        <td>${s.name}</td>
                        <td><input type="number" value="${marks}" style="width: 60px; padding: 6px; border: 1px solid #e0e0e0; border-radius: 2px;"></td>
                        <td>20</td>
                        <td>${percent}%</td>
                        <td><span class="status-badge" style="background-color: #e8f5e9; border: 1px solid #c8e6c9; color: #4caf50;">${grade}</span></td>
                    </tr>
                `;
            }).join('');
        }
    }

    function submitFacultyMarks() {
        showNotification('Marks submitted successfully! Awaiting HOD approval.', 'success');
    }

    function saveFacultyMarksDraft() {
        showNotification('Marks saved as draft.', 'info');
    }

    // View detail modals
    function viewAttendanceDetail(course, section, date) {
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
                <div class="modal-content" style="max-width: 600px;">
                    <div class="modal-header">
                        <h3>Attendance Record - ${course} (Section ${section})</h3>
                        <button class="modal-close" onclick="closeModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div style="margin-bottom: 20px;">
                            <strong>Date:</strong> ${date}<br>
                            <strong>Session:</strong> L1-2 (Forenoon)
                        </div>
                        <div class="table-container" style="max-height: 300px; overflow-y: auto;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Roll No</th>
                                        <th>Name</th>
                                        <th>Status</th>
                                        <th>Remarks</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${facultyAppState.students.slice(0, 10).map(s => `
                                        <tr>
                                            <td>${s.rollNo}</td>
                                            <td>${s.name}</td>
                                            <td><span class="status-badge status-approved">Present</span></td>
                                            <td>-</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal()">Close</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function viewMarksDetail(course, assessment) {
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
                <div class="modal-content" style="max-width: 600px;">
                    <div class="modal-header">
                        <h3>Marks Record - ${course} (${assessment})</h3>
                        <button class="modal-close" onclick="closeModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div style="margin-bottom: 20px;">
                            <strong>Course:</strong> ${course}<br>
                            <strong>Assessment:</strong> ${assessment}<br>
                            <strong>Max Marks:</strong> 20
                        </div>
                        <div class="table-container" style="max-height: 300px; overflow-y: auto;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Roll No</th>
                                        <th>Name</th>
                                        <th>Marks</th>
                                        <th>Grade</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${facultyAppState.students.slice(0, 10).map(s => {
                                        const marks = Math.floor(Math.random() * 21);
                                        const grade = marks >= 16 ? 'A' : marks >= 12 ? 'B' : marks >= 8 ? 'C' : 'D';
                                        return `
                                            <tr>
                                                <td>${s.rollNo}</td>
                                                <td>${s.name}</td>
                                                <td>${marks}/20</td>
                                                <td>${grade}</td>
                                            </tr>
                                        `;
                                    }).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal()">Close</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function downloadEvaluationReport() {
        showNotification('Downloading evaluation report...', 'info');
    }

    function handleFacultyLogout() {
        if(confirm('Are you sure you want to logout?')) {
            document.getElementById('facultyPortal').style.display = 'none';
            document.getElementById('mainApp').style.display = 'none';
            document.getElementById('loginScreen').classList.remove('hidden');
            currentUser = null;
        }
    }

    // Notification helper function
    function showNotification(message, type = 'info') {
        const existing = document.querySelector('.notification');
        if (existing) existing.remove();
        
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.textContent = message;
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.style.animation = 'slideIn 0.3s ease-out reverse';
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    }

    // Close modal helper
    function closeModal() {
        const modal = document.querySelector('.modal-overlay');
        if (modal) modal.remove();
    }

    // Faculty Student Profile Modal
    function showStudentProfile(rollNo) {
        const student = facultyAppState.students.find(s => s.rollNo === rollNo);
        if (!student) return;
        
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) { closeModal(); }">
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <h3>Student Profile</h3>
                        <button class="modal-close" onclick="event.stopPropagation(); closeModal();"></button>
                    </div>
                    <div class="modal-body">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                            <div>
                                <div style="font-size: 11px; color: #718096; text-transform: uppercase; margin-bottom: 5px;">Roll Number</div>
                                <div style="font-size: 14px; font-weight: 600;">${student.rollNo}</div>
                            </div>
                            <div>
                                <div style="font-size: 11px; color: #718096; text-transform: uppercase; margin-bottom: 5px;">Name</div>
                                <div style="font-size: 14px; font-weight: 600;">${student.name}</div>
                            </div>
                            <div>
                                <div style="font-size: 11px; color: #718096; text-transform: uppercase; margin-bottom: 5px;">Program</div>
                                <div style="font-size: 14px;">${student.program}</div>
                            </div>
                            <div>
                                <div style="font-size: 11px; color: #718096; text-transform: uppercase; margin-bottom: 5px;">Year</div>
                                <div style="font-size: 14px;">Year ${student.year}</div>
                            </div>
                        </div>
                        
                        <div style="padding: 15px; background: rgba(74, 144, 226, 0.05); border-radius: 8px; margin-bottom: 15px;">
                            <div style="font-size: 12px; color: #718096; text-transform: uppercase; margin-bottom: 10px;">Academic Standing</div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <div>
                                    <div style="font-size: 11px; color: #718096;">Attendance</div>
                                    <div style="font-size: 24px; color: #4a90e2; font-weight: 700;">${student.attendance}%</div>
                                </div>
                                <div>
                                    <div style="font-size: 11px; color: #718096;">Avg Marks</div>
                                    <div style="font-size: 24px; color: #4a90e2; font-weight: 700;">${student.marks}%</div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="padding: 12px; background: rgba(76, 175, 80, 0.1); border-radius: 8px;">
                            <div style="font-size: 12px; color: #718096; margin-bottom: 8px;">Status</div>
                            <span class="badge ${student.status === 'Excellent' ? 'success' : student.status === 'Good' ? '' : 'warning'}">${student.status}</span>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="event.stopPropagation(); closeModal();">Close</button>
                        <button class="btn btn-primary" onclick="event.stopPropagation(); closeModal(); navigateFacultyTo('student-performance');">View Performance</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    // Flag concern to HOD
    function flagConcern(rollNo) {
        showNotification('Concern flagged to HOD for review and intervention.', 'success');
    }

    // Role switching function
    function switchFacultyRole() {
        const roleSelector = document.getElementById('roleSelector');
        facultyAppState.authority_level = roleSelector.value;
        
        // Update authority badge
        const authorityBadge = document.getElementById('authorityBadge');
        const badge = roleSelector.value === 'professor' ? 'Professor' : 
                      roleSelector.value === 'hod' ? 'HOD - Department Head' : 'Dean - Academic Affairs';
        authorityBadge.textContent = badge;
        
        // Show/hide HOD and Dean sections
        const hodSection = document.getElementById('hodSection');
        const deanSection = document.getElementById('deanSection');
        
        if (roleSelector.value === 'professor') {
            hodSection.style.display = 'none';
            deanSection.style.display = 'none';
        } else if (roleSelector.value === 'hod') {
            hodSection.style.display = 'block';
            deanSection.style.display = 'none';
        } else if (roleSelector.value === 'dean') {
            hodSection.style.display = 'none';
            deanSection.style.display = 'block';
        }
        
        // Navigate to dashboard
        navigateFacultyTo('dashboard');
    }

    // ===== HOD Functions =====
    function getFacultyDepartmentOverview() {
        if (facultyAppState.authority_level !== 'hod') {
            return '<div style="padding: 20px; color: #ef5350;">Access Denied: This feature is only available to HOD.</div>';
        }
        return `
            <div class="page-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Department Summary</div>
                    </div>
                    <div class="data-grid">
                        <div class="data-card">
                            <div class="data-card-label">Total Faculty</div>
                            <div class="data-card-value">24</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Total Students</div>
                            <div class="data-card-value">350</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Active Courses</div>
                            <div class="data-card-value">42</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Avg Attendance</div>
                            <div class="data-card-value">81%</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Course-wise Performance</div>
                    <div class="card-meta">Computer Science Department</div>
                </div>
                <div class="chart-placeholder">
                    Department Performance Dashboard
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Faculty Overview</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Faculty</th>
                                <th>Designation</th>
                                <th>Courses</th>
                                <th>Students</th>
                                <th>Avg Attendance</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Dr. Rajesh Kumar</td>
                                <td>Assistant Professor</td>
                                <td>4</td>
                                <td>180</td>
                                <td>83%</td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewFacultyWorkload('Dr. Rajesh Kumar')">View Details</button></td>
                            </tr>
                            <tr>
                                <td>Prof. Sumit Patel</td>
                                <td>Associate Professor</td>
                                <td>3</td>
                                <td>140</td>
                                <td>81%</td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewFacultyWorkload('Prof. Sumit Patel')">View Details</button></td>
                            </tr>
                            <tr>
                                <td>Dr. Priya Nair</td>
                                <td>Assistant Professor</td>
                                <td>4</td>
                                <td>165</td>
                                <td>85%</td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewFacultyWorkload('Dr. Priya Nair')">View Details</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyAttendanceApproval() {
        if (facultyAppState.authority_level !== 'hod') {
            return '<div style="padding: 20px; color: #ef5350;">Access Denied: This feature is only available to HOD.</div>';
        }
        return `
            <div class="alert alert-info">
                HOD can approve or reject attendance submissions from faculty. Dean can override locked submissions.
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Pending Attendance Approvals</div>
                    <div class="card-meta">8 submissions awaiting review</div>
                </div>
                <div class="table-container scrollable">
                    <table>
                        <thead>
                            <tr>
                                <th>Faculty</th>
                                <th>Course</th>
                                <th>Date</th>
                                <th>Present</th>
                                <th>Absent</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Dr. Rajesh Kumar</td>
                                <td>CS201</td>
                                <td>2024-01-15</td>
                                <td>44</td>
                                <td>1</td>
                                <td><span class="status-badge status-submitted">Submitted</span></td>
                                <td>
                                    <button class="btn btn-primary" style="padding: 4px 8px; font-size: 10px; margin-right: 5px;" onclick="approveAttendance()">Approve</button>
                                    <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="rejectAttendance('Dr. Rajesh Kumar', 'CS201')">Reject</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Prof. Sumit Patel</td>
                                <td>CS202</td>
                                <td>2024-01-15</td>
                                <td>41</td>
                                <td>4</td>
                                <td><span class="status-badge status-submitted">Submitted</span></td>
                                <td>
                                    <button class="btn btn-primary" style="padding: 4px 8px; font-size: 10px; margin-right: 5px;" onclick="approveAttendance()">Approve</button>
                                    <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="rejectAttendance('Prof. Sumit Patel', 'CS202')">Reject</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Approved Attendance Records</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Faculty</th>
                                <th>Course</th>
                                <th>Date</th>
                                <th>Date Approved</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Dr. Rajesh Kumar</td>
                                <td>CS201</td>
                                <td>2024-01-14</td>
                                <td>2024-01-14</td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyMarksApproval() {
        if (facultyAppState.authority_level !== 'hod') {
            return '<div style="padding: 20px; color: #ef5350;">Access Denied: This feature is only available to HOD.</div>';
        }
        return `
            <div class="alert alert-warning">
                You can unlock marks for corrections, approve final marks, or escalate to Dean for critical changes.
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Pending Marks Approvals</div>
                    <div class="card-meta">5 submissions awaiting review</div>
                </div>
                <div class="table-container scrollable">
                    <table>
                        <thead>
                            <tr>
                                <th>Course</th>
                                <th>Faculty</th>
                                <th>Assessment</th>
                                <th>Max Marks</th>
                                <th>Submitted On</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>CS201 - Data Structures</td>
                                <td>Dr. Rajesh Kumar</td>
                                <td>Quiz 2</td>
                                <td>20</td>
                                <td>2024-01-14</td>
                                <td><span class="status-badge status-submitted">Submitted</span></td>
                                <td>
                                    <button class="btn btn-primary" style="padding: 4px 8px; font-size: 10px; margin-right: 5px;" onclick="approveMarks()">Approve</button>
                                    <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="unlockMarks('CS201', 'Quiz 2')">Unlock</button>
                                </td>
                            </tr>
                            <tr>
                                <td>CS202 - DBMS</td>
                                <td>Prof. Sumit Patel</td>
                                <td>Assignment 1</td>
                                <td>15</td>
                                <td>2024-01-13</td>
                                <td><span class="status-badge status-submitted">Submitted</span></td>
                                <td>
                                    <button class="btn btn-primary" style="padding: 4px 8px; font-size: 10px; margin-right: 5px;" onclick="approveMarks()">Approve</button>
                                    <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="unlockMarks('CS202', 'Assignment 1')">Unlock</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Approved Marks Records</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Course</th>
                                <th>Faculty</th>
                                <th>Assessment</th>
                                <th>Date Approved</th>
                                <th>Status</th>
                                <th>View</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>CS201</td>
                                <td>Dr. Rajesh Kumar</td>
                                <td>Quiz 1</td>
                                <td>2024-01-12</td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewMarksDetails('CS201', 'Quiz 1')">View</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyWorkload() {
        if (facultyAppState.authority_level !== 'hod') {
            return '<div style="padding: 20px; color: #ef5350;">Access Denied: This feature is only available to HOD.</div>';
        }
        return `
            <div class="page-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Department Workload Summary</div>
                    </div>
                    <div class="data-grid">
                        <div class="data-card">
                            <div class="data-card-label">Avg Teaching Load</div>
                            <div class="data-card-value">7.2</div>
                            <div style="font-size: 11px; color: #666; margin-top: 4px;">hrs/week</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Total Faculty</div>
                            <div class="data-card-value">24</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Overloaded Faculty</div>
                            <div class="data-card-value">3</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Total Credit Hours</div>
                            <div class="data-card-value">173</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Faculty Workload Distribution</div>
                    <div class="card-meta">Weekly teaching load per faculty</div>
                </div>
                <div class="table-container scrollable">
                    <table>
                        <thead>
                            <tr>
                                <th>Faculty</th>
                                <th>Designation</th>
                                <th>Courses</th>
                                <th>Students</th>
                                <th>Hrs/Week</th>
                                <th>Load %</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Dr. Rajesh Kumar</td>
                                <td>Assistant Professor</td>
                                <td>4</td>
                                <td>180</td>
                                <td>8</td>
                                <td>95%</td>
                                <td><span class="status-badge status-approved">Normal</span></td>
                            </tr>
                            <tr>
                                <td>Prof. Sumit Patel</td>
                                <td>Associate Professor</td>
                                <td>3</td>
                                <td>140</td>
                                <td>6</td>
                                <td>75%</td>
                                <td><span class="status-badge status-approved">Normal</span></td>
                            </tr>
                            <tr>
                                <td>Dr. Priya Nair</td>
                                <td>Assistant Professor</td>
                                <td>4</td>
                                <td>165</td>
                                <td>9</td>
                                <td>112%</td>
                                <td><span class="status-badge status-pending">Overloaded</span></td>
                            </tr>
                            <tr>
                                <td>Prof. Vikram Singh</td>
                                <td>Professor</td>
                                <td>2</td>
                                <td>95</td>
                                <td>4</td>
                                <td>50%</td>
                                <td><span class="status-badge status-approved">Normal</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyStudentIssues() {
        if (facultyAppState.authority_level !== 'hod') {
            return '<div style="padding: 20px; color: #ef5350;">Access Denied: This feature is only available to HOD.</div>';
        }
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Flagged Student Concerns</div>
                    <div class="card-meta">Issues raised by faculty - Action Required</div>
                </div>

                <div class="filter-bar">
                    <div class="filter-group">
                        <label class="filter-label">Priority:</label>
                        <select class="filter-select">
                            <option>All</option>
                            <option>Urgent</option>
                            <option>High</option>
                            <option>Medium</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">Status:</label>
                        <select class="filter-select">
                            <option>All</option>
                            <option>Open</option>
                            <option>In Progress</option>
                            <option>Resolved</option>
                        </select>
                    </div>
                </div>

                <div class="table-container scrollable">
                    <table>
                        <thead>
                            <tr>
                                <th>Roll No</th>
                                <th>Name</th>
                                <th>Issue</th>
                                <th>Raised By</th>
                                <th>Date</th>
                                <th>Priority</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>CS21002</td>
                                <td>Bhavna Singh</td>
                                <td>Low attendance & poor marks</td>
                                <td>Dr. Rajesh Kumar</td>
                                <td>2024-01-15</td>
                                <td><span class="status-badge" style="background-color: rgba(244, 67, 54, 0.15); border: 1px solid rgba(244, 67, 54, 0.3); color: #ef5350;">High</span></td>
                                <td><span class="status-badge status-pending">Open</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="openConcernDetail()">View</button></td>
                            </tr>
                            <tr>
                                <td>CS21004</td>
                                <td>Divya Sharma</td>
                                <td>Below minimum attendance threshold</td>
                                <td>Dr. Rajesh Kumar</td>
                                <td>2024-01-15</td>
                                <td><span class="status-badge" style="background-color: rgba(244, 67, 54, 0.15); border: 1px solid rgba(244, 67, 54, 0.3); color: #ef5350;">Urgent</span></td>
                                <td><span class="status-badge status-pending">Open</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="openConcernDetail()">View</button></td>
                            </tr>
                            <tr>
                                <td>CS21008</td>
                                <td>Hiya Banerjee</td>
                                <td>Severe attendance issues, missing assessments</td>
                                <td>Prof. Sumit Patel</td>
                                <td>2024-01-10</td>
                                <td><span class="status-badge" style="background-color: rgba(244, 67, 54, 0.15); border: 1px solid rgba(244, 67, 54, 0.3); color: #ef5350;">Urgent</span></td>
                                <td><span class="status-badge status-submitted">In Progress</span></td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="openConcernDetail()">View</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Resolved Issues</div>
                    <div class="card-meta">Closed and follow-up completed</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Roll No</th>
                                <th>Name</th>
                                <th>Issue</th>
                                <th>Resolution</th>
                                <th>Resolved On</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>CS21006</td>
                                <td>Fiona Das</td>
                                <td>Health issues affecting attendance</td>
                                <td>Medical leave approved, timeline extended</td>
                                <td>2024-01-12</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // ===== Dean Functions =====
    function getFacultyAcademicOverview() {
        if (facultyAppState.authority_level !== 'dean') {
            return '<div style="padding: 20px; color: #ef5350;">Access Denied: This feature is only available to Dean.</div>';
        }
        return `
            <div class="page-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Institute KPIs</div>
                    </div>
                    <div class="data-grid">
                        <div class="data-card">
                            <div class="data-card-label">Total Students</div>
                            <div class="data-card-value">1,820</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Total Faculty</div>
                            <div class="data-card-value">152</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Active Courses</div>
                            <div class="data-card-value">184</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Inst. Avg Attendance</div>
                            <div class="data-card-value">82%</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Performance Metrics</div>
                    </div>
                    <div class="data-grid">
                        <div class="data-card">
                            <div class="data-card-label">Inst. Avg Marks</div>
                            <div class="data-card-value">73%</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">At-Risk Students</div>
                            <div class="data-card-value">156</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Critical Cases</div>
                            <div class="data-card-value">18</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Completion Rate</div>
                            <div class="data-card-value">94%</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Department-wise Academic Performance</div>
                </div>
                <div class="chart-placeholder">
                    Institute-wide Performance Dashboard
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Department Comparison</div>
                    <div class="card-meta">Key metrics across all departments</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Department</th>
                                <th>Students</th>
                                <th>Faculty</th>
                                <th>Avg Attendance</th>
                                <th>Avg Marks</th>
                                <th>At-Risk</th>
                                <th>Completion %</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Computer Science</td>
                                <td>350</td>
                                <td>24</td>
                                <td>81%</td>
                                <td>74%</td>
                                <td>28</td>
                                <td>95%</td>
                            </tr>
                            <tr>
                                <td>Electronics & Comm</td>
                                <td>320</td>
                                <td>22</td>
                                <td>79%</td>
                                <td>71%</td>
                                <td>35</td>
                                <td>93%</td>
                            </tr>
                            <tr>
                                <td>Mechanical</td>
                                <td>380</td>
                                <td>28</td>
                                <td>78%</td>
                                <td>70%</td>
                                <td>48</td>
                                <td>92%</td>
                            </tr>
                            <tr>
                                <td>Civil Engineering</td>
                                <td>360</td>
                                <td>26</td>
                                <td>80%</td>
                                <td>72%</td>
                                <td>45</td>
                                <td>94%</td>
                            </tr>
                            <tr>
                                <td>Electrical</td>
                                <td>410</td>
                                <td>30</td>
                                <td>83%</td>
                                <td>75%</td>
                                <td>32</td>
                                <td>96%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyPolicyDeadlines() {
        if (facultyAppState.authority_level !== 'dean') {
            return '<div style="padding: 20px; color: #ef5350;">Access Denied: This feature is only available to Dean.</div>';
        }
        return `
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Academic Calendar & Deadlines</div>
                    <div class="card-meta">Current Semester: Spring 2024</div>
                </div>

                <div class="table-container scrollable">
                    <table>
                        <thead>
                            <tr>
                                <th>Event</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                <th>Days Left</th>
                                <th>Status</th>
                                <th>Edit</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Semester Classes Begin</td>
                                <td>2024-01-08</td>
                                <td>-</td>
                                <td>-</td>
                                <td><span class="status-badge status-approved">Completed</span></td>
                                <td><button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="editDeadline('Semester Classes Begin')">Edit</button></td>
                            </tr>
                            <tr>
                                <td>Attendance Lock Window</td>
                                <td>2024-02-15</td>
                                <td>2024-02-20</td>
                                <td>31</td>
                                <td><span class="status-badge status-pending">Upcoming</span></td>
                                <td><button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="editDeadline('Attendance Lock Window')">Edit</button></td>
                            </tr>
                            <tr>
                                <td>Internal Marks Submission</td>
                                <td>2024-02-25</td>
                                <td>2024-03-05</td>
                                <td>41</td>
                                <td><span class="status-badge status-pending">Upcoming</span></td>
                                <td><button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="editDeadline('Internal Marks Submission')">Edit</button></td>
                            </tr>
                            <tr>
                                <td>Mid Semester Exam</td>
                                <td>2024-03-18</td>
                                <td>2024-03-28</td>
                                <td>62</td>
                                <td><span class="status-badge status-pending">Upcoming</span></td>
                                <td><button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="editDeadline('Mid Semester Exam')">Edit</button></td>
                            </tr>
                            <tr>
                                <td>End Semester Exam</td>
                                <td>2024-05-01</td>
                                <td>2024-05-15</td>
                                <td>106</td>
                                <td><span class="status-badge status-pending">Upcoming</span></td>
                                <td><button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px;" onclick="editDeadline('End Semester Exam')">Edit</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Academic Policies</div>
                </div>

                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div style="padding: 15px; background-color: rgba(74, 144, 226, 0.05); border: 1px solid rgba(74, 144, 226, 0.2); border-radius: 8px;">
                        <div style="font-size: 13px; font-weight: 600; margin-bottom: 5px;">Attendance Policy</div>
                        <div style="font-size: 12px; color: #666;">Minimum 75% attendance required for eligibility. Medical leave exemptions require documentation.</div>
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px; margin-top: 8px;" onclick="editPolicy('Attendance Policy')">Edit Policy</button>
                    </div>

                    <div style="padding: 15px; background-color: rgba(74, 144, 226, 0.05); border: 1px solid rgba(74, 144, 226, 0.2); border-radius: 8px;">
                        <div style="font-size: 13px; font-weight: 600; margin-bottom: 5px;">Internal Marks Policy</div>
                        <div style="font-size: 12px; color: #666;">40% weightage for continuous evaluation (attendance, assignments, quizzes). Locked after submission until HOD approval.</div>
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px; margin-top: 8px;" onclick="editPolicy('Internal Marks Policy')">Edit Policy</button>
                    </div>

                    <div style="padding: 15px; background-color: rgba(74, 144, 226, 0.05); border: 1px solid rgba(74, 144, 226, 0.2); border-radius: 8px;">
                        <div style="font-size: 13px; font-weight: 600; margin-bottom: 5px;">Grading Policy</div>
                        <div style="font-size: 12px; color: #666;">10-point scale: A (90-100), B (80-89), C (70-79), D (60-69), E (<60). No backdating of grades without Dean approval.</div>
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 10px; margin-top: 8px;" onclick="editPolicy('Grading Policy')">Edit Policy</button>
                    </div>
                </div>
            </div>
        `;
    }

    function getFacultyInterDeptReports() {
        if (facultyAppState.authority_level !== 'dean') {
            return '<div style="padding: 20px; color: #ef5350;">Access Denied: This feature is only available to Dean.</div>';
        }
        return `
            <div class="page-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Cross-Department Analytics</div>
                    </div>
                    <div class="chart-placeholder">
                        Inter-Department Performance Comparison
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Risk Distribution</div>
                    </div>
                    <div class="chart-placeholder">
                        At-Risk Students Distribution by Department
                    </div>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Comparative Reports</div>
                    <div class="card-meta">Generate custom reports across departments</div>
                </div>

                <div class="filter-bar">
                    <div class="filter-group">
                        <label class="filter-label">Report Type:</label>
                        <select class="filter-select">
                            <option>Performance Comparison</option>
                            <option>Faculty Load Distribution</option>
                            <option>Student Risk Analysis</option>
                            <option>Resource Utilization</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">Semester:</label>
                        <select class="filter-select">
                            <option>Spring 2024</option>
                            <option>Fall 2023</option>
                            <option>Spring 2023</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" style="padding: 10px 15px;" onclick="generateInterDeptReport()">Generate Report</button>
                </div>

                <div class="table-container scrollable">
                    <table>
                        <thead>
                            <tr>
                                <th>Department</th>
                                <th>Avg Attendance</th>
                                <th>Avg Marks</th>
                                <th>Pass Rate %</th>
                                <th>At-Risk %</th>
                                <th>Faculty Utilization</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Computer Science</td>
                                <td>81%</td>
                                <td>74%</td>
                                <td>92%</td>
                                <td>8%</td>
                                <td>85%</td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewDepartmentDetails('Computer Science')">View Details</button></td>
                            </tr>
                            <tr>
                                <td>Electronics & Comm</td>
                                <td>79%</td>
                                <td>71%</td>
                                <td>89%</td>
                                <td>11%</td>
                                <td>82%</td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewDepartmentDetails('Electronics & Comm')">View Details</button></td>
                            </tr>
                            <tr>
                                <td>Mechanical</td>
                                <td>78%</td>
                                <td>70%</td>
                                <td>88%</td>
                                <td>13%</td>
                                <td>84%</td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewDepartmentDetails('Mechanical')">View Details</button></td>
                            </tr>
                            <tr>
                                <td>Civil Engineering</td>
                                <td>80%</td>
                                <td>72%</td>
                                <td>90%</td>
                                <td>12%</td>
                                <td>83%</td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewDepartmentDetails('Civil Engineering')">View Details</button></td>
                            </tr>
                            <tr>
                                <td>Electrical</td>
                                <td>83%</td>
                                <td>75%</td>
                                <td>94%</td>
                                <td>8%</td>
                                <td>87%</td>
                                <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="viewDepartmentDetails('Electrical')">View Details</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    function getFacultyApprovalsDashboard() {
        if (facultyAppState.authority_level !== 'dean') {
            return '<div style="padding: 20px; color: #ef5350;">Access Denied: This feature is only available to Dean.</div>';
        }
        return `
            <div class="alert alert-warning">
                As Dean, you have final authority on all escalated requests. Review, approve, or reject with justification.
            </div>

            <div class="page-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Pending Approvals</div>
                    </div>
                    <div class="data-grid">
                        <div class="data-card">
                            <div class="data-card-label">Leave Requests</div>
                            <div class="data-card-value">3</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Grade Changes</div>
                            <div class="data-card-value">2</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Resource Requests</div>
                            <div class="data-card-value">5</div>
                        </div>
                        <div class="data-card">
                            <div class="data-card-label">Critical Cases</div>
                            <div class="data-card-value">1</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Escalated Leave Requests</div>
                    <div class="card-meta">Requires Dean final decision</div>
                </div>

                <div class="table-container scrollable">
                    <table>
                        <thead>
                            <tr>
                                <th>Faculty</th>
                                <th>Type</th>
                                <th>From - To</th>
                                <th>Days</th>
                                <th>HOD Decision</th>
                                <th>Escalation Reason</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Dr. Rajesh Kumar</td>
                                <td>Academic Leave</td>
                                <td>2024-03-15 to 2024-03-20</td>
                                <td>6</td>
                                <td><span class="status-badge status-rejected">Rejected</span></td>
                                <td>Faculty appealed for conference attendance</td>
                                <td><div class="action-cell"><button class="action-btn" style="background: #4a90e2; color: white; border-color: #4a90e2;" onclick="approveDeanRequest()">Approve</button><button class="action-btn" style="background: rgba(244, 67, 54, 0.1); color: #ef5350; border-color: #ef5350;" onclick="rejectDeanRequest('Leave Request', 'Dr. Rajesh Kumar')">Reject</button></div></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Escalated Grade Change Requests</div>
                    <div class="card-meta">Disputed grade changes</div>
                </div>

                <div class="table-container scrollable">
                    <table>
                        <thead>
                            <tr>
                                <th>Faculty</th>
                                <th>Student</th>
                                <th>Change</th>
                                <th>Reason</th>
                                <th>HOD Decision</th>
                                <th>Escalation Reason</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Prof. Sumit Patel</td>
                                <td>CS21003</td>
                                <td>14  18</td>
                                <td>Evaluation error identified</td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                                <td>High mark jump - requires verification</td>
                                <td><div class="action-cell"><button class="action-btn" style="background: #4a90e2; color: white; border-color: #4a90e2;" onclick="approveDeanRequest()">Approve</button><button class="action-btn" style="background: rgba(244, 67, 54, 0.1); color: #ef5350; border-color: #ef5350;" onclick="rejectDeanRequest('Grade Change', 'CS21003')">Reject</button></div></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="section-separator"></div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Escalated Resource Requests</div>
                    <div class="card-meta">High-budget or disputed requests</div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Department</th>
                                <th>Resource</th>
                                <th>Cost ()</th>
                                <th>HOD Status</th>
                                <th>Justification</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Electronics</td>
                                <td>Network Analyzer Equipment</td>
                                <td>5,50,000</td>
                                <td><span class="status-badge status-approved">Approved</span></td>
                                <td>Critical for lab curriculum upgrade</td>
                                <td><div class="action-cell"><button class="action-btn" style="background: #4a90e2; color: white; border-color: #4a90e2;" onclick="approveDeanRequest()">Approve</button><button class="action-btn" style="background: rgba(244, 67, 54, 0.1); color: #ef5350; border-color: #ef5350;" onclick="rejectDeanRequest('Resource Request', 'Network Analyzer Equipment')">Reject</button></div></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    }

    // Additional helper functions
    function approveAttendance() {
        showNotification('Attendance approved successfully!', 'success');
    }

    function approveMarks() {
        showNotification('Marks approved successfully!', 'success');
    }

    function approveDeanRequest() {
        showNotification('Request approved by Dean. Changes will be reflected in the system.', 'success');
    }

    function openConcernDetail() {
        showNotification('Opening concern details...', 'info');
    }

    // Document Signature Functions
    function initiateSignatureRequest() {
        const modalHtml = `
            <div id="signatureRequestModal" class="modal-overlay" onclick="if(event.target === this) closeSignatureRequestModal()">
                <div class="modal-content" style="max-width: 700px;">
                    <div class="modal-header">
                        <h3>Initiate New Signature Request</h3>
                        <button class="modal-close" onclick="closeSignatureRequestModal()"></button>
                    </div>
                    <div class="modal-body">
                        <form id="signatureRequestForm" onsubmit="submitSignatureRequest(event)">
                            <div class="form-group">
                                <label class="form-label">Document Title*</label>
                                <input type="text" class="form-input" placeholder="e.g., Grade Sheet Submission - CS202" required>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Document Type*</label>
                                <select class="form-select" required>
                                    <option value="">Select Type</option>
                                    <option value="academic">Academic</option>
                                    <option value="administrative">Administrative</option>
                                    <option value="finance">Finance</option>
                                    <option value="research">Research</option>
                                    <option value="student">Student Related</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Description</label>
                                <textarea class="form-textarea" rows="3" placeholder="Brief description of the document purpose"></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Upload Document*</label>
                                <input type="file" class="form-input" accept=".pdf,.doc,.docx" required>
                                <small style="color: #666; font-size: 11px; margin-top: 4px; display: block;">Supported formats: PDF, DOC, DOCX (Max 10MB)</small>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Signature Workflow*</label>
                                <select class="form-select" required>
                                    <option value="">Select Workflow</option>
                                    <option value="hod">HOD Only</option>
                                    <option value="hod-dean">HOD  Dean</option>
                                    <option value="peer">Peer Faculty</option>
                                    <option value="custom">Custom Route</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Priority Level*</label>
                                <select class="form-select" required>
                                    <option value="normal">Normal</option>
                                    <option value="high">High</option>
                                    <option value="urgent">Urgent</option>
                                </select>
                            </div>

                            <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px;">
                                <button type="button" class="btn btn-secondary" onclick="closeSignatureRequestModal()">Cancel</button>
                                <button type="submit" class="btn btn-primary">Initiate Request</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function closeSignatureRequestModal() {
        const modal = document.getElementById('signatureRequestModal');
        if (modal) modal.remove();
    }

    function updateRecipientOptions() {
        const workflowType = document.getElementById('workflowType');
        const recipientSection = document.getElementById('recipientSection');
        
        if (workflowType && recipientSection) {
            if (workflowType.value === 'custom' || workflowType.value === 'peer') {
                recipientSection.style.display = 'block';
            } else {
                recipientSection.style.display = 'none';
            }
        }
    }

    function addRecipient() {
        const select = document.getElementById('recipientSelect');
        const list = document.getElementById('recipientList');
        
        if (select && list && select.value) {
            const chip = document.createElement('div');
            chip.style.cssText = 'display: inline-flex; align-items: center; gap: 8px; padding: 6px 12px; background-color: rgba(74, 144, 226, 0.1); border: 1px solid rgba(74, 144, 226, 0.3); border-radius: 16px; font-size: 13px;';
            chip.innerHTML = `
                <span>${select.options[select.selectedIndex].text}</span>
                <button type="button" onclick="this.parentElement.remove()" style="background: none; border: none; color: #999; cursor: pointer; font-size: 16px; padding: 0;"></button>
            `;
            list.appendChild(chip);
            select.value = '';
        }
    }

    function submitSignatureRequest(event) {
        event.preventDefault();
        closeSignatureRequestModal();
        showNotification('Signature request initiated successfully!', 'success');
    }

    function viewDocumentToSign(docId) {
        const modalHtml = `
            <div id="signDocumentModal" class="modal-overlay active" onclick="if(event.target === this) closeSignDocumentModal()">
                <div class="modal-content" style="max-width: 1100px; max-height: 95vh;">
                    <div class="modal-header">
                        <h3>Review & Sign Document Digitally</h3>
                        <button class="modal-close" onclick="closeSignDocumentModal()"></button>
                    </div>
                    <div class="modal-body" style="max-height: calc(95vh - 120px); overflow-y: auto;">
                        <div class="data-grid" style="margin-bottom: 20px; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                            <div class="data-card">
                                <div class="data-card-label">Document</div>
                                <div class="data-card-value" style="font-size: 14px;">Annual Examination Schedule</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">Type</div>
                                <div class="data-card-value" style="font-size: 14px;">Academic</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">From</div>
                                <div class="data-card-value" style="font-size: 14px;">Dr. Amit Singh</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">Priority</div>
                                <div class="data-card-value" style="font-size: 14px; color: #ffb74d;">High</div>
                            </div>
                        </div>

                        <!-- PDF Viewer Section -->
                        <div style="background-color: rgba(74, 144, 226, 0.05); border: 1px solid rgba(74, 144, 226, 0.2); border-radius: 8px; padding: 16px; margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                <div style="font-weight: 600; color: #4a90e2;"> Document Preview</div>
                                <div style="display: flex; gap: 8px;">
                                    <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="downloadOriginalDocument('\${docId}')"> Download PDF</button>
                                </div>
                            </div>
                            <div id="pdfViewer" style="background-color: #fff; border: 1px solid #ddd; border-radius: 4px; padding: 20px; min-height: 400px; max-height: 500px; overflow-y: auto; text-align: center;">
                                <div style="background: #f9f9f9; padding: 40px; border-radius: 8px; border: 2px dashed #ddd;">
                                    <svg style="width: 80px; height: 80px; margin-bottom: 16px; opacity: 0.4; color: #4a90e2;" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"/>
                                    </svg>
                                    <div style="font-weight: 600; color: #333; margin-bottom: 8px;">Annual_Examination_Schedule_2024.pdf</div>
                                    <div style="color: #666; font-size: 13px; margin-bottom: 16px;">Please review the document carefully before signing</div>
                                    <div style="background: white; padding: 30px; border-radius: 6px; margin: 20px auto; max-width: 650px; text-align: left; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                        <h4 style="color: #4a90e2; margin-bottom: 16px;"> Annual Examination Schedule - 2024</h4>
                                        <p style="color: #555; line-height: 1.8; margin-bottom: 12px;"><strong>Mid-Semester Examination:</strong> March 15-22, 2024</p>
                                        <p style="color: #555; line-height: 1.8; margin-bottom: 12px;"><strong>End-Semester Examination:</strong> May 10-25, 2024</p>
                                        <p style="color: #555; line-height: 1.8; margin-bottom: 12px;"><strong>Result Declaration:</strong> Within 15 days of exam completion</p>
                                        <p style="color: #555; line-height: 1.8; margin-bottom: 12px;"><strong>Re-evaluation Period:</strong> 7 days post result declaration</p>
                                        <hr style="margin: 20px 0; border: none; border-top: 1px solid #eee;">
                                        <p style="color: #777; font-size: 13px; font-style: italic;">This document requires approval from Department HOD and Dean before implementation.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Digital Signature Pad -->
                        <div style="background-color: rgba(76, 175, 80, 0.05); border: 1px solid rgba(76, 175, 80, 0.3); border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                <div style="font-weight: 600; color: #4caf50;"> Draw Your Digital Signature</div>
                                <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="clearSignaturePad()"> Clear</button>
                            </div>
                            <div style="background: white; border: 2px solid #4caf50; border-radius: 8px; overflow: hidden; margin-bottom: 12px;">
                                <canvas id="signaturePad" width="800" height="200" style="display: block; cursor: crosshair; touch-action: none; width: 100%;"></canvas>
                            </div>
                            <div style="color: #666; font-size: 12px; text-align: center;">
                                 Draw your signature using mouse or touchpad | Signature will be applied to the document
                            </div>
                        </div>

                        <div style="background-color: rgba(74, 144, 226, 0.05); border: 1px solid rgba(74, 144, 226, 0.2); border-radius: 8px; padding: 16px; margin-bottom: 20px;">
                            <div style="font-weight: 500; margin-bottom: 8px; color: #4a90e2;"> How It Works</div>
                            <div style="color: #666; font-size: 13px; line-height: 1.8;">
                                 <strong>Step 1:</strong> Review the document above<br>
                                 <strong>Step 2:</strong> Draw your signature in the signature pad<br>
                                 <strong>Step 3:</strong> Add any remarks (optional)<br>
                                 <strong>Step 4:</strong> Click "Apply Signature & Submit"<br>
                                 <strong>Step 5:</strong> Document will be automatically routed to the next signatory
                            </div>
                        </div>

                        <div style="background-color: rgba(76, 175, 80, 0.05); border: 1px solid rgba(76, 175, 80, 0.2); border-radius: 8px; padding: 16px; margin-bottom: 20px;">
                            <div style="font-weight: 500; margin-bottom: 12px;">Signature Workflow</div>
                            <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap;">
                                <div style="flex: 0 0 auto; padding: 8px 12px; background-color: #81c784; color: white; border-radius: 4px; font-size: 12px;"> Dr. Amit Singh</div>
                                <div style="flex: 0 0 20px; height: 2px; background-color: #81c784;"></div>
                                <div style="flex: 0 0 auto; padding: 8px 12px; background-color: #ffb74d; color: white; border-radius: 4px; font-size: 12px;"> You</div>
                                <div style="flex: 0 0 20px; height: 2px; background-color: #ddd;"></div>
                                <div style="flex: 0 0 auto; padding: 8px 12px; background-color: #e0e0e0; color: #666; border-radius: 4px; font-size: 12px;">Dean</div>
                            </div>
                        </div>

                        <div class="form-group" style="margin-bottom: 16px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 500;">Signature Verification</label>
                            <div style="background: rgba(76, 175, 80, 0.05); border: 1px solid rgba(76, 175, 80, 0.2); padding: 12px; border-radius: 6px;">
                                <div style="display: flex; align-items: center; gap: 8px; color: #4caf50; font-size: 13px;">
                                    <svg style="width: 18px; height: 18px;" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                    </svg>
                                    <span id="signatureStatus">Please draw your signature above to enable submission</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group" style="margin-bottom: 16px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 500;">Remarks / Comments (Optional)</label>
                            <textarea id="signatureRemarks" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; min-height: 60px;" placeholder="Any comments or notes regarding this signature"></textarea>
                        </div>

                        <div class="form-group" style="margin-bottom: 20px;">
                            <label style="display: flex; align-items: flex-start; gap: 8px; cursor: pointer;">
                                <input type="checkbox" id="confirmSignature" required style="margin-top: 3px;"> 
                                <span style="font-weight: 500;">I confirm that I have reviewed the document and my digital signature represents my approval</span>
                            </label>
                        </div>

                        <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px;">
                            <button class="btn btn-secondary" onclick="closeSignDocumentModal()">Cancel</button>
                            <button class="btn btn-primary" id="submitSignatureBtn" onclick="submitSignedDocument('\${docId}')">
                                <svg style="width: 14px; height: 14px; margin-right: 6px; vertical-align: middle;" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                    <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                </svg>
                                Apply Signature & Submit
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
        
        // Initialize signature pad
        setTimeout(() => {
            const canvas = document.getElementById('signaturePad');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            window.signatureData = null;

            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';

            function startDrawing(e) {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;
                lastX = (e.clientX - rect.left) * scaleX;
                lastY = (e.clientY - rect.top) * scaleY;
            }

            function draw(e) {
                if (!isDrawing) return;
                const rect = canvas.getBoundingClientRect();
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;
                const x = (e.clientX - rect.left) * scaleX;
                const y = (e.clientY - rect.top) * scaleY;

                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(x, y);
                ctx.stroke();
                lastX = x;
                lastY = y;

                window.signatureData = canvas.toDataURL();
                const statusEl = document.getElementById('signatureStatus');
                if (statusEl) {
                    statusEl.innerHTML = ' Signature captured successfully';
                    statusEl.style.color = '#4caf50';
                }
            }

            function stopDrawing() { isDrawing = false; }

            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);

            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                const touch = e.touches[0];
                startDrawing({ clientX: touch.clientX, clientY: touch.clientY });
            });
            canvas.addEventListener('touchmove', (e) => {
                e.preventDefault();
                const touch = e.touches[0];
                draw({ clientX: touch.clientX, clientY: touch.clientY });
            });
            canvas.addEventListener('touchend', (e) => {
                e.preventDefault();
                stopDrawing();
            });
        }, 100);
    }

    function clearSignaturePad() {
        const canvas = document.getElementById('signaturePad');
        if (canvas) {
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            window.signatureData = null;
            const statusEl = document.getElementById('signatureStatus');
            if (statusEl) {
                statusEl.innerHTML = 'Please draw your signature above to enable submission';
                statusEl.style.color = '#666';
            }
        }
    }

    function closeSignDocumentModal() {
        const modal = document.getElementById('signDocumentModal');
        if (modal) modal.remove();
    }

    function submitSignedDocument(docId) {
        if (!window.signatureData) {
            showNotification('Please draw your signature before submitting', 'error');
            return;
        }
        closeSignDocumentModal();
        showNotification(' Digital signature applied successfully! Document forwarded to next signatory.', 'success');
    }

    function viewSignatureHistory(docId) {
        const modalHtml = `
            <div id="signatureHistoryModal" class="modal-overlay active" onclick="if(event.target === this) closeSignatureHistoryModal()">
                <div class="modal-content" style="max-width: 800px;">
                    <div class="modal-header">
                        <h3>Document Signature History</h3>
                        <button class="modal-close" onclick="closeSignatureHistoryModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div style="margin-bottom: 20px;">
                            <div style="font-weight: 600; margin-bottom: 4px;">Annual Examination Schedule - 2024</div>
                            <div style="color: #999; font-size: 13px;">Document ID: \${docId}</div>
                        </div>

                        <div style="background-color: rgba(74, 144, 226, 0.05); border-left: 4px solid #4a90e2; padding: 16px; border-radius: 4px; margin-bottom: 24px;">
                            <div style="font-weight: 500; margin-bottom: 4px;">Current Status</div>
                            <div style="color: #ffb74d; font-weight: 600;">Awaiting Your Signature</div>
                        </div>

                        <div style="position: relative; padding-left: 32px;">
                            <!-- Timeline item 1 -->
                            <div style="position: relative; padding-bottom: 32px;">
                                <div style="position: absolute; left: -32px; top: 0; width: 24px; height: 24px; background-color: #81c784; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <svg style="width: 14px; height: 14px; color: white;" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                    </svg>
                                </div>
                                <div style="position: absolute; left: -20px; top: 28px; bottom: 0; width: 2px; background-color: #81c784;"></div>
                                <div>
                                    <div style="font-weight: 600;">Document Initiated</div>
                                    <div style="color: #666; font-size: 13px; margin-top: 4px;">By: Dr. Amit Singh (HOD)</div>
                                    <div style="color: #999; font-size: 12px; margin-top: 2px;">Feb 1, 2024 at 10:30 AM</div>
                                </div>
                            </div>

                            <!-- Timeline item 2 -->
                            <div style="position: relative; padding-bottom: 32px;">
                                <div style="position: absolute; left: -32px; top: 0; width: 24px; height: 24px; background-color: #81c784; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <svg style="width: 14px; height: 14px; color: white;" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>
                                    </svg>
                                </div>
                                <div style="position: absolute; left: -20px; top: 28px; bottom: 0; width: 2px; background-color: #ffb74d;"></div>
                                <div>
                                    <div style="font-weight: 600;">Signed by Dr. Amit Singh</div>
                                    <div style="color: #666; font-size: 13px; margin-top: 4px;">Signature Method: Digital Certificate</div>
                                    <div style="color: #999; font-size: 12px; margin-top: 2px;">Feb 1, 2024 at 2:15 PM</div>
                                    <div style="margin-top: 8px;">
                                        <button class="btn btn-secondary" style="padding: 4px 10px; font-size: 11px;" onclick="showNotification('Downloading signed version...', 'info')">View Signed Copy</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Timeline item 3 -->
                            <div style="position: relative; padding-bottom: 32px;">
                                <div style="position: absolute; left: -32px; top: 0; width: 24px; height: 24px; background-color: #ffb74d; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <div style="width: 10px; height: 10px; background-color: white; border-radius: 50%;"></div>
                                </div>
                                <div style="position: absolute; left: -20px; top: 28px; bottom: 0; width: 2px; background-color: #ddd;"></div>
                                <div>
                                    <div style="font-weight: 600; color: #ffb74d;">Pending: Your Signature</div>
                                    <div style="color: #666; font-size: 13px; margin-top: 4px;">Forwarded: Feb 1, 2024 at 2:16 PM</div>
                                    <div style="margin-top: 8px;">
                                        <button class="btn btn-primary" style="padding: 6px 12px; font-size: 12px;" onclick="closeSignatureHistoryModal(); viewDocumentToSign('\${docId}')">Sign Now</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Timeline item 4 -->
                            <div style="position: relative;">
                                <div style="position: absolute; left: -32px; top: 0; width: 24px; height: 24px; background-color: #e0e0e0; border-radius: 50%;"></div>
                                <div>
                                    <div style="font-weight: 600; color: #999;">Final Approval: Dean</div>
                                    <div style="color: #999; font-size: 13px; margin-top: 4px;">Pending</div>
                                </div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 32px; padding-top: 20px; border-top: 1px solid #eee;">
                            <button class="btn btn-secondary" onclick="downloadSignedDocument('\${docId}')">Download Current Version</button>
                            <button class="btn" onclick="closeSignatureHistoryModal()">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function closeSignatureHistoryModal() {
        const modal = document.getElementById('signatureHistoryModal');
        if (modal) modal.remove();
    }

    function downloadSignedDocument(docId) {
        showNotification('Downloading signed document...', 'info');
    }

    function downloadOriginalDocument(docId) {
        showNotification('Downloading original document...', 'info');
    }

    // Other helper functions
    function deleteMaterial(materialId) {
        if(confirm('Are you sure you want to delete this material? This action cannot be undone.')) {
            showNotification(' Material deleted successfully', 'success');
        }
    }

    function updateAttendanceStudents() {
        const courseSelect = document.getElementById('attendanceCourse');
        if (!courseSelect || !courseSelect.value) {
            showNotification('Please select a course', 'warning');
            return;
        }
        const course = facultyAppState.courses.find(x => x.code === courseSelect.value);
        const tbody = document.getElementById('attendanceBody');
        if (tbody && course) {
            tbody.innerHTML = facultyAppState.students.slice(0, course.students).map(s => `
                <tr>
                    <td><input type="checkbox" class="attendance-check" checked></td>
                    <td>${s.rollNo}</td>
                    <td>${s.name}</td>
                    <td>
                        <select class="filter-select" style="min-width:120px;">
                            <option value="present">Present</option>
                            <option value="absent">Absent</option>
                            <option value="late">Late</option>
                        </select>
                    </td>
                    <td><input type="text" class="filter-input" placeholder="Remarks"></td>
                </tr>
            `).join('');
        }
    }

    function toggleAllAttendance(cb) {
        document.querySelectorAll('.attendance-check').forEach(x => x.checked = cb.checked);
    }

    function clearAttendance() {
        const courseSelect = document.getElementById('attendanceCourse');
        if (courseSelect) courseSelect.value = '';
        const tbody = document.getElementById('attendanceBody');
        if (tbody) {
            tbody.innerHTML = '<tr><td colspan="5" style="text-align:center;color:#666;padding:30px;">Select a course to load students</td></tr>';
        }
    }

    function submitAttendance() {
        const courseSelect = document.getElementById('attendanceCourse');
        if (!courseSelect || !courseSelect.value) {
            showNotification('Please select a course', 'warning');
            return;
        }
        showNotification(' Attendance submitted successfully!', 'success');
    }

    function submitMarks() {
        showNotification(' Marks submitted successfully!', 'success');
    }

    function saveMarksDraft() {
        showNotification('Draft saved successfully!', 'info');
    }

    function flagConcern() {
        showNotification('Concern flagged to HOD for review and intervention.', 'info');
    }

    function openConcernDetail() {
        showNotification('Opening concern details...', 'info');
    }

    function selectCourse(course) {
        facultyAppState.selectedCourse = course;
    }

    function switchDocSignTab(tab) {
        window.docSignaturesTab = tab;
        navigateFacultyTo('document-signatures');
    }

    function filterSignatures(type) {
        switchDocSignTab(type);
    }

    function downloadAttendanceReport() {
        showNotification('Generating attendance report...', 'info');
        setTimeout(() => {
            showNotification(' Attendance report downloaded!', 'success');
        }, 1200);
    }

    function emailAbsentees() {
        if(confirm('Send email notification to all absent students?')) {
            showNotification(' Sending emails to absent students...', 'info');
            setTimeout(() => {
                showNotification(' Emails sent successfully to 8 students', 'success');
            }, 1500);
        }
    }

    function downloadEvaluationReport() {
        showNotification('Downloading evaluation report...', 'info');
        setTimeout(() => {
            showNotification(' Report downloaded successfully!', 'success');
        }, 1000);
    }

    function uploadMaterial() {
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <h3>Upload New Material</h3>
                        <button class="modal-close" onclick="closeModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="form-label">Course*</label>
                            <select class="form-select">
                                ${facultyAppState.courses.map(c => `<option>${c.code} - ${c.name}</option>`).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Title*</label>
                            <input type="text" class="form-input" placeholder="Enter material title">
                        </div>
                        <div class="form-group">
                            <label class="form-label">File Type*</label>
                            <select class="form-select">
                                <option>PDF</option>
                                <option>Video</option>
                                <option>Slide</option>
                                <option>Code</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">File*</label>
                            <input type="file" class="form-input">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                        <button class="btn btn-primary" onclick="closeModal(); showNotification('Material uploaded successfully!', 'success');">Upload</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function createNotice() {
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <h3>Create New Notice</h3>
                        <button class="modal-close" onclick="closeModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="form-label">Title*</label>
                            <input type="text" class="form-input" placeholder="Enter notice title">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Category*</label>
                            <select class="form-select">
                                <option>Academic</option>
                                <option>Administrative</option>
                                <option>Event</option>
                                <option>Urgent</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Content*</label>
                            <textarea class="form-textarea" rows="5" placeholder="Enter notice content"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                        <button class="btn btn-primary" onclick="closeModal(); showNotification('Notice published successfully!', 'success');">Publish</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function composeMessage() {
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <h3>Compose Message</h3>
                        <button class="modal-close" onclick="closeModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="form-label">To*</label>
                            <input type="text" class="form-input" placeholder="Enter recipient name or email">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Subject*</label>
                            <input type="text" class="form-input" placeholder="Enter message subject">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Message*</label>
                            <textarea class="form-textarea" rows="5" placeholder="Enter your message"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                        <button class="btn btn-primary" onclick="closeModal(); showNotification('Message sent successfully!', 'success');">Send</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function viewRequestDetail(type) {
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <h3>Request Details</h3>
                        <button class="modal-close" onclick="closeModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div style="padding: 15px; background: rgba(74, 144, 226, 0.05); border-radius: 8px; margin-bottom: 15px;">
                            <div style="font-size: 12px; color: #666; margin-bottom: 5px;">Request Type</div>
                            <div style="font-weight: 600;">${type}</div>
                        </div>
                        <div style="padding: 15px; background: rgba(74, 144, 226, 0.05); border-radius: 8px; margin-bottom: 15px;">
                            <div style="font-size: 12px; color: #666; margin-bottom: 5px;">Status</div>
                            <div><span class="status-badge status-pending">Pending</span></div>
                        </div>
                        ${facultyAppState.authority_level !== 'professor' ? `
                        <div style="margin-top: 20px; display: flex; gap: 10px;">
                            <button class="btn btn-primary" onclick="closeModal(); showNotification('Request approved!', 'success');">Approve</button>
                            <button class="btn btn-secondary" onclick="closeModal(); showNotification('Request rejected.', 'info');">Reject</button>
                        </div>
                        ` : ''}
                    </div>
                    <div class="modal-footer">
                        <button class="btn" onclick="closeModal()">Close</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function enterMarks(course, type) {
        const modalHtml = `
            <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
                <div class="modal-content" style="max-width: 800px;">
                    <div class="modal-header">
                        <h3>Enter Marks - ${course}</h3>
                        <button class="modal-close" onclick="closeModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div class="table-container" style="max-height: 400px; overflow-y: auto;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Roll No</th>
                                        <th>Name</th>
                                        <th>Marks (out of 20)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${facultyAppState.students.slice(0, 10).map(s => `
                                        <tr>
                                            <td>${s.rollNo}</td>
                                            <td>${s.name}</td>
                                            <td><input type="number" class="form-input" style="width: 80px;" min="0" max="20" value="${Math.floor(Math.random() * 21)}"></td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                        <button class="btn btn-primary" onclick="closeModal(); showNotification('Marks submitted successfully!', 'success');">Submit</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    // ================== DEAN & HOD - ACADEMIC COHORT INTERVENTION ==================
    function showInterventionModal(rollNo, studentName) {
        const student = facultyAppState.students.find(s => s.rollNo === rollNo) || { rollNo, name: studentName, attendance: 65, marks: 55 };
        const modalHtml = `
            <div id="interventionModal" class="modal-overlay active" onclick="if(event.target === this) closeInterventionModal()">
                <div class="modal-content" style="max-width: 700px;">
                    <div class="modal-header">
                        <h3> Student Intervention - ${student.name || studentName}</h3>
                        <button class="modal-close" onclick="closeInterventionModal()"></button>
                    </div>
                    <div class="modal-body">
                        <!-- Student Summary -->
                        <div class="data-grid" style="margin-bottom: 20px; grid-template-columns: repeat(4, 1fr);">
                            <div class="data-card">
                                <div class="data-card-label">Roll No</div>
                                <div class="data-card-value" style="font-size: 14px;">${student.rollNo}</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">Department</div>
                                <div class="data-card-value" style="font-size: 14px;">Computer Science</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">Attendance</div>
                                <div class="data-card-value" style="font-size: 14px; color: ${student.attendance < 75 ? '#ef5350' : '#4caf50'};">${student.attendance}%</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">Marks</div>
                                <div class="data-card-value" style="font-size: 14px; color: ${student.marks < 60 ? '#ef5350' : '#4caf50'};">${student.marks}%</div>
                            </div>
                        </div>

                        <!-- Risk Analysis -->
                        <div style="background: rgba(239, 83, 80, 0.1); border-left: 4px solid #ef5350; padding: 15px; border-radius: 4px; margin-bottom: 20px;">
                            <div style="font-weight: 600; color: #ef5350; margin-bottom: 8px;"> Risk Factors Identified</div>
                            <ul style="margin: 0; padding-left: 20px; font-size: 13px; color: #666;">
                                ${student.attendance < 75 ? '<li>Attendance below 75% threshold (Currently: ' + student.attendance + '%)</li>' : ''}
                                ${student.marks < 60 ? '<li>Academic performance below passing threshold (Currently: ' + student.marks + '%)</li>' : ''}
                                <li>Declining trend observed over last 3 weeks</li>
                                <li>Missed 2 consecutive internal assessments</li>
                            </ul>
                        </div>

                        <!-- Intervention Actions -->
                        <div style="font-weight: 600; margin-bottom: 12px;">Select Intervention Action:</div>
                        <div style="display: flex; flex-direction: column; gap: 12px; margin-bottom: 20px;">
                            <label style="display: flex; align-items: center; gap: 10px; padding: 12px; background: rgba(74, 144, 226, 0.05); border-radius: 8px; cursor: pointer;">
                                <input type="radio" name="intervention" value="counseling" checked>
                                <div>
                                    <div style="font-weight: 500;"> Schedule Counseling Session</div>
                                    <div style="font-size: 12px; color: #666;">One-on-one meeting with faculty advisor</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px; padding: 12px; background: rgba(74, 144, 226, 0.05); border-radius: 8px; cursor: pointer;">
                                <input type="radio" name="intervention" value="parent">
                                <div>
                                    <div style="font-weight: 500;"> Notify Parents/Guardian</div>
                                    <div style="font-size: 12px; color: #666;">Send official communication to registered contacts</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px; padding: 12px; background: rgba(74, 144, 226, 0.05); border-radius: 8px; cursor: pointer;">
                                <input type="radio" name="intervention" value="mentor">
                                <div>
                                    <div style="font-weight: 500;"> Assign Academic Mentor</div>
                                    <div style="font-size: 12px; color: #666;">Pair with high-performing peer for guidance</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px; padding: 12px; background: rgba(74, 144, 226, 0.05); border-radius: 8px; cursor: pointer;">
                                <input type="radio" name="intervention" value="remedial">
                                <div>
                                    <div style="font-weight: 500;"> Enroll in Remedial Classes</div>
                                    <div style="font-size: 12px; color: #666;">Mandatory extra sessions for weak subjects</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px; padding: 12px; background: rgba(239, 83, 80, 0.05); border-radius: 8px; cursor: pointer;">
                                <input type="radio" name="intervention" value="warning">
                                <div>
                                    <div style="font-weight: 500; color: #ef5350;"> Issue Formal Warning</div>
                                    <div style="font-size: 12px; color: #666;">Official warning letter with consequences outlined</div>
                                </div>
                            </label>
                        </div>

                        <!-- Additional Notes -->
                        <div style="margin-bottom: 15px;">
                            <label style="font-weight: 500; display: block; margin-bottom: 8px;">Additional Notes / Remarks:</label>
                            <textarea id="interventionNotes" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; min-height: 80px; font-size: 13px;" placeholder="Add any specific observations or action items..."></textarea>
                        </div>

                        <!-- Schedule Follow-up -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <label style="font-weight: 500; display: block; margin-bottom: 8px;">Schedule Follow-up:</label>
                                <input type="date" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                            </div>
                            <div>
                                <label style="font-weight: 500; display: block; margin-bottom: 8px;">Assign to Faculty:</label>
                                <select style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                                    <option>Self (Dr. Rajesh Kumar)</option>
                                    <option>Prof. Amit Sharma - Mentor</option>
                                    <option>Dr. Priya Singh - Counselor</option>
                                    <option>Prof. Rahul Verma - HOD</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer" style="display: flex; gap: 10px; justify-content: flex-end; padding: 15px 20px; border-top: 1px solid #eee;">
                        <button class="btn btn-secondary" onclick="closeInterventionModal()">Cancel</button>
                        <button class="btn btn-primary" onclick="submitIntervention('${rollNo}')">Submit Intervention</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function closeInterventionModal() {
        const modal = document.getElementById('interventionModal');
        if (modal) modal.remove();
    }

    function submitIntervention(rollNo) {
        const selectedAction = document.querySelector('input[name="intervention"]:checked').value;
        const actions = {
            'counseling': 'Counseling session scheduled',
            'parent': 'Parent notification sent',
            'mentor': 'Academic mentor assigned',
            'remedial': 'Enrolled in remedial classes',
            'warning': 'Formal warning issued'
        };
        closeInterventionModal();
        showNotification(` ${actions[selectedAction]} for student ${rollNo}`, 'success');
    }

    // ================== DEAN - POLICY & DEADLINE MANAGEMENT ==================
    function editDeadline(eventName) {
        const modalHtml = `
            <div id="editDeadlineModal" class="modal-overlay active" onclick="if(event.target === this) closeEditDeadlineModal()">
                <div class="modal-content" style="max-width: 550px;">
                    <div class="modal-header">
                        <h3> Edit Academic Deadline</h3>
                        <button class="modal-close" onclick="closeEditDeadlineModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div style="margin-bottom: 20px;">
                            <label style="font-weight: 500; display: block; margin-bottom: 8px;">Event Name:</label>
                            <input type="text" id="deadlineEventName" value="${eventName}" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px;">
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                            <div>
                                <label style="font-weight: 500; display: block; margin-bottom: 8px;">Start Date:</label>
                                <input type="date" id="deadlineStartDate" value="2024-02-15" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px;">
                            </div>
                            <div>
                                <label style="font-weight: 500; display: block; margin-bottom: 8px;">End Date:</label>
                                <input type="date" id="deadlineEndDate" value="2024-02-20" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px;">
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="font-weight: 500; display: block; margin-bottom: 8px;">Status:</label>
                            <select id="deadlineStatus" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px;">
                                <option value="upcoming">Upcoming</option>
                                <option value="active">Active</option>
                                <option value="completed">Completed</option>
                                <option value="extended">Extended</option>
                            </select>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="font-weight: 500; display: block; margin-bottom: 8px;">Notification Settings:</label>
                            <div style="display: flex; flex-direction: column; gap: 8px;">
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" checked> Send reminder 7 days before
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" checked> Send reminder 3 days before
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" checked> Send reminder 1 day before
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox"> Send SMS to all faculty
                                </label>
                            </div>
                        </div>

                        <div style="background: rgba(255, 183, 77, 0.1); border-left: 4px solid #ffb74d; padding: 12px; border-radius: 4px;">
                            <div style="font-size: 13px; color: #666;">
                                <strong>Note:</strong> Changing deadlines will notify all HODs and affected faculty members. Major changes require Dean approval.
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer" style="display: flex; gap: 10px; justify-content: flex-end; padding: 15px 20px; border-top: 1px solid #eee;">
                        <button class="btn btn-secondary" onclick="closeEditDeadlineModal()">Cancel</button>
                        <button class="btn btn-primary" onclick="saveDeadline()">Save Changes</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function closeEditDeadlineModal() {
        const modal = document.getElementById('editDeadlineModal');
        if (modal) modal.remove();
    }

    function saveDeadline() {
        const eventName = document.getElementById('deadlineEventName').value;
        closeEditDeadlineModal();
        showNotification(` Deadline "${eventName}" updated successfully. All stakeholders notified.`, 'success');
    }

    function editPolicy(policyName) {
        const policies = {
            'Attendance Policy': {
                threshold: 75,
                exemptions: 'Medical leave with documentation',
                consequences: 'Detention in semester exams'
            },
            'Internal Marks Policy': {
                weightage: 40,
                components: 'Attendance (10%), Assignments (15%), Quizzes (15%)',
                lockPeriod: 'Locked after HOD approval'
            },
            'Grading Policy': {
                scale: '10-point',
                grades: 'A (90-100), B (80-89), C (70-79), D (60-69), E (<60)',
                backdating: 'Requires Dean approval'
            }
        };
        const policy = policies[policyName] || policies['Attendance Policy'];

        const modalHtml = `
            <div id="editPolicyModal" class="modal-overlay active" onclick="if(event.target === this) closeEditPolicyModal()">
                <div class="modal-content" style="max-width: 600px;">
                    <div class="modal-header">
                        <h3> Edit ${policyName}</h3>
                        <button class="modal-close" onclick="closeEditPolicyModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div style="margin-bottom: 20px;">
                            <label style="font-weight: 500; display: block; margin-bottom: 8px;">Policy Name:</label>
                            <input type="text" value="${policyName}" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; background: #f5f5f5;" readonly>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="font-weight: 500; display: block; margin-bottom: 8px;">Policy Description:</label>
                            <textarea style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; min-height: 100px; font-size: 13px;">Minimum ${policy.threshold || policy.weightage}% ${policyName.includes('Attendance') ? 'attendance' : 'weightage'} required. ${policy.exemptions || policy.components || policy.grades}</textarea>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="font-weight: 500; display: block; margin-bottom: 8px;">Effective From:</label>
                            <input type="date" value="2024-01-01" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px;">
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="font-weight: 500; display: block; margin-bottom: 8px;">Applies To:</label>
                            <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                                <label style="display: flex; align-items: center; gap: 6px;">
                                    <input type="checkbox" checked> All UG Programs
                                </label>
                                <label style="display: flex; align-items: center; gap: 6px;">
                                    <input type="checkbox" checked> All PG Programs
                                </label>
                                <label style="display: flex; align-items: center; gap: 6px;">
                                    <input type="checkbox"> PhD Programs
                                </label>
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="font-weight: 500; display: block; margin-bottom: 8px;">Exception Handling:</label>
                            <textarea style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; min-height: 60px; font-size: 13px;">${policy.exemptions || policy.lockPeriod || policy.backdating}</textarea>
                        </div>

                        <div style="background: rgba(239, 83, 80, 0.1); border-left: 4px solid #ef5350; padding: 12px; border-radius: 4px;">
                            <div style="font-size: 13px; color: #666;">
                                <strong> Warning:</strong> Policy changes affect all departments and require Board approval for major modifications. Changes will be logged for audit purposes.
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer" style="display: flex; gap: 10px; justify-content: flex-end; padding: 15px 20px; border-top: 1px solid #eee;">
                        <button class="btn btn-secondary" onclick="closeEditPolicyModal()">Cancel</button>
                        <button class="btn" style="background: #ffb74d; color: #333;" onclick="submitPolicyForApproval('${policyName}')">Submit for Approval</button>
                        <button class="btn btn-primary" onclick="savePolicy('${policyName}')">Save Changes</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function closeEditPolicyModal() {
        const modal = document.getElementById('editPolicyModal');
        if (modal) modal.remove();
    }

    function savePolicy(policyName) {
        closeEditPolicyModal();
        showNotification(` ${policyName} updated successfully`, 'success');
    }

    function submitPolicyForApproval(policyName) {
        closeEditPolicyModal();
        showNotification(` ${policyName} changes submitted for Board approval`, 'info');
    }

    // ================== DEAN - INTER-DEPARTMENT REPORTS ==================
    function viewDepartmentDetails(deptName) {
        const deptData = {
            'Computer Science': { hod: 'Dr. Rajesh Kumar', faculty: 28, students: 480, avgAttendance: 81, avgMarks: 74, passRate: 92, atRisk: 8 },
            'Electronics & Comm': { hod: 'Dr. Priya Singh', faculty: 24, students: 420, avgAttendance: 79, avgMarks: 71, passRate: 89, atRisk: 11 },
            'Mechanical': { hod: 'Prof. Amit Verma', faculty: 22, students: 360, avgAttendance: 78, avgMarks: 70, passRate: 88, atRisk: 13 },
            'Civil Engineering': { hod: 'Dr. Neha Sharma', faculty: 20, students: 320, avgAttendance: 80, avgMarks: 72, passRate: 90, atRisk: 12 },
            'Electrical': { hod: 'Prof. Rahul Nair', faculty: 21, students: 340, avgAttendance: 83, avgMarks: 75, passRate: 94, atRisk: 7 }
        };
        const dept = deptData[deptName] || deptData['Computer Science'];

        const modalHtml = `
            <div id="deptDetailsModal" class="modal-overlay active" onclick="if(event.target === this) closeDeptDetailsModal()">
                <div class="modal-content" style="max-width: 900px; max-height: 90vh;">
                    <div class="modal-header">
                        <h3> ${deptName} - Department Details</h3>
                        <button class="modal-close" onclick="closeDeptDetailsModal()"></button>
                    </div>
                    <div class="modal-body" style="max-height: calc(90vh - 120px); overflow-y: auto;">
                        <!-- Department Overview -->
                        <div class="data-grid" style="margin-bottom: 20px; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));">
                            <div class="data-card">
                                <div class="data-card-label">HOD</div>
                                <div class="data-card-value" style="font-size: 13px;">${dept.hod}</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">Faculty</div>
                                <div class="data-card-value">${dept.faculty}</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">Students</div>
                                <div class="data-card-value">${dept.students}</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">Avg Attendance</div>
                                <div class="data-card-value" style="color: ${dept.avgAttendance >= 80 ? '#4caf50' : '#ffb74d'};">${dept.avgAttendance}%</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">Pass Rate</div>
                                <div class="data-card-value" style="color: ${dept.passRate >= 90 ? '#4caf50' : '#ffb74d'};">${dept.passRate}%</div>
                            </div>
                            <div class="data-card">
                                <div class="data-card-label">At-Risk</div>
                                <div class="data-card-value" style="color: ${dept.atRisk <= 10 ? '#4caf50' : '#ef5350'};">${dept.atRisk}%</div>
                            </div>
                        </div>

                        <!-- Performance Trend -->
                        <div style="background: rgba(74, 144, 226, 0.05); border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                            <div style="font-weight: 600; margin-bottom: 15px;"> Semester-wise Performance Trend</div>
                            <div style="display: flex; align-items: flex-end; gap: 15px; height: 120px;">
                                <div style="flex: 1; text-align: center;">
                                    <div style="background: #4a90e2; height: 60%; border-radius: 4px 4px 0 0; margin-bottom: 8px;"></div>
                                    <div style="font-size: 11px; color: #666;">Fall 22</div>
                                </div>
                                <div style="flex: 1; text-align: center;">
                                    <div style="background: #4a90e2; height: 70%; border-radius: 4px 4px 0 0; margin-bottom: 8px;"></div>
                                    <div style="font-size: 11px; color: #666;">Spr 23</div>
                                </div>
                                <div style="flex: 1; text-align: center;">
                                    <div style="background: #4a90e2; height: 75%; border-radius: 4px 4px 0 0; margin-bottom: 8px;"></div>
                                    <div style="font-size: 11px; color: #666;">Fall 23</div>
                                </div>
                                <div style="flex: 1; text-align: center;">
                                    <div style="background: #4caf50; height: 85%; border-radius: 4px 4px 0 0; margin-bottom: 8px;"></div>
                                    <div style="font-size: 11px; color: #666;">Spr 24</div>
                                </div>
                            </div>
                        </div>

                        <!-- Faculty Workload -->
                        <div style="margin-bottom: 20px;">
                            <div style="font-weight: 600; margin-bottom: 12px;"> Faculty Workload Distribution</div>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Faculty Name</th>
                                            <th>Courses</th>
                                            <th>Students</th>
                                            <th>Load %</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>${dept.hod}</td>
                                            <td>3</td>
                                            <td>95</td>
                                            <td>75%</td>
                                            <td><span class="status-badge status-approved">Balanced</span></td>
                                        </tr>
                                        <tr>
                                            <td>Prof. Assistant 1</td>
                                            <td>4</td>
                                            <td>140</td>
                                            <td>95%</td>
                                            <td><span class="status-badge status-pending">Heavy</span></td>
                                        </tr>
                                        <tr>
                                            <td>Prof. Assistant 2</td>
                                            <td>3</td>
                                            <td>85</td>
                                            <td>65%</td>
                                            <td><span class="status-badge status-approved">Light</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- At-Risk Students -->
                        <div style="background: rgba(239, 83, 80, 0.05); border-radius: 8px; padding: 20px;">
                            <div style="font-weight: 600; margin-bottom: 12px; color: #ef5350;"> At-Risk Students (${Math.round(dept.students * dept.atRisk / 100)})</div>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Roll No</th>
                                            <th>Name</th>
                                            <th>Year</th>
                                            <th>Attendance</th>
                                            <th>Marks</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>CS21002</td>
                                            <td>Bhavna Singh</td>
                                            <td>Year III</td>
                                            <td style="color: #ef5350;">65%</td>
                                            <td style="color: #ef5350;">55%</td>
                                            <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="closeDeptDetailsModal(); showInterventionModal('CS21002', 'Bhavna Singh')">Intervene</button></td>
                                        </tr>
                                        <tr>
                                            <td>CS21008</td>
                                            <td>Hiya Banerjee</td>
                                            <td>Year III</td>
                                            <td style="color: #ef5350;">62%</td>
                                            <td style="color: #ef5350;">52%</td>
                                            <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="closeDeptDetailsModal(); showInterventionModal('CS21008', 'Hiya Banerjee')">Intervene</button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer" style="display: flex; gap: 10px; justify-content: flex-end; padding: 15px 20px; border-top: 1px solid #eee;">
                        <button class="btn btn-secondary" onclick="exportDeptReport('${deptName}')"> Export Report</button>
                        <button class="btn btn-primary" onclick="closeDeptDetailsModal()">Close</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function closeDeptDetailsModal() {
        const modal = document.getElementById('deptDetailsModal');
        if (modal) modal.remove();
    }

    function exportDeptReport(deptName) {
        showNotification(` Exporting ${deptName} report as PDF...`, 'info');
        setTimeout(() => {
            showNotification(` ${deptName} report downloaded successfully`, 'success');
        }, 1500);
    }

    function generateInterDeptReport() {
        const reportType = document.querySelector('.filter-select')?.value || 'Performance Comparison';
        showNotification(` Generating ${reportType} report...`, 'info');
        setTimeout(() => {
            showNotification(` Report generated successfully!`, 'success');
        }, 2000);
    }

    // ================== HOD FUNCTIONS - VIEW FACULTY WORKLOAD ==================
    function viewFacultyWorkload(facultyName) {
        const modalHtml = `
            <div id="facultyWorkloadModal" class="modal-overlay active" onclick="if(event.target === this) closeFacultyWorkloadModal()">
                <div class="modal-content" style="max-width: 700px;">
                    <div class="modal-header">
                        <h3> Faculty Workload - ${facultyName}</h3>
                        <button class="modal-close" onclick="closeFacultyWorkloadModal()"></button>
                    </div>
                    <div class="modal-body" style="max-height: 500px; overflow-y: auto;">
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 20px;">
                            <div style="background: rgba(74, 144, 226, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 20px; font-weight: 600; color: #4a90e2;">4</div>
                                <div style="font-size: 11px; color: #666;">Courses</div>
                            </div>
                            <div style="background: rgba(76, 175, 80, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 20px; font-weight: 600; color: #4caf50;">180</div>
                                <div style="font-size: 11px; color: #666;">Students</div>
                            </div>
                            <div style="background: rgba(255, 152, 0, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 20px; font-weight: 600; color: #ff9800;">8</div>
                                <div style="font-size: 11px; color: #666;">Hrs/Week</div>
                            </div>
                            <div style="background: rgba(156, 39, 176, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 20px; font-weight: 600; color: #9c27b0;">95%</div>
                                <div style="font-size: 11px; color: #666;">Load</div>
                            </div>
                        </div>

                        <h4 style="margin: 15px 0 10px; font-size: 14px; color: #333;">Course Assignments</h4>
                        <table style="width: 100%; border-collapse: collapse; font-size: 12px;">
                            <thead>
                                <tr style="background: rgba(74, 144, 226, 0.1);">
                                    <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Course</th>
                                    <th style="padding: 8px; text-align: center; border: 1px solid #ddd;">Section</th>
                                    <th style="padding: 8px; text-align: center; border: 1px solid #ddd;">Students</th>
                                    <th style="padding: 8px; text-align: center; border: 1px solid #ddd;">Credits</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #ddd;">CS201 - Data Structures</td>
                                    <td style="padding: 8px; text-align: center; border: 1px solid #ddd;">A, B</td>
                                    <td style="padding: 8px; text-align: center; border: 1px solid #ddd;">90</td>
                                    <td style="padding: 8px; text-align: center; border: 1px solid #ddd;">4</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #ddd;">CS301 - Algorithms</td>
                                    <td style="padding: 8px; text-align: center; border: 1px solid #ddd;">A</td>
                                    <td style="padding: 8px; text-align: center; border: 1px solid #ddd;">45</td>
                                    <td style="padding: 8px; text-align: center; border: 1px solid #ddd;">3</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #ddd;">CS401 - Machine Learning</td>
                                    <td style="padding: 8px; text-align: center; border: 1px solid #ddd;">A</td>
                                    <td style="padding: 8px; text-align: center; border: 1px solid #ddd;">45</td>
                                    <td style="padding: 8px; text-align: center; border: 1px solid #ddd;">4</td>
                                </tr>
                            </tbody>
                        </table>

                        <h4 style="margin: 20px 0 10px; font-size: 14px; color: #333;">Performance Summary</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div style="background: #f8f9fa; padding: 12px; border-radius: 8px;">
                                <div style="font-size: 12px; color: #666; margin-bottom: 5px;">Average Class Attendance</div>
                                <div style="font-size: 18px; font-weight: 600; color: #4caf50;">83%</div>
                            </div>
                            <div style="background: #f8f9fa; padding: 12px; border-radius: 8px;">
                                <div style="font-size: 12px; color: #666; margin-bottom: 5px;">Average Class Performance</div>
                                <div style="font-size: 18px; font-weight: 600; color: #4a90e2;">74%</div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer" style="display: flex; gap: 10px; justify-content: flex-end; padding: 15px 20px; border-top: 1px solid #e9ecef;">
                        <button class="btn btn-secondary" onclick="closeFacultyWorkloadModal()">Close</button>
                        <button class="btn btn-primary" onclick="showNotification('Reassigning courses...', 'info'); closeFacultyWorkloadModal();">Reassign Courses</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function closeFacultyWorkloadModal() {
        const modal = document.getElementById('facultyWorkloadModal');
        if (modal) modal.remove();
    }

    // ================== HOD FUNCTIONS - REJECT/UNLOCK ATTENDANCE & MARKS ==================
    function rejectAttendance(faculty, course) {
        const modalHtml = `
            <div id="rejectAttendanceModal" class="modal-overlay active" onclick="if(event.target === this) closeRejectAttendanceModal()">
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <h3> Reject Attendance Submission</h3>
                        <button class="modal-close" onclick="closeRejectAttendanceModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div style="background: rgba(244, 67, 54, 0.1); padding: 12px; border-radius: 8px; margin-bottom: 15px;">
                            <div style="font-size: 13px;"><strong>Faculty:</strong> ${faculty}</div>
                            <div style="font-size: 13px;"><strong>Course:</strong> ${course}</div>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 5px;">Rejection Reason *</label>
                            <select id="rejectReason" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px;">
                                <option value="">Select reason...</option>
                                <option value="discrepancy">Data Discrepancy Found</option>
                                <option value="incomplete">Incomplete Submission</option>
                                <option value="timing">Submitted Outside Window</option>
                                <option value="duplicate">Duplicate Entry</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 5px;">Additional Comments</label>
                            <textarea id="rejectComments" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px; min-height: 80px; resize: vertical;" placeholder="Provide specific feedback for the faculty..."></textarea>
                        </div>
                    </div>
                    <div class="modal-footer" style="display: flex; gap: 10px; justify-content: flex-end; padding: 15px 20px; border-top: 1px solid #e9ecef;">
                        <button class="btn btn-secondary" onclick="closeRejectAttendanceModal()">Cancel</button>
                        <button class="btn btn-danger" onclick="confirmRejectAttendance('${faculty}', '${course}')">Confirm Rejection</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function closeRejectAttendanceModal() {
        const modal = document.getElementById('rejectAttendanceModal');
        if (modal) modal.remove();
    }

    function confirmRejectAttendance(faculty, course) {
        const reason = document.getElementById('rejectReason')?.value;
        if (!reason) {
            showNotification('Please select a rejection reason', 'warning');
            return;
        }
        closeRejectAttendanceModal();
        showNotification(`Attendance for ${course} by ${faculty} has been rejected`, 'warning');
    }

    function unlockMarks(course, assessment) {
        const modalHtml = `
            <div id="unlockMarksModal" class="modal-overlay active" onclick="if(event.target === this) closeUnlockMarksModal()">
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <h3> Unlock Marks for Editing</h3>
                        <button class="modal-close" onclick="closeUnlockMarksModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div style="background: rgba(255, 152, 0, 0.1); padding: 12px; border-radius: 8px; margin-bottom: 15px;">
                            <div style="font-size: 13px;"><strong>Course:</strong> ${course}</div>
                            <div style="font-size: 13px;"><strong>Assessment:</strong> ${assessment}</div>
                        </div>
                        
                        <div style="background: rgba(244, 67, 54, 0.1); border: 1px solid rgba(244, 67, 54, 0.3); padding: 12px; border-radius: 8px; margin-bottom: 15px;">
                            <div style="font-size: 12px; color: #ef5350;">
                                 <strong>Warning:</strong> Unlocking marks will allow the faculty to modify student marks. This action is logged for audit purposes.
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 5px;">Unlock Duration</label>
                            <select id="unlockDuration" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px;">
                                <option value="24">24 Hours</option>
                                <option value="48">48 Hours</option>
                                <option value="72">72 Hours</option>
                                <option value="168">1 Week</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 5px;">Reason for Unlock *</label>
                            <textarea id="unlockReason" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px; min-height: 80px; resize: vertical;" placeholder="Provide reason for unlocking marks..."></textarea>
                        </div>
                    </div>
                    <div class="modal-footer" style="display: flex; gap: 10px; justify-content: flex-end; padding: 15px 20px; border-top: 1px solid #e9ecef;">
                        <button class="btn btn-secondary" onclick="closeUnlockMarksModal()">Cancel</button>
                        <button class="btn btn-primary" onclick="confirmUnlockMarks('${course}', '${assessment}')">Unlock Marks</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function closeUnlockMarksModal() {
        const modal = document.getElementById('unlockMarksModal');
        if (modal) modal.remove();
    }

    function confirmUnlockMarks(course, assessment) {
        const reason = document.getElementById('unlockReason')?.value;
        if (!reason || reason.trim() === '') {
            showNotification('Please provide a reason for unlocking', 'warning');
            return;
        }
        const duration = document.getElementById('unlockDuration')?.value || '24';
        closeUnlockMarksModal();
        showNotification(`Marks for ${assessment} in ${course} unlocked for ${duration} hours`, 'success');
    }

    function viewMarksDetails(course, assessment) {
        const modalHtml = `
            <div id="viewMarksModal" class="modal-overlay active" onclick="if(event.target === this) closeViewMarksModal()">
                <div class="modal-content" style="max-width: 700px;">
                    <div class="modal-header">
                        <h3> Marks Details - ${course} / ${assessment}</h3>
                        <button class="modal-close" onclick="closeViewMarksModal()"></button>
                    </div>
                    <div class="modal-body" style="max-height: 400px; overflow-y: auto;">
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 20px;">
                            <div style="background: rgba(74, 144, 226, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 18px; font-weight: 600; color: #4a90e2;">45</div>
                                <div style="font-size: 11px; color: #666;">Total Students</div>
                            </div>
                            <div style="background: rgba(76, 175, 80, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 18px; font-weight: 600; color: #4caf50;">15.8</div>
                                <div style="font-size: 11px; color: #666;">Avg Marks (out of 20)</div>
                            </div>
                            <div style="background: rgba(255, 152, 0, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 18px; font-weight: 600; color: #ff9800;">20</div>
                                <div style="font-size: 11px; color: #666;">Highest</div>
                            </div>
                            <div style="background: rgba(244, 67, 54, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 18px; font-weight: 600; color: #ef5350;">8</div>
                                <div style="font-size: 11px; color: #666;">Lowest</div>
                            </div>
                        </div>

                        <h4 style="margin: 15px 0 10px; font-size: 14px; color: #333;">Grade Distribution</h4>
                        <div style="display: flex; gap: 8px; align-items: flex-end; height: 100px; margin-bottom: 10px;">
                            <div style="flex: 1; background: #4caf50; height: 80%; border-radius: 4px 4px 0 0;" title="A: 12 students"></div>
                            <div style="flex: 1; background: #8bc34a; height: 60%; border-radius: 4px 4px 0 0;" title="B: 15 students"></div>
                            <div style="flex: 1; background: #ff9800; height: 40%; border-radius: 4px 4px 0 0;" title="C: 10 students"></div>
                            <div style="flex: 1; background: #ff5722; height: 20%; border-radius: 4px 4px 0 0;" title="D: 5 students"></div>
                            <div style="flex: 1; background: #ef5350; height: 10%; border-radius: 4px 4px 0 0;" title="F: 3 students"></div>
                        </div>
                        <div style="display: flex; gap: 8px; font-size: 10px; color: #666;">
                            <div style="flex: 1; text-align: center;">A (18-20)</div>
                            <div style="flex: 1; text-align: center;">B (15-17)</div>
                            <div style="flex: 1; text-align: center;">C (12-14)</div>
                            <div style="flex: 1; text-align: center;">D (10-11)</div>
                            <div style="flex: 1; text-align: center;">F (<10)</div>
                        </div>

                        <div style="margin-top: 15px; padding: 12px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 12px; color: #666;"><strong>Approved By:</strong> Dr. HOD Name</div>
                            <div style="font-size: 12px; color: #666;"><strong>Approved On:</strong> 2024-01-12 at 14:30</div>
                            <div style="font-size: 12px; color: #666;"><strong>Status:</strong> <span style="color: #4caf50;">Locked & Finalized</span></div>
                        </div>
                    </div>
                    <div class="modal-footer" style="display: flex; gap: 10px; justify-content: flex-end; padding: 15px 20px; border-top: 1px solid #e9ecef;">
                        <button class="btn btn-secondary" onclick="closeViewMarksModal()">Close</button>
                        <button class="btn btn-primary" onclick="showNotification('Exporting marks report...', 'info'); closeViewMarksModal();">Export Report</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function closeViewMarksModal() {
        const modal = document.getElementById('viewMarksModal');
        if (modal) modal.remove();
    }

    // ================== DEAN FUNCTIONS - REJECT REQUESTS ==================
    function rejectDeanRequest(requestType, identifier) {
        const modalHtml = `
            <div id="rejectDeanModal" class="modal-overlay active" onclick="if(event.target === this) closeRejectDeanModal()">
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <h3> Reject ${requestType}</h3>
                        <button class="modal-close" onclick="closeRejectDeanModal()"></button>
                    </div>
                    <div class="modal-body">
                        <div style="background: rgba(244, 67, 54, 0.1); padding: 12px; border-radius: 8px; margin-bottom: 15px;">
                            <div style="font-size: 13px;"><strong>Request Type:</strong> ${requestType}</div>
                            <div style="font-size: 13px;"><strong>Subject:</strong> ${identifier}</div>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 5px;">Rejection Reason *</label>
                            <select id="deanRejectReason" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px;">
                                <option value="">Select reason...</option>
                                <option value="budget">Budget Constraints</option>
                                <option value="policy">Policy Violation</option>
                                <option value="insufficient">Insufficient Justification</option>
                                <option value="timing">Timing Issues</option>
                                <option value="alternative">Alternative Available</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 5px;">Detailed Justification *</label>
                            <textarea id="deanRejectJustification" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px; min-height: 100px; resize: vertical;" placeholder="Provide detailed explanation for rejection (will be sent to requester)..."></textarea>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 15px;">
                            <input type="checkbox" id="notifyHod" checked>
                            <label for="notifyHod" style="font-size: 12px; color: #666;">Notify concerned HOD</label>
                        </div>
                    </div>
                    <div class="modal-footer" style="display: flex; gap: 10px; justify-content: flex-end; padding: 15px 20px; border-top: 1px solid #e9ecef;">
                        <button class="btn btn-secondary" onclick="closeRejectDeanModal()">Cancel</button>
                        <button class="btn btn-danger" onclick="confirmDeanRejection('${requestType}', '${identifier}')">Confirm Rejection</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function closeRejectDeanModal() {
        const modal = document.getElementById('rejectDeanModal');
        if (modal) modal.remove();
    }

    function confirmDeanRejection(requestType, identifier) {
        const reason = document.getElementById('deanRejectReason')?.value;
        const justification = document.getElementById('deanRejectJustification')?.value;
        
        if (!reason) {
            showNotification('Please select a rejection reason', 'warning');
            return;
        }
        if (!justification || justification.trim() === '') {
            showNotification('Please provide a detailed justification', 'warning');
            return;
        }
        
        closeRejectDeanModal();
        showNotification(`${requestType} for ${identifier} has been rejected`, 'warning');
    }

    // ================== FACULTY - VIEW ATTENDANCE RECORD ==================
    function viewAttendanceRecord(date, course) {
        const modalHtml = `
            <div id="attendanceRecordModal" class="modal-overlay active" onclick="if(event.target === this) closeAttendanceRecordModal()">
                <div class="modal-content" style="max-width: 600px;">
                    <div class="modal-header">
                        <h3> Attendance Record - ${course}</h3>
                        <button class="modal-close" onclick="closeAttendanceRecordModal()"></button>
                    </div>
                    <div class="modal-body" style="max-height: 400px; overflow-y: auto;">
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 20px;">
                            <div style="background: rgba(74, 144, 226, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 18px; font-weight: 600; color: #4a90e2;">${date}</div>
                                <div style="font-size: 11px; color: #666;">Date</div>
                            </div>
                            <div style="background: rgba(76, 175, 80, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 18px; font-weight: 600; color: #4caf50;">43</div>
                                <div style="font-size: 11px; color: #666;">Present</div>
                            </div>
                            <div style="background: rgba(244, 67, 54, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 18px; font-weight: 600; color: #ef5350;">2</div>
                                <div style="font-size: 11px; color: #666;">Absent</div>
                            </div>
                        </div>

                        <h4 style="margin: 15px 0 10px; font-size: 14px; color: #333;">Absent Students</h4>
                        <table style="width: 100%; border-collapse: collapse; font-size: 12px;">
                            <thead>
                                <tr style="background: rgba(244, 67, 54, 0.1);">
                                    <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Roll No</th>
                                    <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Name</th>
                                    <th style="padding: 8px; text-align: center; border: 1px solid #ddd;">Total Absent</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #ddd;">CS21003</td>
                                    <td style="padding: 8px; border: 1px solid #ddd;">Charu Mehta</td>
                                    <td style="padding: 8px; text-align: center; border: 1px solid #ddd;">3</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #ddd;">CS21007</td>
                                    <td style="padding: 8px; border: 1px solid #ddd;">Gaurav Reddy</td>
                                    <td style="padding: 8px; text-align: center; border: 1px solid #ddd;">5</td>
                                </tr>
                            </tbody>
                        </table>

                        <div style="margin-top: 15px; padding: 12px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 12px; color: #666;"><strong>Status:</strong> <span style="color: #4caf50;">Approved</span></div>
                            <div style="font-size: 12px; color: #666;"><strong>Approved By:</strong> Dr. HOD Name</div>
                            <div style="font-size: 12px; color: #666;"><strong>Approved On:</strong> ${date} at 16:30</div>
                        </div>
                    </div>
                    <div class="modal-footer" style="display: flex; gap: 10px; justify-content: flex-end; padding: 15px 20px; border-top: 1px solid #e9ecef;">
                        <button class="btn btn-secondary" onclick="closeAttendanceRecordModal()">Close</button>
                        <button class="btn btn-primary" onclick="showNotification('Exporting attendance record...', 'info'); closeAttendanceRecordModal();">Export</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }

    function closeAttendanceRecordModal() {
        const modal = document.getElementById('attendanceRecordModal');
        if (modal) modal.remove();
    }
</script>

<!-- Faculty Portal Container - Hidden by default -->
<div id="facultyPortal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #f8f9fc; z-index: 1000; overflow: hidden;">
    <!-- Faculty portal content will be rendered here by JavaScript -->
</div>

<style>
    body.dark-mode #facultyPortal {
        background: #0a0e27;
    }
</style>

</body>
</html>